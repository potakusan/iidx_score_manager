{"version":3,"sources":["view/components/snackBar/index.tsx","view/components/header/appBar.tsx","view/pages/index.tsx","components/common/timeFormatter.tsx","components/settings/index.tsx","components/songs/filter.tsx","components/bpi/index.tsx","components/indexedDB/index.tsx","components/csv/import.tsx","view/pages/data.tsx","view/components/songs/bpiChart.tsx","view/components/songs/songDetails.tsx","view/components/songs/songDiffs.tsx","view/components/songs/common/tabPanel.tsx","view/components/songs/detailsScreen.tsx","view/components/songs/common/index.tsx","view/components/songs/played/tablePlayed.tsx","view/components/songs/played/songsList.tsx","view/pages/songs.tsx","view/pages/favorites.tsx","view/components/songs/notplayed/tableNotPlayed.tsx","view/components/songs/notplayed/notPlayList.tsx","view/pages/notPlayed.tsx","view/pages/stats.tsx","components/context/global.tsx","config/index.tsx","view/pages/settings.tsx","view/components/compare/table.tsx","view/pages/compare.tsx","view/pages/help.tsx","i18n/ja.js","i18n/en.js","route/index.tsx","components/initialize/index.tsx","themes/dark.tsx","themes/light.tsx","view/components/update.tsx","serviceWorker.js","index.tsx","App.tsx"],"names":["variantIcon","success","CheckCircleIcon","warning","WarningIcon","error","ErrorIcon","info","InfoIcon","styles","makeStyles","theme","backgroundColor","green","palette","dark","primary","main","amber","icon","fontSize","iconVariant","opacity","marginRight","spacing","message","display","alignItems","SnackBarWrapper","props","classes","className","onClose","variant","other","Icon","SnackbarContent","clsx","aria-describedby","id","action","Button","onClick","color","size","key","ShowSnackBar","open","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","handleClose","HideOnScroll","children","window","trigger","useScrollTrigger","target","undefined","Slide","appear","direction","in","RLink","React","forwardRef","ref","innerRef","GlobalHeader","toggleNav","setState","isOpen","state","toggleErrorSnack","errorSnack","this","Fragment","AppBar","Toolbar","IconButton","edge","aria-label","global","cannotMove","Typography","Drawer","List","style","width","Link","component","to","underline","ListItem","button","ListItemIcon","ListItemText","Divider","Component","require","LineShareButton","LineIcon","TwitterShareButton","TwitterIcon","Index","Container","fixed","align","gutterBottom","paragraph","Grid","container","justify","item","textDecoration","marginTop","xs","url","round","title","href","timeFormatter","type","date","Date","m","moment","format","_isSingle","localStorage","getItem","_currentStore","_lang","_currentVersion","_goalBPI","Number","_goalPercentage","_currentTheme","_chartColor","lampCSVArray","convertClearState","original","indexOf","_prefix","diff","_prefixFromNum","difficulty","prefix","difficultyDiscriminator","getSongSuffixForIIDXInfo","name","convertLeggendariaStates","newName","newDifficulty","replace","bpiCalcuator","alreadyHaveData","isSingle","songsDB","propData","s","k","z","pgf","j","avg","wr","_allTwelvesLength","_allTwelvesBPI","data","exScore","exec","songTitle","getOneItemIsSingle","getOneItemIsDouble","Error","bpi","difficultyLevel","NaN","reason","res","_s","_k","_s_","_z_","Math","pow","log","max","ceiled","i","N","E","ceil","sum","playedSongs","length","log2","abs","val","storageWrapper","scores","songs","stores","calculator","newSongs","version","scoreHistory","table","reduced","t","setPropData","Dexie","scoresDB","storedAt","where","toArray","currentData","console","clear","equals","filter","map","currentBPI","delete","isImported","modify","Pgreat","great","missCount","clearState","lastPlayed","lastScore","updatedAt","put","e","score","newScoreData","add","Object","assign","self","toCollection","apply","scoreHistoryDB","currentStore","forceUpdateTime","BPI","then","sort","a","b","willUpdate","song","reduce","result","current","push","all","keys","reverse","willCollection","notEqual","matched","getAll","and","isFavorited","diffs","notes","bpm","textage","dpLevel","isCreated","newState","importCSV","raw","rawData","resultHistory","mode","Promise","resolve","reject","splittedByBreak","split","lengthSum","eachObjNum","p","onChangeText","value","isSnackbarOpen","stateText","errors","isSaving","currentState","progress","execute","bind","setMove","executor","calc","bpiCalculator","getResult","getResultHistory","h","len","calcData","body","setItem","putItem","ContentProps","rel","TextField","onChange","label","margin","multiline","rowsMax","position","disabled","CircularProgress","top","left","marginLeft","BPIChart","chartColor","chartData","graphLastUpdated","height","strokeDasharray","stroke","dataKey","domain","ticks","contentStyle","isAnimationActive","fill","y","isFront","SongDetails","Paper","Table","TableHead","TableRow","TableCell","minWidth","maxWidth","TableBody","floor","isNaN","SongDiffs","handleChange","event","isLoading","updateScoreData","dataset","getWithinVersion","getAcrossVersion","FormControl","InputLabel","shrink","Select","displayEmpty","MenuItem","justifyContent","scoreTable","DiffsTable","columns","column","row","hover","role","tabIndex","TabPanel","index","DetailedSongInformation","unlisten","makeGraph","newScore","lastExScore","dataInserter","setData","bpiBasis","mybest","exScoreFromBPI","calcFromBPI","String","handleScoreInput","errorSnackMessage","newBPI","getTime","handleTabChange","_e","newValue","currentTab","toggleMenu","anchorEl","currentTarget","jumpWeb","formatMessage","intl","toggleFavorited","favorited","db","toggleFavorite","toggleSuccessSnack","successSnack","calcRank","rank","saveAndClose","willDelete","scoreHist","updateScore","handleOpen","showRank","isBody","percentage","isError","showCharts","history","listen","_newLocation","go","detectStarIconColor","Dialog","fullScreen","overflowX","flexGrow","flexDirection","noValidate","autoComplete","Tooltip","aria-haspopup","keepMounted","Boolean","Tabs","indicatorColor","textColor","Tab","withRouter","injectIntl","diffColor","SongsTable","updateFlag","_willDeleteItems","currentSongData","allSongsData","currentScoreData","handleChangeRowsPerPage","handleChangePage","rowsPerPage","page","changeSort","isDesc","slice","bp","behindScore","TablePagination","rowsPerPageOptions","count","labelRowsPerPage","backIconButtonProps","nextIconButtonProps","onChangePage","onChangeRowsPerPage","SongsList","newPage","handleLevelChange","handleExec","checked","handleDiffChange","scoreData","songFilter","options","handleInputChange","cloneState","filterByName","r","range","f","evaluateRange","week","evaluateMode","full","some","toLowerCase","newNum","sortedData","localeCompare","numeric","Infinity","aMax","bMax","handleModeChange","handleRangeCange","JSON","parse","stringify","level","allSongs","allSongsRawData","prevProps","equal","htmlFor","Input","placeholder","endAdornment","InputAdornment","FormLabel","FormGroup","FormControlLabel","control","Checkbox","Songs","getAllFavoritedItems","d","willDeleteItems","NotPlayList","_mounted","_event","songData","whenUpdated","willDeleteItem","NotPlayed","Stats","groupByBPI","array","groups","_","totalBPI","perDate","groupedByBPI","getAllTwelvesBPI","allSongsTwelvesBPI","allSongsElevensBPI","allTwelvesBPI","getAllTwelvesLength","allTwelvesLength","allDiffs","eachDaySum","c","bpis","twelvesBPIGrouped","elevensBPIGrouped","obj","md","lg","padding","right","bottom","orientation","tickLine","axisLine","activeDot","GlobalContainer","lang","store","goalBPI","goalPercentage","setLang","setStore","setTheme","setIsSingle","setGoalBPI","setGoalPercentage","newLang","newStore","newTheme","config","versionNumber","Settings","deleteDef","disableDeleteBtn","message2","sdb","shdb","sodb","currentResetStore","deleteAll","resetItems","reset","toggleDialog","isDialogOpen","updateDef","end","disableUpdateBtn","schDB","reducer","getAllWithAllPlayModes","fetch","json","requireVersion","currentVersion","promiseProducer","pfx","updateItem","scDB","setNewSongsDBRawData","recalculateBPI","Switch","InputLabelProps","startIcon","background","close","AlertDialog","handleOk","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","Compare","gap","handlePMChange","handleCompareFromChange","compareFrom","dataHandler","handleCompareToChange","compareTo","pm","filtered","getSpecificVersionAll","fData","goalPerc","tScore","tData","compareData","ExpansionPanel","ExpansionPanelSummary","expandIcon","ExpansionPanelDetails","ja","Router","locale","messages","en","path","exact","render","_props","Favorite","Help","Initialize","storage","wait","msec","setTimeout","show","errorMessage","now","csv","createMuiTheme","50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700","secondary","overrides","MuiButton","root","textTransform","ReloadModal","onUpdate","location","reload","addEventListener","isLocalhost","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","Event","dispatchEvent","onSuccess","catch","ReactDOM","document","ThemeProvider","Dark","Light","CssBaseline","getElementById","URL","process","origin","response","contentType","headers","get","status","ready","unregister","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.03728df5.chunk.js","sourcesContent":["import React from 'react';\r\nimport clsx from 'clsx';\r\nimport Button from '@material-ui/core/Button';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport { amber, green } from '@material-ui/core/colors';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport { makeStyles, Theme } from '@material-ui/core/styles';\r\n\r\nconst variantIcon = {\r\n  success: CheckCircleIcon,\r\n  warning: WarningIcon,\r\n  error: ErrorIcon,\r\n  info: InfoIcon,\r\n};\r\n\r\nconst styles = makeStyles((theme: Theme) => ({\r\n  success: {\r\n    backgroundColor: green[600],\r\n  },\r\n  error: {\r\n    backgroundColor: theme.palette.error.dark,\r\n  },\r\n  info: {\r\n    backgroundColor: theme.palette.primary.main,\r\n  },\r\n  warning: {\r\n    backgroundColor: amber[700],\r\n  },\r\n  icon: {\r\n    fontSize: 20,\r\n  },\r\n  iconVariant: {\r\n    opacity: 0.9,\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  message: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n}));\r\n\r\nexport interface Props {\r\n  className?: string;\r\n  message?: string;\r\n  onClose?: () => void;\r\n  variant: keyof typeof variantIcon;\r\n  autoHideDuration?:number\r\n  open?:boolean,\r\n  handleClose?:()=>void\r\n}\r\n\r\nfunction SnackBarWrapper(props: Props) {\r\n  const classes = styles();\r\n  const { className, message, onClose, variant, ...other } = props;\r\n  const Icon = variantIcon[variant];\r\n\r\n  return (\r\n    <SnackbarContent\r\n      className={clsx(classes[variant], className)}\r\n      aria-describedby=\"client-snackbar\"\r\n      message={\r\n        <span id=\"client-snackbar\" className={classes.message}>\r\n          <Icon className={clsx(classes.icon, classes.iconVariant)} />\r\n          {message}\r\n        </span>\r\n      }\r\n      action={[\r\n        <Button onClick={onClose} color=\"inherit\" size=\"small\" key=\"ok\">\r\n          Ok\r\n        </Button>,\r\n      ]}\r\n      {...other}\r\n    />\r\n  );\r\n}\r\n\r\nexport default function ShowSnackBar(props:Props) {\r\n  if(!props.open){\r\n    return (null);\r\n  }\r\n  return (\r\n    <div>\r\n      <Snackbar\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'left',\r\n        }}\r\n        open={props.open}\r\n        autoHideDuration={props.autoHideDuration ? props.autoHideDuration : 2000}\r\n        onClose={props.handleClose}\r\n      >\r\n        <SnackBarWrapper\r\n          onClose={props.handleClose}\r\n          variant={props.variant}\r\n          message={props.message}\r\n        />\r\n      </Snackbar>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Link as RouterLink, LinkProps as RouterLinkProps } from \"react-router-dom\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport useScrollTrigger from \"@material-ui/core/useScrollTrigger\";\r\nimport Link from '@material-ui/core/Link';\r\n\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport List from \"@material-ui/core/List\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\nimport LibraryMusicIcon from \"@material-ui/icons/LibraryMusic\";\r\nimport TrendingUpIcon from \"@material-ui/icons/TrendingUp\";\r\nimport SettingsIcon from \"@material-ui/icons/Settings\";\r\nimport StorageIcon from \"@material-ui/icons/Storage\";\r\nimport BorderColorIcon from '@material-ui/icons/BorderColor';\r\nimport StarIcon from '@material-ui/icons/Star';\r\nimport FilterNoneIcon from '@material-ui/icons/FilterNone';\r\nimport HelpIcon from '@material-ui/icons/Help';\r\n\r\nimport { FormattedMessage } from \"react-intl\";\r\n\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport ShowSnackBar from \"../snackBar\";\r\n\r\nfunction HideOnScroll(props:HideOnScrollProps) {\r\n  const { children, window } = props;\r\n  const trigger = useScrollTrigger({ target: window ? window() : undefined });\r\n\r\n  return (\r\n    <Slide appear={false} direction=\"down\" in={!trigger}>\r\n      {children}\r\n    </Slide>\r\n  );\r\n}\r\n\r\ninterface HideOnScrollProps {\r\n  children?: React.ReactElement,\r\n  window?: () => Window,\r\n};\r\n\r\nconst RLink = React.forwardRef<HTMLAnchorElement, RouterLinkProps>((props, ref) => (\r\n  <RouterLink innerRef={ref} {...props} />\r\n));\r\n\r\nclass GlobalHeader extends React.Component<{global:any} & HideOnScrollProps,{isOpen:boolean,errorSnack:boolean}>{\r\n\r\n  constructor(props:{global:any} & HideOnScrollProps){\r\n    super(props);\r\n    this.state = {\r\n      isOpen: false,\r\n      errorSnack:false\r\n    }\r\n  }\r\n\r\n  toggleNav = ()=> this.setState({isOpen:!this.state.isOpen});\r\n  toggleErrorSnack = ()=> this.setState({errorSnack:!this.state.errorSnack});\r\n\r\n  render(){\r\n    const {isOpen} = this.state;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <HideOnScroll {...this.props}>\r\n          <AppBar>\r\n            <Toolbar>\r\n              <IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\" onClick={()=>{\r\n                if(!this.props.global.state.cannotMove){\r\n                  return this.toggleNav();\r\n                }else{\r\n                  return this.toggleErrorSnack();\r\n                }\r\n              }}>\r\n                <MenuIcon />\r\n              </IconButton>\r\n              <Typography variant=\"h6\">\r\n                <FormattedMessage id=\"Top.Title\"/>\r\n              </Typography>\r\n            </Toolbar>\r\n          </AppBar>\r\n        </HideOnScroll>\r\n        <Toolbar />\r\n        <Drawer open={isOpen} onClose={this.toggleNav}>\r\n          <List style={{width:\"230px\"}}>\r\n            <Link component={RLink} to=\"/\" underline=\"none\" color=\"textPrimary\" onClick={this.toggleNav}>\r\n              <ListItem button>\r\n                <ListItemIcon><HomeIcon /></ListItemIcon>\r\n                <ListItemText primary={<FormattedMessage id=\"GlobalNav.Home\"/>} />\r\n              </ListItem>\r\n            </Link>\r\n            <Link component={RLink} to=\"/data\" underline=\"none\" color=\"textPrimary\" onClick={this.toggleNav}>\r\n              <ListItem button>\r\n                <ListItemIcon><StorageIcon /></ListItemIcon>\r\n                <ListItemText primary={<FormattedMessage id=\"GlobalNav.Data\"/>} />\r\n              </ListItem>\r\n            </Link>\r\n            <Link component={RLink} to=\"/favorite\" underline=\"none\" color=\"textPrimary\" onClick={this.toggleNav}>\r\n              <ListItem button>\r\n                <ListItemIcon><StarIcon /></ListItemIcon>\r\n                <ListItemText primary={<FormattedMessage id=\"GlobalNav.FavoriteSongs\"/>} />\r\n              </ListItem>\r\n            </Link>\r\n            <Link component={RLink} to=\"/songs\" underline=\"none\" color=\"textPrimary\" onClick={this.toggleNav}>\r\n              <ListItem button>\r\n                <ListItemIcon><LibraryMusicIcon /></ListItemIcon>\r\n                <ListItemText primary={<FormattedMessage id=\"GlobalNav.SongList\"/>} />\r\n              </ListItem>\r\n            </Link>\r\n            <Link component={RLink} to=\"/notPlayed\" underline=\"none\" color=\"textPrimary\" onClick={this.toggleNav}>\r\n              <ListItem button>\r\n                <ListItemIcon><BorderColorIcon /></ListItemIcon>\r\n                <ListItemText primary={<FormattedMessage id=\"GlobalNav.unregisteredSongs\"/>} />\r\n              </ListItem>\r\n            </Link>\r\n            <Link component={RLink} to=\"/compare\" underline=\"none\" color=\"textPrimary\" onClick={this.toggleNav}>\r\n              <ListItem button>\r\n                <ListItemIcon><FilterNoneIcon /></ListItemIcon>\r\n                <ListItemText primary={<FormattedMessage id=\"GlobalNav.compare\"/>} />\r\n              </ListItem>\r\n            </Link>\r\n            <Link component={RLink} to=\"/stats\" underline=\"none\" color=\"textPrimary\" onClick={this.toggleNav}>\r\n              <ListItem button>\r\n                <ListItemIcon><TrendingUpIcon /></ListItemIcon>\r\n                <ListItemText primary={<FormattedMessage id=\"GlobalNav.Statistics\"/>} />\r\n              </ListItem>\r\n            </Link>\r\n            <Link component={RLink} to=\"/settings\" underline=\"none\" color=\"textPrimary\" onClick={this.toggleNav}>\r\n              <ListItem button>\r\n                <ListItemIcon><SettingsIcon /></ListItemIcon>\r\n                <ListItemText primary={<FormattedMessage id=\"GlobalNav.Settings\"/>} />\r\n              </ListItem>\r\n            </Link>\r\n            <Link component={RLink} to=\"/help\" underline=\"none\" color=\"textPrimary\" onClick={this.toggleNav}>\r\n              <ListItem button>\r\n                <ListItemIcon><HelpIcon /></ListItemIcon>\r\n                <ListItemText primary={<FormattedMessage id=\"GlobalNav.Help\"/>} />\r\n              </ListItem>\r\n            </Link>\r\n          </List>\r\n          <Divider />\r\n        </Drawer>\r\n        <ShowSnackBar message={\"\"} variant=\"warning\"\r\n            handleClose={this.toggleErrorSnack} open={this.state.errorSnack} autoHideDuration={3000}/>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default GlobalHeader;\r\n","import * as React from 'react';\r\nimport Container from '@material-ui/core/Container';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport { Link } from 'react-router-dom';\r\nimport {Link as RefLink} from '@material-ui/core/';\r\nimport {csv} from \"../../data/music.js\";\r\nconst {LineShareButton,LineIcon,TwitterShareButton,TwitterIcon} = require('react-share');\r\n\r\nexport default class Index extends React.Component<{},{}> {\r\n\r\n  render(){\r\n    return (\r\n      <div className=\"heroLayout\">\r\n        <Container fixed>\r\n          <Typography component=\"h3\" variant=\"h3\" align=\"center\" color=\"textPrimary\" gutterBottom>\r\n            <FormattedMessage id=\"Top.Title\"/>\r\n          </Typography>\r\n          <Typography variant=\"h5\" align=\"center\" color=\"textSecondary\" paragraph>\r\n            <FormattedMessage id=\"Index.heroText\"/>\r\n          </Typography>\r\n          <Typography align=\"center\" color=\"textSecondary\" paragraph>\r\n            /\r\n          </Typography>\r\n          <div>\r\n            <Grid container spacing={2} justify=\"center\">\r\n              <Grid item>\r\n                <Link to=\"/data\" style={{textDecoration:\"none\"}}>\r\n                  <Button variant=\"contained\" color=\"primary\">\r\n                    <FormattedMessage id=\"Index.importButton\"/>\r\n                  </Button>\r\n                </Link>\r\n              </Grid>\r\n              <Grid item>\r\n                <Link to=\"/help\" style={{textDecoration:\"none\"}}>\r\n                  <Button variant=\"contained\" color=\"secondary\">\r\n                    <FormattedMessage id=\"Index.helpButton\"/>\r\n                  </Button>\r\n                </Link>\r\n              </Grid>\r\n            </Grid>\r\n          </div>\r\n          <div style={{marginTop:\"10px\"}}>\r\n            <Typography align=\"center\" color=\"textSecondary\" variant=\"caption\" paragraph>\r\n              !\r\n            </Typography>\r\n            <Grid container spacing={1} justify=\"center\">\r\n              <Grid item xs={2}>\r\n                <LineShareButton url={\"https://bpi.poyashi.me\"}>\r\n                    <LineIcon size={32} round />\r\n                </LineShareButton>\r\n              </Grid>\r\n              <Grid item xs={2}>\r\n                <TwitterShareButton url={\"https://bpi.poyashi.me\"} title={\"BPIManager:\"}>\r\n                    <TwitterIcon size={32} round />\r\n                </TwitterShareButton>\r\n              </Grid>\r\n            </Grid>\r\n          </div>\r\n          <div style={{marginTop:\"15px\"}}>\r\n            <Grid container spacing={2} justify=\"center\">\r\n              <Grid item>\r\n                <Typography align=\"center\" color=\"textSecondary\" variant=\"caption\" paragraph>\r\n                  If you're not familiar with Japanese, please go firstly to settings and you can change language there.\r\n                </Typography>\r\n                <Typography align=\"center\" color=\"textSecondary\" paragraph variant=\"caption\">\r\n                  <FormattedMessage id=\"Index.notes1\"/>\r\n                </Typography>\r\n                <Typography align=\"center\" color=\"textSecondary\" paragraph variant=\"caption\">\r\n                  <FormattedMessage id=\"Index.notes2\"/>\r\n                </Typography>\r\n                <Typography align=\"center\" color=\"textSecondary\" paragraph variant=\"caption\">\r\n                  BPIManager beta ver0.0.0.3<br/>\r\n                  If you have encountered unintended behaviours or have opinions to make this tool much better, please contact <RefLink color=\"secondary\" href=\"https://twitter.com/BPIManager\">@BPIManager</RefLink>.\r\n                </Typography>\r\n              </Grid>\r\n            </Grid>\r\n          </div>\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import moment from \"moment\";\r\n\r\nconst timeFormatter = (type = 0,date = new Date()):string =>{\r\n  const m = moment(date);\r\n  switch (type){\r\n    case 0:\r\n    return m.format(\"YYYY-MM-DD HH:mm\");\r\n    case 1:\r\n    return m.format(\"YYYYMMDD\");\r\n    case 2:\r\n    return m.format(\"HHmmss\");\r\n    case 3:\r\n    return m.format(\"YYYY-MM-DD HH:mm:ss\");\r\n  }\r\n  return \"\";\r\n}\r\n\r\nexport default timeFormatter;\r\n","export const _isSingle = ()=>{\r\n    return !localStorage.getItem(\"isSingle\") || localStorage.getItem(\"isSingle\") === \"1\" || localStorage.getItem(\"isSingle\") === \"true\" ? 1 : 0;\r\n}\r\n\r\nexport const _currentStore = ()=>{\r\n  return localStorage.getItem(\"currentStore\") || \"27\";\r\n}\r\n\r\nexport const _lang = ()=>{\r\n  return localStorage.getItem(\"lang\") || \"ja\";\r\n}\r\n\r\nexport const _currentVersion = ()=>{\r\n  return localStorage.getItem(\"lastDefFileVer\") || \"undefined\";\r\n}\r\n\r\nexport const _goalBPI = ()=>{\r\n  return Number(localStorage.getItem(\"goalBPI\")) || 0;\r\n}\r\n\r\nexport const _goalPercentage = ()=>{\r\n  return Number(localStorage.getItem(\"goalPercentage\")) || 0;\r\n}\r\n\r\nexport const _currentTheme = ()=>{\r\n  return localStorage.getItem(\"theme\") || \"light\";\r\n}\r\n\r\nexport const _currentStoreWithFullName = ()=>{\r\n  const t:string = localStorage.getItem(\"currentStore\") || \"27\";\r\n  return t === \"26\" ? \"26 Rootage\" : \"27 HEROIC VERSE\"\r\n}\r\n\r\nexport const _chartColor = ()=>{\r\n  return _currentTheme() === \"dark\" ? \"#eee\" : \"#333\"\r\n}\r\n","export const lampArray:string[] = [\r\n  \"FAILED\",\"ASSIST\",\"EASY\",\"CLEAR\",\"HARD\",\"EX-HARD\",\"FULLCOMBO\",\"UNKNOWN\"\r\n];\r\nexport const lampCSVArray:string[] = [\r\n  \"FAILED\",\"ASSIST CLEAR\",\"EASY CLEAR\",\"CLEAR\",\"HARD CLEAR\",\"EX HARD CLEAR\",\"FULLCOMBO CLEAR\"\r\n];\r\n\r\nexport const convertClearState = (original:string|number,direction:number):string|number=>{\r\n  if(direction === 0){\r\n    // csv to num\r\n    if(typeof original !== \"string\"){return 0;}\r\n    return lampCSVArray.indexOf(original);\r\n  }else{\r\n    if(typeof original !== \"number\"){return 1;}\r\n    return lampCSVArray[original];\r\n  }\r\n}\r\n\r\nexport const _prefix = (diff:string):string=> diff === \"hyper\" ? \"(H)\" : diff === \"leggendaria\" ? \"()\" : \"\";\r\n\r\nexport const _prefixFromNum = (difficulty:string):string=>{\r\n  let prefix:string = \"\";\r\n  if(difficulty === \"3\" || difficulty === \"8\"){\r\n    prefix = \"(H)\";\r\n  }\r\n  if(difficulty === \"10\" || difficulty === \"11\"){\r\n    prefix = \"()\";\r\n  }\r\n  return prefix;\r\n}\r\n\r\nexport const difficultyDiscriminator = (difficulty:string):string=>{\r\n  let diff:string = \"another\";\r\n  if(difficulty === \"3\" || difficulty === \"8\"){\r\n    diff = \"hyper\";\r\n  }\r\n  if(difficulty === \"10\" || difficulty === \"11\"){\r\n    diff = \"leggendaria\";\r\n  }\r\n  return diff;\r\n}\r\n\r\nexport const getSongSuffixForIIDXInfo = (name:string,difficulty:string):string=>{\r\n  if(difficulty === \"3\" || difficulty === \"8\"){\r\n    return \"[H]\";\r\n  }\r\n  if(difficulty === \"4\" || difficulty === \"9\"){\r\n    return \"[A]\";\r\n  }\r\n  if(difficulty === \"10\" || difficulty === \"11\"){\r\n    switch(name){\r\n      default:\r\n        return \"[A]\";\r\n      case \"Ancient Scapes\":\r\n      case \"Close the World feat.aru\":\r\n      case \"Feel The Beat\":\r\n      case \"invoker\":\r\n      case \"Sigmund\":\r\n      case \"Verflucht\":\r\n      case \"\":\r\n        return \"LEGGENDARIA[A]\";\r\n    }\r\n  }\r\n  return \"\";\r\n}\r\n\r\n\r\nexport const convertLeggendariaStates = (name:string,difficulty:string):{name:string,difficulty:string}=>{\r\n  const leggendariaSongs:string[] = [\r\n    \"ABSOLUTE\",\r\n    \"Clione\",\r\n    \"RED ZONE\",\r\n    \"spiral galaxy\",\r\n    \"Little Little Princess\",\r\n    \"CONTRACT\",\r\n    \"waxing and wanding\",\r\n    \"KAMAITACHI\",\r\n    \"VANESSA\",\r\n    \"Blue Rain\",\r\n    \"ICARUS\",\r\n    \"THE DEEP STRIKER\",\r\n    \"bertreffen\",\r\n    \"Kung-fu Empire\",\r\n    \"naughty girl@Queen's Palace\",\r\n    \"THANK YOU FOR PLAYING\",\r\n    \"\",\r\n    \"SOLID STATE SQUAD\",\r\n    \"Golden Palms\",\r\n    \"QUANTUM TELEPORTATION\",\r\n    \"Howling\",\r\n    \"LUV CAN SAVE U\",\r\n    \"\",\r\n    \"\",\r\n    \"\",\r\n    \"Ancient ScapesLEGGENDARIA\",\r\n    \"Close the World feat.aruLEGGENDARIA\",\r\n    \"Feel The BeatLEGGENDARIA\",\r\n    \"invokerLEGGENDARIA\",\r\n    \"SigmundLEGGENDARIA\",\r\n    \"VerfluchtLEGGENDARIA\",\r\n    \"LEGGENDARIA\",\r\n    \"\",\r\n    \"Beat Radiance\",\r\n    \"CHRONO DIVER -NORNIR-\",\r\n    \"Cosmic Cat\",\r\n    \"EBORY & IVORY\",\r\n    \"\",\r\n    \"\",\r\n    \"Damage Per Second\",\r\n    \"STARLIGHT DANCEHALL\",\r\n    \"Amazing Mirage\",\r\n    \" ft. Kanae Asaba\",\r\n  ]\r\n  let newName = name,newDifficulty = difficulty;\r\n  if(difficulty !== \"another\"){\r\n    return {\r\n      name:newName,\r\n      difficulty:newDifficulty\r\n    }\r\n  }\r\n  if(leggendariaSongs.indexOf(name) > -1){\r\n    newName = name.replace(\"LEGGENDARIA\",\"\").replace(\"\",\"\");\r\n    newDifficulty = \"leggendaria\";\r\n  }\r\n  return {\r\n    name:newName,\r\n    difficulty:newDifficulty\r\n  }\r\n}\r\n","import {songsDB} from \"../indexedDB\";\r\nimport { songData } from \"../../types/data\";\r\n\r\nexport interface B{\r\n  error:boolean,bpi:number,reason?:any,difficultyLevel?:string\r\n}\r\n\r\nexport default class bpiCalcuator{\r\n  songsDB:any;\r\n  isSingle: number;\r\n  propData:songData[]|null = null;\r\n\r\n  constructor(alreadyHaveData:boolean = false, isSingle:number = 1){\r\n    this.isSingle = isSingle;\r\n    this.songsDB = !alreadyHaveData ? new songsDB() : null;\r\n  }\r\n\r\n  setPropData(data:songData,exScore:number,isSingle:number):number{\r\n    this.isSingle = isSingle;\r\n    this.s = exScore;\r\n    this.k = data[\"avg\"];\r\n    this.z = data[\"wr\"];\r\n    this.m = data[\"notes\"] * 2;\r\n    return this.exec();\r\n  }\r\n\r\n  private m:number = 1;\r\n  private s:number = 0;\r\n  private k:number = 0;\r\n  private z:number = 0;\r\n  private pgf = (j:number):number=> j === this.m ? this.m : 1 + ( j / this.m - 0.5 ) / ( 1 - j / this.m );\r\n\r\n  async calc(songTitle:string,difficulty:string,exScore:number):Promise<B>{\r\n    try{\r\n      this.propData = this.isSingle === 1 ?\r\n      await this.songsDB.getOneItemIsSingle(songTitle,difficulty) :\r\n      await this.songsDB.getOneItemIsDouble(songTitle,difficulty);\r\n      if(!this.propData || !this.propData[0]){\r\n        throw new Error(\"\");\r\n      }\r\n      this.s = exScore;\r\n      this.k = this.propData[0][\"avg\"];\r\n      this.z = this.propData[0][\"wr\"];\r\n      this.m = this.propData[0][\"notes\"] * 2;\r\n      return {error:false,bpi:this.exec(),difficultyLevel:this.propData[0][\"difficultyLevel\"]};\r\n\r\n    }catch(e){\r\n      return {error:true,bpi:NaN,reason:e.message || e};\r\n    }\r\n  }\r\n\r\n  exec(){\r\n    let res:number = NaN;\r\n    const {k,z,s} = this;\r\n    if( s > this.m ){\r\n      throw new Error(\"\");\r\n    }\r\n    if( s < 0){\r\n      throw new Error(\"\");\r\n    }\r\n    const _s = this.pgf(s);\r\n    const _k = this.pgf(k);\r\n    const _z = this.pgf(z);\r\n\r\n    const _s_ = _s / _k;\r\n    const _z_ = _z / _k;\r\n    if(s >= k){\r\n      res = 100 * ( Math.pow(Math.log(_s_),1.5) / Math.pow(Math.log(_z_),1.5) );\r\n    }else{\r\n      res = -100 * ( Math.pow(-Math.log(_s_),1.5) / Math.pow(Math.log(_z_),1.5) );\r\n    }\r\n    return res < -15 ? -15 : Math.round(res * 100) / 100;\r\n  }\r\n\r\n  //\r\n  private avg:number = 0;\r\n  private wr:number = 0;\r\n\r\n  setData(max:number,avg:number,wr:number):void{\r\n    this.m = max;\r\n    this.avg = avg;\r\n    this.wr = wr;\r\n  }\r\n\r\n  calcFromBPI(bpi:number,ceiled:boolean = false):number{\r\n    const z = this.pgf(this.wr),k = this.pgf(this.avg);\r\n\r\n    const i = Math.pow(Math.pow(Math.log(z / k),1.5)  * bpi / 100, 1 / 1.5);\r\n\r\n    const N = Math.pow(Math.E,i) * k;\r\n    const res = this.m * ( ( N - 0.5 ) / N );\r\n    return ceiled ? Math.ceil(res) : res;\r\n  }\r\n\r\n  rank(bpi:number):number{\r\n    return Math.ceil(Math.pow(2645, (100 - bpi ) / 100 ));\r\n  }\r\n\r\n  _allTwelvesLength:number = 0;\r\n  _allTwelvesBPI:number[] = [];\r\n\r\n  set allTwelvesLength(val: number){ this._allTwelvesLength = val }\r\n  set allTwelvesBPI(val: number[]){ this._allTwelvesBPI = val }\r\n\r\n  totalBPI():number{\r\n    let sum = 0,playedSongs = this._allTwelvesBPI.length;\r\n    if(playedSongs === 0){return -15;}\r\n    const k = Math.log2(this._allTwelvesLength);\r\n    for (let i=0; i < this._allTwelvesLength; ++i){\r\n      if(i < playedSongs){\r\n        const bpi = this._allTwelvesBPI[i]\r\n        if(bpi > 0){\r\n          sum += Math.pow( bpi, k ) / this._allTwelvesLength\r\n        }else{\r\n          sum += -Math.pow( Math.abs(bpi), k ) / this._allTwelvesLength\r\n        }\r\n      }\r\n    }\r\n    return Math.round(Math.pow(sum, 1 / k) * 100) / 100;\r\n  }\r\n}\r\n","import Dexie from \"dexie\";\r\nimport {scoreData,songData} from \"../../types/data\";\r\nimport timeFormatter from \"../common/timeFormatter\";\r\nimport {_currentStore,_isSingle} from \"../settings\";\r\nimport moment from \"moment\";\r\nimport {difficultyDiscriminator} from \"../songs/filter\";\r\nimport bpiCalcuator from \"../bpi\";\r\n\r\nconst storageWrapper = class extends Dexie{\r\n  target: string = \"scores\";\r\n  //\r\n  scores:Dexie.Table<any, any>;\r\n  songs:Dexie.Table<any, any>;\r\n  stores: Dexie.Table<any, any>;\r\n  calculator:bpiCalcuator = new bpiCalcuator(true);\r\n\r\n  constructor(){\r\n    super(\"ScoreCoach\");\r\n    this.version(1).stores({\r\n      scores : \"[title+difficulty+storedAt+isSingle],title,*difficulty,*difficultyLevel,*version,currentBPI,exScore,Pgreat,great,missCount,clearState,lastPlayed,storedAt,isSingle,isImported,updatedAt,lastScore\",\r\n      songs : \"&++num,title,*difficulty,*difficultyLevel,wr,avg,notes,bpm,textage,dpLevel,isCreated,isFavorited,[title+difficulty]\",\r\n      stores : \"&name,updatedAt\",\r\n      scoreHistory : \"&++num,[title+storedAt+difficulty+isSingle],[title+storedAt+difficulty+isSingle+updatedAt],title,difficulty,difficultyLevel,storedAt,exScore,BPI,isSingle,updatedAt\"\r\n    });\r\n    this.scores = this.table(\"scores\");\r\n    this.songs = this.table(\"songs\");\r\n    this.stores = this.table(\"stores\");\r\n  }\r\n\r\n  protected newSongs:{[key:string]:songData} = {};\r\n\r\n  setNewSongsDBRawData(reduced:{[key:string]:songData}):this{\r\n    this.newSongs = reduced;\r\n    return this;\r\n  }\r\n\r\n  protected apply(t:string,s:number,i:number = 1):number{\r\n    return this.calculator.setPropData(this.newSongs[t],s,i);\r\n  }\r\n\r\n}\r\n\r\nexport const scoresDB = class extends storageWrapper{\r\n  scores: Dexie.Table<any, any>;\r\n  storedAt:string = \"\";\r\n  isSingle:number = 1;\r\n\r\n  constructor(isSingle:number = 1,storedAt?:string){\r\n    super();\r\n    this.scores = this.table(\"scores\");\r\n    this.isSingle = isSingle;\r\n    if(storedAt) this.storedAt = storedAt;\r\n  }\r\n\r\n  setIsSingle(isSingle:number):this{\r\n    this.isSingle = isSingle;\r\n    return this;\r\n  }\r\n\r\n  setStoredAt(storedAt:string):this{\r\n    this.storedAt = storedAt;\r\n    return this;\r\n  }\r\n\r\n  async getAll():Promise<scoreData[]>{\r\n    try{\r\n      const currentData = await this.scores.where({\r\n        storedAt:_currentStore(),\r\n        isSingle:_isSingle(),\r\n      }).toArray();\r\n      return currentData;\r\n    }catch(e){\r\n      console.error(e);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async getSpecificVersionAll():Promise<scoreData[]>{\r\n    try{\r\n      const currentData = await this.scores.where({\r\n        storedAt:this.storedAt,\r\n        isSingle:this.isSingle,\r\n      }).toArray();\r\n      return currentData;\r\n    }catch(e){\r\n      console.error(e);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async deleteAll():Promise<void>{\r\n    return await this.scores.clear();\r\n  }\r\n\r\n  getItem(title:string,difficulty:string,storedAt:string,isSingle:number):Promise<scoreData[]>{\r\n    return this.scores.where(\"[title+difficulty+storedAt+isSingle]\").equals([title,difficulty,storedAt,isSingle]).toArray();\r\n  }\r\n\r\n  //for statistics\r\n  async getAllTwelvesBPI(isSingle:number,storedAt:string,diff:string = \"12\"):Promise<number[]>{\r\n    try{\r\n      let data:scoreData[] = await this.scores.where({\r\n        storedAt:storedAt,isSingle:isSingle,\r\n      }).toArray();\r\n      data = data.filter(item=>item.difficultyLevel === diff) ;\r\n      return data.map((item:scoreData)=>item.currentBPI);\r\n    }catch(e){\r\n      console.error(e);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async resetItems(storedAt:string):Promise<number>{\r\n    return await this.scores.where({storedAt:storedAt}).delete();\r\n  }\r\n\r\n  async resetImportedItems():Promise<number>{\r\n    return await this.scores.where({isImported:\"true\"}).delete();\r\n  }\r\n\r\n  async setItem(item:any):Promise<any>{\r\n    try{\r\n      return await this.scores.where(\"[title+difficulty+storedAt+isSingle]\").equals(\r\n        [item[\"title\"],item[\"difficulty\"],this.storedAt,this.isSingle]\r\n      ).modify({\r\n        title:item[\"title\"],\r\n        version:item[\"version\"],\r\n        difficulty:item[\"difficulty\"],\r\n        difficultyLevel:item[\"difficultyLevel\"],\r\n        currentBPI:item[\"currentBPI\"],\r\n        exScore:Number(item[\"exScore\"]),\r\n        Pgreat:Number(item[\"Pgreat\"]),\r\n        great:Number(item[\"great\"]),\r\n        missCount:Number(item[\"missCount\"]),\r\n        clearState:item[\"clearState\"],\r\n        lastPlayed:item[\"lastPlayed\"],\r\n        lastScore:item[\"lastScore\"],\r\n        storedAt:item[\"storedAt\"],\r\n        isSingle:item[\"isSingle\"],\r\n        isImported:true,\r\n        updatedAt : item[\"updatedAt\"]\r\n      })\r\n    }catch(e){\r\n      console.error(e);\r\n      return;\r\n    }\r\n  }\r\n\r\n  putItem(item:any):any{\r\n    try{\r\n      return this.scores.put({\r\n        title:item[\"title\"],\r\n        version:item[\"version\"],\r\n        difficulty:item[\"difficulty\"],\r\n        difficultyLevel:item[\"difficultyLevel\"],\r\n        currentBPI:item[\"currentBPI\"],\r\n        exScore:Number(item[\"exScore\"]),\r\n        Pgreat:Number(item[\"Pgreat\"]),\r\n        great:Number(item[\"great\"]),\r\n        missCount:Number(item[\"missCount\"]),\r\n        clearState:item[\"clearState\"],\r\n        lastPlayed:item[\"lastPlayed\"],\r\n        lastScore:item[\"lastScore\"],\r\n        storedAt:item[\"storedAt\"],\r\n        isSingle:item[\"isSingle\"],\r\n        isImported:true,\r\n        updatedAt : item[\"updatedAt\"]\r\n      })\r\n    }catch(e){\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  async updateScore(score:scoreData|null,data:{currentBPI:number,exScore:number}):Promise<boolean>{\r\n    try{\r\n      if(!score){return false;}\r\n      if(score.updatedAt === \"-\"){\r\n        //put\r\n        let newScoreData:scoreData = score;\r\n        newScoreData.currentBPI = data.currentBPI;\r\n        newScoreData.exScore = data.exScore;\r\n        newScoreData.updatedAt = timeFormatter(0);\r\n        await this.scores.add(newScoreData);\r\n      }else{\r\n        //update\r\n        await this.scores.where(\"[title+difficulty+storedAt+isSingle]\").equals([score.title,score.difficulty,score.storedAt,score.isSingle]).modify(\r\n        Object.assign(data,{\r\n          updatedAt : timeFormatter(0),\r\n          lastScore: score.exScore,\r\n        })\r\n        );\r\n      }\r\n      return true;\r\n    }catch(e){\r\n      console.error(e);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async removeItem(title:string,storedAt:string):Promise<number>{\r\n    return await this.scores.where({title:title,storedAt:storedAt}).delete();\r\n  }\r\n\r\n  async recalculateBPI(){\r\n    try{\r\n      const self = this;\r\n      return await this.scores.toCollection().modify(function(val: { currentBPI: number; title: string; exScore: number; isSingle: number;}){\r\n        if(val.title === \"\"){\r\n          console.log(self.apply(val.title,val.exScore,val.isSingle))\r\n        }\r\n        val.currentBPI = self.apply(val.title,val.exScore,val.isSingle);\r\n      })\r\n    }catch(e){\r\n      console.error(\"failed recalculate - \" + e);\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\nexport const scoreHistoryDB = class extends storageWrapper{\r\n  scoreHistory: Dexie.Table<any, any>;\r\n  isSingle:number = 1;\r\n  currentStore:string = \"27\";\r\n\r\n  constructor(){\r\n    super();\r\n    this.scoreHistory = this.table(\"scoreHistory\");\r\n    this.isSingle = _isSingle();\r\n    this.currentStore = _currentStore();\r\n  }\r\n\r\n  add(score:scoreData|null,data:{currentBPI:number,exScore:number},forceUpdateTime:boolean = false):boolean{\r\n    try{\r\n      if(!score){return false;}\r\n      this.scoreHistory.add({\r\n        title:score.title,\r\n        exScore:data.exScore,\r\n        difficulty:score.difficulty,\r\n        difficultyLevel:score.difficultyLevel,\r\n        storedAt:score.storedAt,\r\n        BPI:data.currentBPI,\r\n        updatedAt:forceUpdateTime ? score.updatedAt : timeFormatter(3),\r\n        isSingle:score.isSingle,\r\n      });\r\n      return true;\r\n    }catch(e){\r\n      console.error(e);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async check(item:scoreData):Promise<{willUpdate:boolean,lastScore:number}>{\r\n    try{\r\n      const t = await this.scoreHistory.where(\"[title+storedAt+difficulty+isSingle]\").equals(\r\n        [item[\"title\"],item[\"storedAt\"],item[\"difficulty\"],item[\"isSingle\"]]\r\n      ).toArray().then((t)=>t.sort((a,b)=>moment(b.updatedAt).diff(moment(a.updatedAt))));\r\n      return {\r\n        willUpdate:t.length === 0 ? true : Number(item.exScore) > Number(t[t.length - 1].exScore),\r\n        lastScore:t.length === 0 ? -1 : t[t.length-1].exScore\r\n      };\r\n    }catch(e){\r\n      return {\r\n        willUpdate:false,\r\n        lastScore:0,\r\n      };\r\n    }\r\n  }\r\n\r\n  async getAll(diff:string = \"12\"):Promise<any[]>{\r\n    try{\r\n      return await this.scoreHistory.where(\r\n        {storedAt:this.currentStore,isSingle:this.isSingle,difficultyLevel:diff}\r\n      ).toArray();\r\n    }catch(e){\r\n      console.error(e);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async reset(storedAt?:string):Promise<any>{\r\n    try{\r\n      return await this.scoreHistory.where(\r\n        {storedAt:storedAt ? storedAt : this.currentStore,isSingle:this.isSingle}\r\n      ).delete();\r\n    }catch(e){\r\n      console.error(e);\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  async getWithinVersion(song:songData):Promise<any[]>{\r\n    try{\r\n      if(!song){return [];}\r\n      return await this.scoreHistory.where(\r\n        {storedAt:this.currentStore,isSingle:this.isSingle,title:song.title,difficulty:difficultyDiscriminator(song.difficulty)}\r\n      ).toArray().then(t=>t.sort((a,b)=>{\r\n        return moment(b.updatedAt).diff(moment(a.updatedAt))\r\n      }));\r\n    }catch(e){\r\n      console.error(e);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async getAcrossVersion(song:songData):Promise<any[]>{\r\n    try{\r\n      if(!song){return [];}\r\n      const all = await this.scoreHistory.where(\r\n        {isSingle:this.isSingle,title:song.title,difficulty:difficultyDiscriminator(song.difficulty)}\r\n      ).toArray().then(t=>t.reduce((result, current) => {\r\n        if(!result[current.storedAt]){\r\n          result[current.storedAt] = [];\r\n        }\r\n        result[current.storedAt].push(current);\r\n        return result;\r\n      }, {}));\r\n      let res:any[] = [];\r\n      Object.keys(all).map((item:string)=>{\r\n        const t = all[item].sort((a:any,b:any)=>{\r\n          return b.exScore - a.exScore\r\n        });\r\n        res.push(t[0]);\r\n        return 0;\r\n      });\r\n      return res.reverse();\r\n    }catch(e){\r\n      console.error(e);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async recalculateBPI(){\r\n    try{\r\n      const self = this;\r\n      return await this.scoreHistory.toCollection().modify(function(val: { BPI: number; title: string; exScore: number; isSingle: number;}){\r\n        val.BPI = self.apply(val.title,val.exScore,val.isSingle);\r\n      })\r\n    }catch(e){\r\n      console.error(\"failed recalculate - \" + e);\r\n      return;\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport const songsDB = class extends storageWrapper{\r\n  songs: Dexie.Table<any, any>;\r\n\r\n  constructor(){\r\n    super();\r\n    this.songs = this.table(\"songs\");\r\n  }\r\n\r\n  async getAll(isSingle:number = 1,willCollection:boolean = false):Promise<any>{\r\n    try{\r\n      const data = isSingle === 1 ?\r\n        this.songs.where(\"dpLevel\").equals(\"0\") :\r\n        this.songs.where(\"dpLevel\").notEqual(\"0\");\r\n      return willCollection ? data : await data.toArray();\r\n    }catch(e){\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async getAllWithAllPlayModes():Promise<any>{\r\n    try{\r\n      return await this.songs.toCollection().toArray();\r\n    }catch(e){\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async getAllTwelvesLength(isSingle:number = 1):Promise<number>{\r\n    try{\r\n      const data = isSingle === 1 ?\r\n        await this.songs.where(\"dpLevel\").equals(\"0\").toArray() :\r\n        await this.songs.where(\"dpLevel\").notEqual(\"0\").toArray();\r\n      let matched = 0;\r\n      for(let i = 0; i < data.length; ++i){\r\n        if(data[i][\"difficultyLevel\"] === \"12\"){\r\n          matched++;\r\n        }\r\n      }\r\n      return matched;\r\n    }catch(e){\r\n      console.error(e);\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  async getAllFavoritedItems(isSingle:number = 1):Promise<any[]>{\r\n    try{\r\n      return await this.getAll(isSingle,true).then(t=>t.and((item:songData)=>item.isFavorited === true).toArray());\r\n    }catch(e){\r\n      console.error(e);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async deleteAll():Promise<void>{\r\n    return await this.songs.clear();\r\n  }\r\n\r\n  async getItem(title:string):Promise<any[]>{\r\n    try{\r\n      return await this.songs.where({title:title}).toArray();\r\n    }catch(e){\r\n      console.error(e);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async getOneItemIsSingle(title:string,difficulty:string):Promise<songData[]>{\r\n    const diffs = ():string=>{\r\n      switch(difficulty){\r\n        case \"hyper\":return \"3\";\r\n        case \"another\":return \"4\";\r\n        case \"leggendaria\":return \"10\";\r\n        default:\r\n        return difficulty;\r\n      }\r\n    };\r\n    try{\r\n      return await this.songs.where(\"[title+difficulty]\").equals([title,diffs()]).toArray();\r\n    }catch(e){\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async getOneItemIsDouble(title:string,difficulty:string):Promise<songData[]>{\r\n    const diffs = ():string=>{\r\n      switch(difficulty){\r\n        case \"hyper\":return \"8\";\r\n        case \"another\":return \"9\";\r\n        case \"leggendaria\":return \"11\";\r\n        default:\r\n        return difficulty;\r\n      }\r\n    };\r\n    try{\r\n      return await this.songs.where(\"[title+difficulty]\").equals([title,diffs()]).toArray();\r\n    }catch(e){\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async setItem(item:any):Promise<any>{\r\n    try{\r\n      return await this.songs.put({\r\n        title:item[\"title\"],\r\n        difficulty:item[\"difficulty\"],\r\n        wr:Number(item[\"wr\"]),\r\n        avg:Number(item[\"avg\"]),\r\n        notes:Number(item[\"notes\"]),\r\n        bpm:item[\"bpm\"],\r\n        textage:item[\"textage\"],\r\n        difficultyLevel:item[\"difficultyLevel\"],\r\n        dpLevel:item[\"dpLevel\"],\r\n        isFavorited:item[\"isFavorited\"] || false,\r\n        isCreated: item[\"isCreated\"] || false,\r\n        updatedAt: item[\"updatedAt\"] || timeFormatter(0),\r\n      })\r\n    }catch(e){\r\n      console.error(e);\r\n      return 1;\r\n    }\r\n  }\r\n\r\n  async updateItem(item:any):Promise<any>{\r\n    try{\r\n      return await this.songs.where({\r\n        \"title\":item[\"title\"],\"difficulty\":item[\"difficulty\"]\r\n      }).modify({\r\n        wr:Number(item[\"wr\"]),\r\n        avg:Number(item[\"avg\"]),\r\n        updatedAt: timeFormatter(0),\r\n      })\r\n    }catch(e){\r\n      console.error(e);\r\n      return 1;\r\n    }\r\n  }\r\n\r\n  async toggleFavorite(title:string,difficulty:string,newState:boolean):Promise<any>{\r\n    try{\r\n      return await this.songs.where({title:title,difficulty:difficulty}).modify({\r\n        isFavorited:newState\r\n      });\r\n    }catch(e){\r\n      console.error(e);\r\n      return 1;\r\n    }\r\n  }\r\n\r\n  async removeItem(title:string):Promise<number>{\r\n    try{\r\n      return await this.songs.where({title:title}).delete();\r\n    }catch(e){\r\n      console.error(e);\r\n      return 1;\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default storageWrapper;\r\n","import {scoreData} from \"../../types/data\";\r\nimport { convertClearState,convertLeggendariaStates } from \"../songs/filter\";\r\n\r\nexport default class importCSV {\r\n\r\n  rawData:string = \"\";\r\n  result:scoreData[] = [];\r\n  resultHistory:any[] = [];\r\n\r\n  isSingle:number = 1;\r\n  currentStore:string = \"\";\r\n\r\n  constructor(raw:string,isSingle:number = 1,currentStore?:string){\r\n    this.rawData = raw;\r\n    this.isSingle = isSingle;\r\n    if(currentStore)this.currentStore = currentStore;\r\n  }\r\n\r\n  getResult():scoreData[]{\r\n    return this.result;\r\n  }\r\n\r\n  getResultHistory():any[]{\r\n    return this.resultHistory;\r\n  }\r\n\r\n  execute():Promise<number>{\r\n    const self = this;\r\n    let mode = 0;\r\n    return new Promise(function(resolve, reject) {\r\n      try{\r\n        const splittedByBreak:string[] = self.rawData.split(/\\r\\n|\\n/);\r\n        const lengthSum:number = splittedByBreak.length;\r\n        let result = [],resultHistory = [];\r\n        for(let i = 0; i < lengthSum; ++i){\r\n          let eachObjNum:number[] = [];\r\n          let t:string = \"\";\r\n          const p = splittedByBreak[i].split(/,/);\r\n          if(i===0 && p[5] === \"NORMAL \"){\r\n            //RootageCSV\r\n            mode = 1;\r\n          }\r\n          if(mode === 0){\r\n            //HYPER\r\n            if(Number(p[19]) > 10 && Number(p[20]) > 0){\r\n              t = \"hyper\";\r\n              eachObjNum = [0,1,20,21,22,23,24,25,40];\r\n            }\r\n            //ANOTHER\r\n            if(Number(p[26]) > 10 && Number(p[27]) > 0){\r\n              t = \"another\";\r\n              eachObjNum = [0,1,27,28,29,30,31,32,40];\r\n            }\r\n            //LEGGENDARIA\r\n            if(Number(p[33]) > 10 && Number(p[34]) > 0){\r\n              t = \"leggendaria\";\r\n              eachObjNum = [0,1,34,35,36,37,38,39,40];\r\n            }\r\n          }else{\r\n            //HYPER\r\n            if(Number(p[12]) > 10 && Number(p[13]) > 0){\r\n              t = \"hyper\";\r\n              eachObjNum = [0,1,13,14,15,16,17,18,26];\r\n            }\r\n            //ANOTHER\r\n            if(Number(p[19]) > 10 && Number(p[20]) > 0){\r\n              t = \"another\";\r\n              eachObjNum = [0,1,20,21,22,23,24,25,26];\r\n            }\r\n          }\r\n          if(!p[eachObjNum[1]]){\r\n            continue;\r\n          }\r\n\r\n          let {name,difficulty} = mode === 1 ? convertLeggendariaStates(p[eachObjNum[1]],t) : {name:p[eachObjNum[1]],difficulty:t};\r\n          const clearState:string|number = convertClearState(p[eachObjNum[6]],0);\r\n          if(typeof clearState !== \"number\"){throw new Error();}\r\n          if(mode === 1 && name === \"\") name = \"\";\r\n          if(mode === 1 && name === \"Rave*it!! Rave*it!! \") name = \"Rave*it!! Rave*it!!\";\r\n\r\n          result.push({\r\n            title:name,\r\n            version:p[eachObjNum[0]],\r\n            difficulty:difficulty,\r\n            currentBPI:0,\r\n            difficultyLevel:\"-\",\r\n            exScore:Number(p[eachObjNum[2]]),\r\n            Pgreat:Number(p[eachObjNum[3]]),\r\n            great:Number(p[eachObjNum[4]]),\r\n            missCount:Number(p[eachObjNum[5]]),\r\n            clearState:clearState,\r\n            lastPlayed:p[eachObjNum[8]],\r\n            lastScore:-1,\r\n            storedAt:self.currentStore,\r\n            isSingle:self.isSingle,\r\n            isImported:true,\r\n            updatedAt:p[eachObjNum[8]]\r\n          });\r\n          resultHistory.push({\r\n            title:name,\r\n            exScore:Number(p[eachObjNum[2]]),\r\n            difficulty:difficulty,\r\n            difficultyLevel:\"-\",\r\n            storedAt:self.currentStore,\r\n            isSingle:self.isSingle,\r\n            BPI:0,\r\n            updatedAt:p[eachObjNum[8]],\r\n          });\r\n        }\r\n        self.result = result;\r\n        self.resultHistory = resultHistory;\r\n        return resolve(result.length);\r\n      }catch(e){\r\n        console.log(e);\r\n        return reject(e);\r\n      }\r\n    });\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport Container from '@material-ui/core/Container';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport {scoresDB, scoreHistoryDB} from \"../../components/indexedDB\";\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport importCSV from \"../../components/csv/import\";\r\nimport bpiCalculator from \"../../components/bpi\";\r\nimport { _currentStore, _isSingle, _currentStoreWithFullName } from '../../components/settings';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Link from '@material-ui/core/Link';\r\n\r\nexport default class Index extends React.Component<{global:any},{raw:string,isSnackbarOpen:boolean,stateText:string,errors:string[],isSaving:boolean,currentState:string,progress:number}> {\r\n\r\n  constructor(props:{global:any}){\r\n    super(props);\r\n    this.state = {\r\n      raw: \"\",\r\n      isSnackbarOpen:false,\r\n      stateText:\"Data.Success\",\r\n      errors:[],\r\n      isSaving:false,\r\n      currentState:\"\",\r\n      progress:0,\r\n    }\r\n    this.execute = this.execute.bind(this);\r\n  }\r\n\r\n  async execute(){\r\n    try{\r\n      console.log(\"a\");\r\n      this.props.global.setMove(true);\r\n      this.setState({isSaving:true});\r\n      let errors = [];\r\n      const isSingle = _isSingle();\r\n      const currentStore = _currentStore();\r\n      console.log(isSingle);\r\n      const executor = new importCSV(this.state.raw,isSingle,currentStore);\r\n      const calc = new bpiCalculator(false,isSingle);\r\n      const exec = await executor.execute();\r\n      if(!exec){\r\n        throw new Error(\"CSV\");\r\n      }\r\n\r\n      const result = executor.getResult(),resultHistory = executor.getResultHistory();\r\n      const s = new scoresDB(isSingle,currentStore), h = new scoreHistoryDB();\r\n      const all = await s.getAll().then(t=>t.reduce((result:any, current:any) => {\r\n        result[current.title] = current;\r\n        return result;\r\n      }, {}));\r\n      const len = result.length;\r\n      for(let i = 0;i < len;++i){\r\n        const calcData = await calc.calc(result[i][\"title\"],result[i][\"difficulty\"],result[i][\"exScore\"])\r\n        if(calcData.error && calcData.reason){\r\n          errors.push(result[i][\"title\"] + \" - \" + calcData.reason);\r\n          continue;\r\n        }\r\n        if(all[result[i][\"title\"]] && (all[result[i][\"title\"]][\"exScore\"] >= result[i][\"exScore\"] && all[result[i][\"title\"]][\"clearState\"] === result[i][\"clearState\"])){\r\n          //this.setState({progress:i / len * 100,currentState:result[i][\"title\"] + \"\"});\r\n          continue;\r\n        }\r\n        //this.setState({progress:i / len * 100,currentState:result[i][\"title\"] + \"\"});\r\n        const body = Object.assign(\r\n          result[i],\r\n          {\r\n            difficultyLevel:calcData.difficultyLevel,\r\n            currentBPI : calcData.bpi,\r\n            isImported: true,\r\n            lastScore: all[result[i][\"title\"]] ? all[result[i][\"title\"]][\"exScore\"] : 0\r\n          }\r\n        );\r\n        all[result[i][\"title\"]] && all[result[i][\"isSingle\"]] === isSingle ? s.setItem(body) : s.putItem(body);\r\n        h.add(Object.assign(resultHistory[i],{difficultyLevel:calcData.difficultyLevel}),{currentBPI:calcData.bpi,exScore:resultHistory[i].exScore},true);\r\n      }\r\n      this.props.global.setMove(false);\r\n      return this.setState({isSaving:false,raw:\"\",isSnackbarOpen:true,stateText:\"Data.Success\",errors:errors});\r\n    }catch(e){\r\n      console.log(e);\r\n      this.props.global.setMove(false);\r\n      return this.setState({isSaving:false,isSnackbarOpen:true,stateText:\"Data.Failed\",errors:[e.message]});\r\n    }\r\n  }\r\n\r\n  onChangeText = (e: React.ChangeEvent<HTMLInputElement>)=> this.setState({raw:e.target.value});\r\n  handleClose = ()=> this.setState({isSnackbarOpen:false});\r\n\r\n  render(){\r\n    const {raw,isSnackbarOpen,stateText,errors,isSaving} = this.state;\r\n    return (\r\n      <Container className=\"commonLayout\" fixed>\r\n        <Snackbar\r\n          open={isSnackbarOpen}\r\n          onClose={this.handleClose}\r\n          ContentProps={{\r\n            'aria-describedby': 'message-id',\r\n          }}\r\n          message={<span id=\"message-id\"><FormattedMessage id={stateText}/></span>}\r\n        />\r\n        <Typography component=\"h5\" variant=\"h5\" color=\"textPrimary\" gutterBottom>\r\n          <FormattedMessage id=\"Data.add\"/>\r\n        </Typography>\r\n        <FormattedMessage id=\"Data.infoBulk\"/><br/>\r\n        <FormattedMessage id=\"Data.howToBulk1\"/>\r\n        <Link color=\"secondary\" href={\"https://p.eagate.573.jp/game/2dx/\"+_currentStore()+\"/djdata/score_download.html\"} target=\"_blank\" rel=\"noopener noreferrer\">\r\n          <FormattedMessage id=\"Data.CSVURL\"/>\r\n        </Link>\r\n        <FormattedMessage id=\"Data.howToBulk2\"/>\r\n        <TextField\r\n          onChange={this.onChangeText}\r\n          value={raw}\r\n          style={{width:\"100%\"}}\r\n          label=\"Paste here\"\r\n          margin=\"dense\"\r\n          variant=\"outlined\"\r\n          multiline\r\n          rowsMax=\"4\"/>\r\n        <div style={{position:\"relative\"}}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={this.execute}\r\n            disabled={isSaving}\r\n            style={{width:\"100%\",margin:\"5px 0\"}}>\r\n            <FormattedMessage id=\"Data.Execute\"/>\r\n            (->{_currentStoreWithFullName() }&nbsp;/&nbsp;\r\n            {_isSingle() === 1 ? \"SP\" : \"DP\"})\r\n          </Button>\r\n          {isSaving && <CircularProgress size={24} style={{color:\"#777\",position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12}} />}\r\n        </div>\r\n        {errors && errors.map(item=><span key={item}>{item}<br/></span>)}\r\n        <Divider variant=\"middle\" style={{margin:\"10px 0\"}}/>\r\n        <FormattedMessage id=\"Data.notPremium1\"/>\r\n        <Divider variant=\"middle\" style={{margin:\"10px 0\"}}/>\r\n        <Typography component=\"h5\" variant=\"h5\" color=\"textPrimary\" gutterBottom>\r\n          <FormattedMessage id=\"Data.edit\"/>\r\n        </Typography>\r\n        <FormattedMessage id=\"Data.howToEdit\"/>\r\n        <ol>\r\n          <li><FormattedMessage id=\"Data.howToEdit1\"/></li>\r\n          <li><FormattedMessage id=\"Data.howToEdit2\"/></li>\r\n          <li><FormattedMessage id=\"Data.howToEdit3\"/></li>\r\n        </ol>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nimport { scoreData, songData } from \"../../../types/data\";\r\nimport {BarChart, Bar, Cell, XAxis, YAxis, CartesianGrid, Tooltip, ReferenceLine, ResponsiveContainer, Label} from \"recharts\";\r\nimport { _chartColor } from \"../../../components/settings\";\r\n\r\ninterface P{\r\n  song:songData|null,\r\n  score:scoreData|null,\r\n  chartData:any[],\r\n  graphLastUpdated:number\r\n}\r\n\r\nclass BPIChart extends React.Component<P,{}> {\r\n\r\n  render(){\r\n    const chartColor = _chartColor();\r\n    const {chartData,song,score,graphLastUpdated} = this.props;\r\n    if(!song || !score){\r\n      return (null);\r\n    }\r\n    const max = song.notes ? song.notes * 2 : 0;\r\n    return (\r\n      <div style={{width:\"95%\",height:\"100%\",margin:\"5px auto\"}}>\r\n        <ResponsiveContainer width=\"100%\">\r\n          <BarChart data={chartData} key={graphLastUpdated}>\r\n            <CartesianGrid strokeDasharray=\"3 3\" />\r\n            <XAxis stroke={chartColor} dataKey=\"name\" />\r\n            <YAxis stroke={chartColor} domain={[0,max]} ticks={[Math.ceil(max * (6/9)),Math.ceil(max * (7/9)),Math.ceil(max * (8/9)),max]} width={40}>\r\n            </YAxis>\r\n            <Tooltip contentStyle={{color:\"#333\"}} />\r\n            <Bar dataKey=\"EX SCORE\" isAnimationActive={false}>\r\n              {\r\n                chartData.map((item) => {\r\n                  const color = item.name === \"YOU\" ? \"#e75d00\" : \"#8884d8\";\r\n                  return <Cell key={item.name} fill={color} />;\r\n                })\r\n              }\r\n            </Bar>\r\n            <ReferenceLine y={max * (8/9)} label={<Label position=\"insideTopRight\" style={{fill: chartColor}}>AAA</Label>} stroke={chartColor} isFront={true} />\r\n            <ReferenceLine y={max * (7/9)} label={<Label position=\"insideTopRight\" style={{fill: chartColor}}>AA</Label>} stroke={chartColor} isFront />\r\n            <ReferenceLine y={max * (2/3)} label={<Label position=\"insideTopRight\" style={{fill: chartColor}}>A</Label>} stroke={chartColor} isFront />\r\n          </BarChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BPIChart;\r\n","import React from \"react\";\r\n\r\nimport { scoreData, songData } from \"../../../types/data\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport { convertClearState } from \"../../../components/songs/filter\";\r\n\r\ninterface P{\r\n  song:songData|null,\r\n  score:scoreData|null,\r\n}\r\n\r\nclass SongDetails extends React.Component<P,{}> {\r\n\r\n  render(){\r\n    const {song,score} = this.props;\r\n    if(!song || !score){\r\n      return (null);\r\n    }\r\n    const max = song.notes * 2;\r\n    return (\r\n      <div>\r\n        <Paper>\r\n          <Table aria-label=\"Song Details\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell style={{minWidth:\"130px\",maxWidth:\"130px\"}}><FormattedMessage id=\"SongDetail.SongDetailHead\"/></TableCell>\r\n                <TableCell>&nbsp;</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              <TableRow>\r\n                <TableCell><FormattedMessage id=\"SongDetail.Notes\"/></TableCell>\r\n                <TableCell>{song.notes}</TableCell>\r\n              </TableRow>\r\n              <TableRow>\r\n                <TableCell><FormattedMessage id=\"SongDetail.WorldRecord\"/></TableCell>\r\n                <TableCell>{song.wr}({Math.floor(song.wr / max * 10000) / 100}%)</TableCell>\r\n              </TableRow>\r\n              <TableRow>\r\n                <TableCell><FormattedMessage id=\"SongDetail.Average\"/></TableCell>\r\n                <TableCell>{song.avg}({Math.floor(song.avg / max * 10000)  / 100}%)</TableCell>\r\n              </TableRow>\r\n              { !Number.isNaN(score.exScore) &&\r\n                <TableRow>\r\n                  <TableCell><FormattedMessage id=\"SongDetail.You\"/></TableCell>\r\n                  <TableCell>{score.exScore}({Math.floor(score.exScore / max * 10000) / 100}%)</TableCell>\r\n                </TableRow>\r\n              }\r\n              <TableRow>\r\n                <TableCell>BPM</TableCell>\r\n                <TableCell>{song.bpm}</TableCell>\r\n              </TableRow>\r\n              { score.version &&\r\n                <TableRow>\r\n                  <TableCell><FormattedMessage id=\"SongDetail.Version\"/></TableCell>\r\n                  <TableCell>{score.version}</TableCell>\r\n                </TableRow>\r\n              }\r\n            </TableBody>\r\n          </Table>\r\n        </Paper>\r\n        { (score.missCount || score.lastPlayed) &&\r\n        <Paper>\r\n          <Table aria-label=\"Score Details\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell style={{minWidth:\"130px\",maxWidth:\"130px\"}}><FormattedMessage id=\"SongDetail.ScoreDetailHead\"/></TableCell>\r\n                <TableCell></TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              { score.lastPlayed &&\r\n                <TableRow>\r\n                  <TableCell><FormattedMessage id=\"SongDetail.ClearState\"/></TableCell>\r\n                  <TableCell>{convertClearState(score.clearState,1)}</TableCell>\r\n                </TableRow>\r\n              }\r\n              { score.missCount &&\r\n                <TableRow>\r\n                  <TableCell><FormattedMessage id=\"SongDetail.MissCount\"/></TableCell>\r\n                  <TableCell>{score.missCount}</TableCell>\r\n                </TableRow>\r\n              }\r\n              { score.lastPlayed &&\r\n                <TableRow>\r\n                  <TableCell><FormattedMessage id=\"SongDetail.LastPlayed\"/></TableCell>\r\n                  <TableCell>{score.lastPlayed}</TableCell>\r\n                </TableRow>\r\n              }\r\n              { (score.Pgreat && score.great) &&\r\n                <TableRow>\r\n                  <TableCell><FormattedMessage id=\"SongDetail.ScoreDetails\"/></TableCell>\r\n                  <TableCell>PG:{score.Pgreat} G:{score.great}</TableCell>\r\n                </TableRow>\r\n              }\r\n            </TableBody>\r\n          </Table>\r\n        </Paper>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SongDetails;\r\n","import React from \"react\";\r\n\r\nimport { scoreData, songData } from \"../../../types/data\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport {scoreHistoryDB} from \"../../../components/indexedDB\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\n\r\ninterface P{\r\n  song:songData|null,\r\n  score:scoreData|null,\r\n}\r\n\r\ninterface S{\r\n  isLoading:boolean,\r\n  current:number,\r\n  dataset:any[],\r\n}\r\n\r\nclass SongDiffs extends React.Component<P,S> {\r\n\r\n  constructor(props:P){\r\n    super(props);\r\n    this.state = {\r\n      isLoading:true,\r\n      current:0,\r\n      dataset:[],\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.updateScoreData();\r\n  }\r\n\r\n  handleChange = (event: React.ChangeEvent<{ value: unknown }>)=> {\r\n    if(typeof event.target.value !== \"number\"){return;}\r\n    this.setState({current:event.target.value,isLoading:true});\r\n    this.updateScoreData(event.target.value);\r\n  }\r\n\r\n  async updateScoreData(newState:number = 0){\r\n    const {song} = this.props;\r\n    if(!song){return};\r\n    const s = new scoreHistoryDB();\r\n    if(newState === 0){\r\n      return this.setState({\r\n        dataset:await s.getWithinVersion(song),\r\n        isLoading:false,\r\n      })\r\n    }else{\r\n      return this.setState({\r\n        dataset:await s.getAcrossVersion(song),\r\n        isLoading:false,\r\n      })\r\n    }\r\n  }\r\n\r\n  render(){\r\n    const {current,isLoading,dataset} = this.state;\r\n    const {song,score} = this.props;\r\n    if(!song || !score){\r\n      return (null);\r\n    }\r\n    return (\r\n      <div>\r\n        <Container>\r\n          <FormControl style={{width:\"100%\"}}>\r\n          <InputLabel shrink>\r\n              <FormattedMessage id=\"SongDiffs.Target\"/>\r\n            </InputLabel>\r\n            <Select\r\n              value={current}\r\n              onChange={this.handleChange}\r\n              displayEmpty>\r\n                <MenuItem value={0}><FormattedMessage id=\"SongDiffs.WithinSameVersion\"/></MenuItem>\r\n                <MenuItem value={1}><FormattedMessage id=\"SongDiffs.EachVersion\"/></MenuItem>\r\n              </Select>\r\n          </FormControl>\r\n          {\r\n            isLoading && <div style={{display:\"flex\",justifyContent:\"center\",marginTop:\"30px\"}}><CircularProgress/></div>\r\n          }\r\n          {\r\n            !isLoading && <DiffsTable scoreTable={dataset} type={current}/>\r\n          }\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SongDiffs;\r\n\r\n\r\nclass DiffsTable extends React.Component<{scoreTable:any[],type:number},{}>{\r\n\r\n  render(){\r\n\r\n    const columns = [\r\n      this.props.type === 0 ? { id: \"updatedAt\", label: \"Date\"} : { id: \"storedAt\", label: \"Version\"},\r\n      { id: \"exScore\", label: \"EX\" },\r\n      { id: \"BPI\", label: \"BPI\" },\r\n    ];\r\n\r\n    return (\r\n      <Table>\r\n        <TableHead>\r\n          <TableRow>\r\n            {columns.map((column,i) => (\r\n              <TableCell\r\n                key={column.id}\r\n                style={i===0 ? {minWidth:\"150px\"} : undefined}\r\n              >\r\n                {column.label}\r\n              </TableCell>\r\n            ))}\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {this.props.scoreTable.map((row:any,i:number) => {\r\n            return (\r\n              <TableRow\r\n                hover role=\"checkbox\" tabIndex={-1} key={row.title + row.difficulty + i} className={ i % 2 ? \"isOdd\" : \"isEven\"}>\r\n                {columns.map((column,j) => {\r\n                  return (\r\n                    <TableCell key={column.id}>\r\n                      {row[column.id]}\r\n                    </TableCell>\r\n                  );\r\n                })}\r\n              </TableRow>\r\n            );\r\n          })}\r\n        </TableBody>\r\n      </Table>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nexport default class TabPanel extends React.Component<{value:number,index:number},{}>{\r\n\r\n  render(){\r\n    if(this.props.value !== this.props.index){\r\n      return (null);\r\n    }\r\n    return this.props.children\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\n\r\nimport { scoreData, songData } from \"../../../types/data\";\r\nimport { _prefixFromNum, getSongSuffixForIIDXInfo } from \"../../../components/songs/filter\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { FormattedMessage, injectIntl } from \"react-intl\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport bpiCalcuator, { B } from \"../../../components/bpi\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport StarIcon from '@material-ui/icons/Star';\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport {songsDB,scoresDB,scoreHistoryDB} from \"../../../components/indexedDB\";\r\nimport ShowSnackBar from \"../snackBar\";\r\nimport {Tooltip as TooltipMUI, Button, CircularProgress} from '@material-ui/core';\r\nimport BPIChart from \"./bpiChart\";\r\nimport SongDetails from \"./songDetails\";\r\nimport SongDiffs from \"./songDiffs\";\r\nimport { withRouter,RouteComponentProps } from \"react-router-dom\";\r\nimport { UnregisterCallback } from \"history\";\r\nimport TabPanel from \"./common/tabPanel\";\r\nimport { _currentTheme } from \"../../../components/settings\";\r\n\r\ninterface P{\r\n  isOpen:boolean,\r\n  song:songData|null,\r\n  score:scoreData|null,\r\n  handleOpen:(flag:boolean,row?:any,willDeleteItems?:any)=>void,\r\n  willDelete?:boolean\r\n}\r\n\r\ninterface S{\r\n  isError:boolean,\r\n  newScore:number,\r\n  newBPI:number,\r\n  showCharts:boolean,\r\n  chartData:any[],\r\n  currentTab:number,\r\n  anchorEl:null | HTMLElement,\r\n  favorited:boolean,\r\n  successSnack:boolean,\r\n  errorSnack:boolean,\r\n  errorSnackMessage:string,\r\n  graphLastUpdated:number,\r\n  isSaving:boolean,\r\n}\r\n\r\nclass DetailedSongInformation extends React.Component<P & {intl?:any} & RouteComponentProps,S> {\r\n\r\n  private calc:bpiCalcuator = new bpiCalcuator();\r\n  private unlisten:UnregisterCallback|null = null;\r\n\r\n  constructor(props:P & {intl?:any} & RouteComponentProps){\r\n    super(props);\r\n    this.state = {\r\n      isError:false,\r\n      newScore: NaN,\r\n      newBPI:NaN,\r\n      showCharts : true,\r\n      chartData:this.makeGraph().reverse(),\r\n      favorited:props.song ? props.song.isFavorited : false,\r\n      currentTab:0,\r\n      anchorEl:null,\r\n      successSnack:false,\r\n      errorSnack:false,\r\n      errorSnackMessage:\"\",\r\n      graphLastUpdated:new Date().getTime(),\r\n      isSaving:false,\r\n    }\r\n    this.unlisten = this.props.history.listen((_newLocation, action) => {\r\n      if (action === \"POP\") {\r\n        this.props.history.go(1);\r\n        this.props.handleOpen(false);\r\n      }\r\n    });\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    if(this.unlisten){\r\n      this.unlisten();\r\n    }\r\n  }\r\n\r\n  makeGraph = (newScore?:number):any[]=>{\r\n    let data:any[] = [],lastExScore = 0;\r\n    const {song,score} = this.props;\r\n    const dataInserter = (exScore:number,label:string):number=>{\r\n      return data.push({\r\n        \"name\" : label,\r\n        \"EX SCORE\" : exScore\r\n      });\r\n    }\r\n    if(!song || !score){ return []; }\r\n    this.calc.setData(song.notes * 2, song.avg, song.wr);\r\n    const bpiBasis = [0,10,20,30,40,50,60,70,80,90,100];\r\n    const mybest = newScore ? newScore : score.exScore;\r\n    for(let i = 0;i < bpiBasis.length; ++i){\r\n      const exScoreFromBPI:number = this.calc.calcFromBPI(bpiBasis[i],true);\r\n      if(lastExScore < mybest && mybest <= exScoreFromBPI){\r\n        dataInserter(mybest,\"YOU\");\r\n        lastExScore = mybest;\r\n      }\r\n      lastExScore = exScoreFromBPI;\r\n      dataInserter(exScoreFromBPI,String(bpiBasis[i]));\r\n    }\r\n    if(lastExScore < mybest){\r\n      dataInserter(mybest,\"YOU\");\r\n    }\r\n    return data;\r\n  }\r\n\r\n  handleScoreInput = async(e:React.FocusEvent<HTMLInputElement>):Promise<void>=>{\r\n    const {song} = this.props;\r\n    if(this.state.isSaving){\r\n      return this.setState({errorSnack:true,errorSnackMessage:\"\"});\r\n    }\r\n    if(!song){\r\n      return this.setState({errorSnack:true,errorSnackMessage:\"\"});\r\n    }\r\n    const newScore:number = Number(e.target.value);\r\n    const newBPI:B = await this.calc.calc(song.title,song.difficulty,newScore);\r\n    if(newBPI.error){\r\n      return this.setState({errorSnack:true,errorSnackMessage:newBPI.reason});\r\n    }\r\n    return this.setState({\r\n      newScore:newScore,\r\n      newBPI:Math.floor(newBPI.bpi * 100) / 100,\r\n      chartData:this.makeGraph(newScore).reverse(),\r\n      graphLastUpdated:new Date().getTime()\r\n    })\r\n  }\r\n\r\n  handleTabChange = (_e:React.ChangeEvent<{}>, newValue:number)=> this.setState({currentTab:newValue});\r\n\r\n  toggleMenu = (e?: React.MouseEvent<HTMLButtonElement>)=> this.setState({anchorEl: e ? e.currentTarget : null });\r\n\r\n  jumpWeb = (type:number):void =>{\r\n    if(!this.props.song){return;}\r\n    switch(type){\r\n      case 0:\r\n        window.open(\"http://textage.cc/score/\" + this.props.song.textage);\r\n      break;\r\n      case 1:\r\n        window.open(\"https://www.youtube.com/results?search_query=\" + this.props.song.title + \"+IIDX\");\r\n      break;\r\n      case 2:\r\n        if(this.props.song.difficultyLevel !== \"12\"){\r\n          const {formatMessage} = this.props.intl;\r\n          this.setState({errorSnack:true,errorSnackMessage:formatMessage({id:\"Details.ErrorIIDXInfo\"})});\r\n        }else{\r\n          window.open(\r\n            `https://iidx.info/songinfo/?title=${this.props.song.title}${getSongSuffixForIIDXInfo(this.props.song.title,this.props.song.difficulty)}`\r\n          );\r\n        }\r\n      break;\r\n      case 3:\r\n        window.open(\"https://twitter.com/intent/tweet?&text=\");\r\n      break;\r\n    }\r\n    return this.toggleMenu();\r\n  }\r\n\r\n  toggleFavorited = async():Promise<void>=>{\r\n    try{\r\n      const {favorited} = this.state;\r\n      const {song} = this.props;\r\n      const db = new songsDB();\r\n      if(!song){\r\n        throw new Error();\r\n      }\r\n      await db.toggleFavorite(song.title,song.difficulty,!favorited);\r\n      this.toggleSuccessSnack();\r\n      return this.setState({\r\n        favorited:!favorited\r\n      });\r\n    }catch(e){\r\n      console.log(e);\r\n      return;\r\n    }\r\n  }\r\n\r\n  toggleSuccessSnack = ()=>this.setState({successSnack:!this.state.successSnack})\r\n  toggleErrorSnack = ()=>this.setState({errorSnack:!this.state.errorSnack})\r\n\r\n  calcRank = ()=> this.props.score ? `${this.calc.rank(!Number.isNaN(this.state.newBPI) ? this.state.newBPI : this.props.score.currentBPI)}` : \"-\";\r\n\r\n  saveAndClose = async()=>{\r\n    try{\r\n      const {newBPI,newScore} = this.state;\r\n      const {score,song,willDelete} = this.props;\r\n      if(!song || !score){return;}\r\n      this.setState({isSaving:true});\r\n      const scores = new scoresDB(), scoreHist = new scoreHistoryDB();\r\n      await scores.updateScore(score,{currentBPI:newBPI,exScore:newScore});\r\n      await scoreHist.add(Object.assign(score,{difficultyLevel:song.difficultyLevel}),{currentBPI:newBPI,exScore:newScore});\r\n      this.props.handleOpen(true,null,willDelete ? {title:score.title,difficulty:score.difficulty} : null);\r\n    }catch(e){\r\n      return this.setState({errorSnack:true,errorSnackMessage:e});\r\n    }\r\n  }\r\n\r\n  showRank = (isBody:boolean):string=>{\r\n    const {song,score} = this.props;\r\n    const {newScore} = this.state;\r\n    if(!song || !score){return \"-\";}\r\n    const max:number = song.notes * 2;\r\n    const s:number = !Number.isNaN(newScore) ? newScore : score.exScore;\r\n    const percentage:number =  s  / max;\r\n    if(percentage < 2/9){\r\n      return !isBody ? \"E-\" : `${Math.ceil(max * 2/9 - s)}`;\r\n    }\r\n    if(percentage >= 2/9 && percentage < 1/3){\r\n      return !isBody ? \"D-\" : `${Math.ceil(max * 1/3 - s)}`;\r\n    }\r\n    if(percentage >= 1/3 && percentage < 4/9){\r\n      return !isBody ? \"C-\" : `${Math.ceil(max * 4/9 - s)}`;\r\n    }\r\n    if(percentage >= 4/9 && percentage < 5/9){\r\n      return !isBody ? \"B-\" : `${Math.ceil(max * 5/9 - s)}`;\r\n    }\r\n    if(percentage >= 5/9 && percentage < 2/3){\r\n      return !isBody ? \"A-\" : `${Math.ceil(max * 2/3 - s)}`;\r\n    }\r\n    if(percentage >= 2/3 && percentage < 7/9){\r\n      return !isBody ? \"AA-\" : `${Math.ceil(max * 7/9 - s)}`;\r\n    }\r\n    if(percentage >= 7/9 && percentage < 8/9){\r\n      return !isBody ? \"AAA-\" : `${Math.ceil(max * 8/9 - s)}`;\r\n    }\r\n    if(percentage >= 8/9 && percentage < 17/18){\r\n      return !isBody ? \"AAA+\" : `${Math.floor(s - max * 8/9)}`;\r\n    }\r\n    if(percentage >= 17/18){\r\n      return !isBody ? \"MAX-\" : `${Math.ceil(max - s)}`;\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  render(){\r\n    const {formatMessage} = this.props.intl;\r\n    const {isOpen,handleOpen,song,score} = this.props;\r\n    const {isSaving,newScore,newBPI,showCharts,chartData,currentTab,anchorEl,favorited,successSnack,errorSnack,errorSnackMessage} = this.state;\r\n    if(!song || !score){\r\n      return (null);\r\n    }\r\n    const detectStarIconColor = favorited ? \"#ffd700\" : \"#c3c3c3\";\r\n    return (\r\n      <Dialog id=\"detailedScreen\" className={_currentTheme() === \"dark\" ? \"darkDetailedScreen\" : \"lightDetailedScreen\"} fullScreen open={isOpen} onClose={handleOpen} style={{overflowX:\"hidden\",width:\"100%\"}}>\r\n        <AppBar>\r\n          <Toolbar>\r\n            <IconButton edge=\"start\" color=\"inherit\" onClick={()=>handleOpen(false)} aria-label=\"close\">\r\n              <CloseIcon />\r\n            </IconButton>\r\n            <Typography variant=\"h6\" className=\"be-ellipsis\" style={{flexGrow:1}}>\r\n              {song.title + _prefixFromNum(song.difficulty)}\r\n            </Typography>\r\n            {(!Number.isNaN(newBPI) || !Number.isNaN(newScore)) &&\r\n              <div style={{position:\"relative\"}}>\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={this.saveAndClose} disabled={isSaving}>\r\n                  <FormattedMessage id=\"Details.SaveButton\"/>\r\n                </Button>\r\n                {isSaving && <CircularProgress size={24} style={{color:\"#ccc\",position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12}} />}\r\n              </div>\r\n            }\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Toolbar/>\r\n        <Paper>\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={4} style={{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",margin:\"10px 0\"}}>\r\n              <Typography component=\"h6\" variant=\"h6\" color=\"textSecondary\">\r\n                BPI\r\n              </Typography>\r\n              <Typography component=\"h4\" variant=\"h4\" color=\"textPrimary\">\r\n                {(score && Number.isNaN(newBPI) && !Number.isNaN(score.currentBPI)) && score.currentBPI}\r\n                {!Number.isNaN(newBPI) && newBPI}\r\n                {(Number.isNaN(score.currentBPI) && Number.isNaN(newBPI)) && <span>-</span>}\r\n              </Typography>\r\n            </Grid>\r\n            <Grid item xs={4} style={{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",margin:\"10px 0\"}}>\r\n              <Typography component=\"h6\" variant=\"h6\" color=\"textSecondary\">\r\n                {score && <span>{this.showRank(false)}</span>}\r\n              </Typography>\r\n              <Typography component=\"h4\" variant=\"h4\" color=\"textPrimary\">\r\n                {score && <span>{this.showRank(true)}</span>}\r\n              </Typography>\r\n            </Grid>\r\n            <Grid item xs={4} style={{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",margin:\"10px 0\"}}>\r\n              <Typography component=\"h6\" variant=\"h6\" color=\"textSecondary\">\r\n                RANK\r\n              </Typography>\r\n              <Typography component=\"h4\" variant=\"h4\" color=\"textPrimary\">\r\n                {(!Number.isNaN(score.currentBPI) || !Number.isNaN(newBPI)) && <span>{this.calcRank()}</span>}\r\n                {(Number.isNaN(score.currentBPI) && Number.isNaN(newBPI)) && <span>-</span>}\r\n              </Typography>\r\n            </Grid>\r\n          </Grid>\r\n          <Divider/>\r\n          <Grid container>\r\n            <Grid item xs={8}>\r\n              <form noValidate autoComplete=\"off\" style={{margin:\"10px 6px 0\"}}>\r\n                <TextField\r\n                  type=\"number\"\r\n                  style={{width:\"100%\"}}\r\n                  label={<FormattedMessage id=\"Details.typeNewScore\"/>}\r\n                  value={!Number.isNaN(newScore) ? newScore : score ? score.exScore : 0}\r\n                  onChange={this.handleScoreInput}\r\n                />\r\n              </form>\r\n            </Grid>\r\n            <Grid item xs={1} style={{display:\"flex\",alignItems:\"center\",justifyContent:\"flex-end\"}}>\r\n              <div style={{margin:\"10px 6px 0\"}}>\r\n                <TooltipMUI title={<FormattedMessage id={favorited ? \"Details.FavButtonRemove\" : \"Details.FavButton\"}/>} aria-label=\"add\">\r\n                  <StarIcon style={{fontSize:\"35px\",color:detectStarIconColor,position:\"relative\",top:\"3px\"}}\r\n                    onClick={this.toggleFavorited}/>\r\n                </TooltipMUI>\r\n              </div>\r\n              <ShowSnackBar\r\n                message={\r\n                  favorited ? formatMessage({id:\"Details.FavButtonAdded\"}) : formatMessage({id:\"Details.FavButtonRemoved\"})}\r\n                variant=\"success\" handleClose={this.toggleSuccessSnack} open={successSnack} autoHideDuration={1000}/>\r\n            </Grid>\r\n            <Grid item xs={1} style={{display:\"flex\",alignItems:\"center\",justifyContent:\"flex-end\"}}>\r\n              <IconButton style={{margin:\"10px 6px 0\"}}\r\n                aria-haspopup=\"true\"\r\n                onClick={this.toggleMenu}>\r\n                  <MoreVertIcon />\r\n              </IconButton>\r\n              <Menu\r\n                anchorEl={anchorEl}\r\n                keepMounted\r\n                open={Boolean(anchorEl)}\r\n                onClose={()=>this.toggleMenu()}\r\n                >\r\n                  <MenuItem onClick={()=>this.jumpWeb(0)}>TexTage</MenuItem>\r\n                  <MenuItem onClick={()=>this.jumpWeb(1)}>YouTube</MenuItem>\r\n                  <MenuItem onClick={()=>this.jumpWeb(2)}>IIDX.info</MenuItem>\r\n                  <MenuItem onClick={()=>this.jumpWeb(3)}><FormattedMessage id=\"Common.Tweet\"/></MenuItem>\r\n                </Menu>\r\n            </Grid>\r\n          </Grid>\r\n        </Paper>\r\n        <Tabs\r\n          value={currentTab}\r\n          variant=\"fullWidth\"\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          onChange={this.handleTabChange}>\r\n          <Tab label={<FormattedMessage id=\"Details.Graph\"/>} />\r\n          <Tab label={<FormattedMessage id=\"Details.Details\"/>} />\r\n          <Tab label={<FormattedMessage id=\"Details.Diffs\"/>} />\r\n        </Tabs>\r\n        <TabPanel value={currentTab} index={0}>\r\n          {showCharts &&\r\n            <BPIChart song={song} score={score} chartData={chartData} graphLastUpdated={this.state.graphLastUpdated}/>\r\n          }\r\n        </TabPanel>\r\n        <TabPanel value={currentTab} index={1}>\r\n          <SongDetails song={song} score={score}/>\r\n        </TabPanel>\r\n        <TabPanel value={currentTab} index={2}>\r\n          <SongDiffs song={song} score={score}/>\r\n        </TabPanel>\r\n        <ShowSnackBar message={errorSnackMessage} variant=\"warning\"\r\n            handleClose={this.toggleErrorSnack} open={errorSnack} autoHideDuration={3000}/>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(injectIntl(DetailedSongInformation));\r\n","import { _prefix } from \"../../../../components/songs/filter\";\r\n\r\nexport const diffColor = (i:number,row: any):string=>{\r\n  if(i !== 0){return \"transparent\";}\r\n  switch (row.clearState){\r\n    case 0 : return \"#e0dede\";\r\n    case 1 : return \"#ea63ff\";\r\n    case 2 : return \"#acffab\";\r\n    case 3 : return \"#ff707a\";\r\n    case 4 : return \"#ff4545\";\r\n    case 5 : return \"#fff373\";\r\n    case 6 : return \"#ff793b\";\r\n    default: return \"rgba(255,255,255,.55)\";\r\n  }\r\n}\r\n\r\nexport const behindScore = (row:any,allSongsData:{[key:string]:any},mode:number)=>{\r\n  try{\r\n    const ghost = [1,2/3,7/9,8/9,1];\r\n    const max = allSongsData[row.title + _prefix(row.difficulty)][\"notes\"] * 2;\r\n    return Math.ceil(max * ghost[mode] - row.exScore)\r\n  }catch(e){\r\n    return;\r\n  }\r\n}\r\n\r\nexport const bp = (bp:number):string=>{\r\n  if(Number.isNaN(bp)){\r\n    return \"-\";\r\n  }\r\n  return String(bp);\r\n}\r\n","import React from \"react\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\n\r\nimport {scoreData, songData} from \"../../../../types/data\";\r\nimport { _prefix } from \"../../../../components/songs/filter\";\r\nimport DetailedSongInformation from \"../detailsScreen\";\r\nimport { diffColor, behindScore, bp } from \"../common\";\r\n\r\nconst columns = [\r\n  { id: \"difficultyLevel\", label: \"\"},\r\n  { id: \"title\", label: \"\" },\r\n  { id: \"currentBPI\", label: \"BPI\"},\r\n  {\r\n    id: \"exScore\",\r\n    label: \"EX\",\r\n  },\r\n];\r\n\r\ninterface P{\r\n  data:scoreData[],\r\n  sort:number,\r\n  isDesc:boolean,\r\n  changeSort:(newNum:number)=>void,\r\n  mode:number,\r\n  allSongsData:{[key:string]:any}\r\n  updateScoreData:()=>void,\r\n  page:number,\r\n  handleChangePage:(_e:React.MouseEvent<HTMLButtonElement, MouseEvent> | null, newPage:number)=>void\r\n}\r\n\r\ninterface S{\r\n  rowsPerPage:number,\r\n  isOpen:boolean,\r\n  currentSongData:songData | null,\r\n  currentScoreData:scoreData | null\r\n}\r\n\r\nexport default class SongsTable extends React.Component<Readonly<P>,S>{\r\n\r\n  constructor(props:Readonly<P>){\r\n    super(props);\r\n    this.state = {\r\n      rowsPerPage : 10,\r\n      isOpen:false,\r\n      currentSongData:null,\r\n      currentScoreData:null\r\n    }\r\n  }\r\n\r\n  handleOpen = (updateFlag:boolean,row?:any,_willDeleteItems?:any):void=> {\r\n    if(updateFlag){this.props.updateScoreData();}\r\n    return this.setState({\r\n      isOpen:!this.state.isOpen,\r\n      currentSongData:row ? this.props.allSongsData[row.title + _prefix(row.difficulty)] : null,\r\n      currentScoreData:row ? row : null\r\n    });\r\n  }\r\n\r\n  handleChangeRowsPerPage = (event:React.ChangeEvent<HTMLInputElement>):void => {\r\n    this.props.handleChangePage(null,0);\r\n    this.setState({rowsPerPage:+event.target.value});\r\n  }\r\n\r\n  render(){\r\n    const {rowsPerPage,isOpen,currentSongData,currentScoreData} = this.state;\r\n    const {page,data,changeSort,sort,isDesc,mode} = this.props;\r\n    return (\r\n      <Paper style={{width:\"100%\",overflowX:\"auto\"}}>\r\n        <div>\r\n          <Table>\r\n            <TableHead>\r\n              <TableRow>\r\n                {columns.map((column,i) => (\r\n                  <TableCell\r\n                    key={column.id}\r\n                    onClick={()=>changeSort(i)}\r\n                  >\r\n                    {(mode < 5 || i !== 2 ) && column.label}\r\n                    {(mode > 4 && i === 2) && \"BP\"}\r\n                    {i === sort &&\r\n                      <span>\r\n                        { isDesc && <span></span> }\r\n                        { !isDesc && <span></span> }\r\n                      </span>\r\n                    }\r\n                    {i !== sort && <span></span>}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {data.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row:any,i:number) => {\r\n                return (\r\n                  <TableRow\r\n                    onClick={()=>this.handleOpen(false,row)}\r\n                    hover role=\"checkbox\" tabIndex={-1} key={row.title} className={ i % 2 ? \"isOdd\" : \"isEven\"}>\r\n                    {columns.map((column,j) => {\r\n                      const prefix = row.difficulty === \"hyper\" ? \"(H)\" : row.difficulty === \"leggendaria\" ? \"()\" : \"\";\r\n                      return (\r\n                        <TableCell key={column.id + prefix} style={{backgroundColor : diffColor(j,row),position:\"relative\"}}>\r\n                          {(mode < 5 || column.id !== \"currentBPI\") && row[column.id]}\r\n\r\n                          {column.id === \"title\" && prefix}\r\n                          {(mode > 0 && mode < 5 && column.id === \"exScore\") &&\r\n                            <span>(-{behindScore(row,this.props.allSongsData,mode)})</span>\r\n                          }\r\n                          {(mode > 4 && column.id === \"currentBPI\") && bp(row.missCount)}\r\n                          {(j === 3 && mode === 0 && row.lastScore > -1) && <span className=\"plusOverlayScore\">\r\n                            {row.exScore - row.lastScore > 0 ? \"+\" + Number(row.exScore - row.lastScore) : row.exScore - row.lastScore}\r\n                            </span>\r\n                          }\r\n                        </TableCell>\r\n                      );\r\n                    })}\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </div>\r\n        <TablePagination\r\n          rowsPerPageOptions={[10, 25, 50, 100]}\r\n          component=\"div\"\r\n          count={this.props.data.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          labelRowsPerPage=\"\"\r\n          backIconButtonProps={{\r\n            \"aria-label\": \"previous page\",\r\n          }}\r\n          nextIconButtonProps={{\r\n            \"aria-label\": \"next page\",\r\n          }}\r\n          onChangePage={this.props.handleChangePage}\r\n          onChangeRowsPerPage={this.handleChangeRowsPerPage}\r\n        />\r\n        {isOpen &&\r\n          <DetailedSongInformation isOpen={isOpen} song={currentSongData} score={currentScoreData} handleOpen={this.handleOpen}/>\r\n        }\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport Container from '@material-ui/core/Container';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport {songsDB} from \"../../../../components/indexedDB\";\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport BackspaceIcon from '@material-ui/icons/Backspace';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport SongsTable from \"./tablePlayed\";\r\nimport Input from '@material-ui/core/Input';\r\n\r\nimport {scoreData} from \"../../../../types/data\";\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { _prefix, _prefixFromNum } from '../../../../components/songs/filter';\r\n\r\nimport equal from 'fast-deep-equal'\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { _isSingle } from '../../../../components/settings';\r\nimport moment from 'moment';\r\n\r\ninterface stateInt {\r\n  isLoading:boolean,\r\n  filterByName:string,\r\n  scoreData:scoreData[],\r\n  allSongsData:{[key:string]:any},\r\n  options:{[key:string]:string[]},\r\n  sort:number,\r\n  isDesc:boolean,\r\n  mode:number,\r\n  range:number,\r\n  page:number,\r\n}\r\n\r\ninterface P{\r\n  title:string,\r\n  full:scoreData[],\r\n  updateScoreData:()=>Promise<void>,\r\n}\r\n\r\nexport default class SongsList extends React.Component<P,stateInt> {\r\n\r\n  constructor(props:P){\r\n    super(props);\r\n    this.state = {\r\n      isLoading:true,\r\n      filterByName:\"\",\r\n      scoreData:[],\r\n      allSongsData:{},\r\n      mode:0,\r\n      sort:2,\r\n      isDesc:true,\r\n      options:{\r\n        level:[\"11\",\"12\"],\r\n        difficulty:[\"0\",\"1\",\"2\"],\r\n      },\r\n      range:0,\r\n      page:0,\r\n    }\r\n    this.updateScoreData = this.updateScoreData.bind(this);\r\n  }\r\n\r\n  handleChangePage = (_e:React.MouseEvent<HTMLButtonElement, MouseEvent> | null, newPage:number):void => this.setState({page:newPage});\r\n\r\n  async componentDidMount(){\r\n    let allSongs:{[key:string]:string|number} = {};\r\n    const allSongsRawData = await new songsDB().getAll(_isSingle());\r\n    for(let i =0; i < allSongsRawData.length; ++i){\r\n      const prefix:string = _prefixFromNum(allSongsRawData[i][\"difficulty\"]);\r\n      allSongs[allSongsRawData[i][\"title\"] + prefix] = allSongsRawData[i];\r\n    }\r\n    this.setState({\r\n      scoreData:this.props.full,\r\n      allSongsData:allSongs,\r\n      isLoading:false,\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps:P){\r\n    if(!equal(prevProps.full,this.props.full)){\r\n      return this.setState({scoreData:this.songFilter()});\r\n    }\r\n  }\r\n\r\n  updateScoreData():Promise<void>{\r\n    return this.props.updateScoreData();\r\n  }\r\n\r\n  handleLevelChange = (name:string) => (e:React.ChangeEvent<HTMLInputElement>) =>{\r\n    this.handleExec(name,e.target.checked,\"level\");\r\n  }\r\n\r\n  handleDiffChange = (name:string) => (e:React.ChangeEvent<HTMLInputElement>) =>{\r\n    this.handleExec(name,e.target.checked,\"difficulty\");\r\n  }\r\n\r\n  handleExec = (name:string,checked:boolean,target:string)=>{\r\n    let newState = this.state;\r\n    if(checked){\r\n      newState[\"options\"][target].push(name);\r\n    }else{\r\n      newState[\"options\"][target] = newState[\"options\"][target].filter((t:string)=> t !== name);\r\n    }\r\n    return this.setState({scoreData:this.songFilter(newState),options:newState[\"options\"],page:0});\r\n  }\r\n\r\n  handleInputChange = (e:React.ChangeEvent<HTMLInputElement|HTMLTextAreaElement>|null)=>{\r\n    let newState = this.cloneState();\r\n    newState.filterByName = e ? e.target.value : \"\";\r\n    return this.setState({scoreData:this.songFilter(newState),filterByName:newState.filterByName,page:0});\r\n  }\r\n\r\n  songFilter = (newState:{[s:string]:any} = this.state) =>{\r\n    const diffs:string[] = [\"hyper\",\"another\",\"leggendaria\"];\r\n    const m = newState.mode;\r\n    const r = newState.range;\r\n    const f = this.state.allSongsData;\r\n\r\n    const evaluateRange = (data:scoreData):boolean=>{\r\n      const format = (t:string|Date)=>moment(t).format(\"YYYYMMDD\");\r\n      return r === 0 ? true :\r\n      r === 1 ? format(data.updatedAt) === format(new Date()) :\r\n      moment(data.updatedAt).week() === moment(new Date()).week()\r\n    }\r\n\r\n    const evaluateMode = (data:scoreData,max:number):boolean=>{\r\n      return m === 0 ? true :\r\n      m === 1 ? data.exScore / max < 2 / 3 :\r\n      m === 2 ? data.exScore / max < 7 / 9 && 2/3 < data.exScore / max :\r\n      m === 3 ? data.exScore / max < 8 / 9 && 7/9 < data.exScore / max :\r\n      m === 4 ? true :\r\n      m === 5 ? data.clearState <= 3 :\r\n      m === 6 ? data.clearState <= 4 :\r\n      m === 7 ? data.clearState <= 5 : true\r\n    }\r\n    \r\n    if(Object.keys(this.state.allSongsData).length === 0){return [];}\r\n    return this.props.full.filter((data)=>{\r\n      if(!f[data.title + _prefix(data[\"difficulty\"])]){return false;}\r\n      const max = f[data.title + _prefix(data[\"difficulty\"])][\"notes\"] * 2;\r\n      return (\r\n        evaluateRange(data) &&\r\n        evaluateMode(data,max) &&\r\n        newState[\"options\"][\"level\"].some((item:string)=>{\r\n          return item === data.difficultyLevel }) &&\r\n        newState[\"options\"][\"difficulty\"].some((item:number)=>{\r\n          return diffs[Number(item)] === data.difficulty} ) &&\r\n        data.title.toLowerCase().indexOf(newState[\"filterByName\"].toLowerCase()) > -1\r\n      )\r\n    })\r\n  }\r\n\r\n  changeSort = (newNum:number):void=>{\r\n    const {sort,isDesc} = this.state;\r\n    if(sort === newNum){\r\n      return this.setState({isDesc:!isDesc});\r\n    }\r\n    return this.setState({sort:newNum,isDesc:true})\r\n  }\r\n\r\n  sortedData = ():scoreData[]=>{\r\n    const {scoreData,sort,isDesc,mode,allSongsData} = this.state;\r\n    const res = scoreData.sort((a,b)=> {\r\n      switch(sort){\r\n        case 0:\r\n        return Number(b.difficultyLevel) - Number(a.difficultyLevel);\r\n        case 1:\r\n        return b.title.localeCompare(a.title, \"ja\", {numeric:true});\r\n        default:\r\n        case 2:\r\n        if(mode > 4){\r\n          if(!a.missCount || !b.missCount){\r\n            return -1;\r\n          }\r\n          return  a.missCount-b.missCount || (a.missCount||Infinity)-(b.missCount||Infinity) || 0\r\n        }\r\n        return b.currentBPI - a.currentBPI;\r\n        case 3:\r\n        if(mode > 0 && mode < 5){\r\n          const aMax = allSongsData[a.title + _prefix(a.difficulty)][\"notes\"] * 2;\r\n          const bMax = allSongsData[b.title + _prefix(b.difficulty)][\"notes\"] * 2;\r\n          return b.exScore / bMax - a.exScore / aMax;\r\n        }\r\n        return b.exScore - a.exScore;\r\n      }\r\n    });\r\n    return isDesc ? res : res.reverse();\r\n  }\r\n\r\n  handleModeChange = (event:React.ChangeEvent<{name?:string|undefined; value:unknown;}>):void =>{\r\n    if (typeof event.target.value !== \"number\") { return; }\r\n    let newState = this.cloneState();\r\n    newState.mode = event.target.value;\r\n    return this.setState({scoreData:this.songFilter(newState),mode:event.target.value});\r\n  }\r\n\r\n  handleRangeCange = (event:React.ChangeEvent<{name?:string|undefined; value:unknown;}>):void =>{\r\n    if (typeof event.target.value !== \"number\") { return; }\r\n    let newState = this.cloneState();\r\n    newState.range = event.target.value;\r\n    return this.setState({scoreData:this.songFilter(newState),range:event.target.value});\r\n  }\r\n\r\n  // readonly\r\n  // (state)\r\n  // \r\n  cloneState = () => JSON.parse(JSON.stringify(this.state))\r\n\r\n  render(){\r\n    const {isLoading,filterByName,options,sort,isDesc,mode,range,page} = this.state;\r\n    if(isLoading){\r\n      return (\r\n        <Container className=\"loaderCentered\">\r\n          <CircularProgress />\r\n        </Container>);\r\n    }\r\n    return (\r\n      <Container className=\"commonLayout\" fixed id=\"songsVil\">\r\n        <Typography component=\"h5\" variant=\"h5\" color=\"textPrimary\" gutterBottom\r\n          style={{display:\"flex\",justifyContent:\"space-between\"}}>\r\n          <FormattedMessage id={this.props.title}/>\r\n          <FormControl>\r\n            <Select value={range} displayEmpty onChange={this.handleRangeCange}>\r\n              <MenuItem value={0}></MenuItem>\r\n              <MenuItem value={1}></MenuItem>\r\n              <MenuItem value={2}></MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </Typography>\r\n        <Grid container spacing={1} style={{margin:\"5px 0\"}}>\r\n          <Grid item xs={6}>\r\n            <FormControl style={{width:\"100%\"}}>\r\n              <InputLabel><FormattedMessage id=\"Songs.mode\"/></InputLabel>\r\n              <Select value={mode} onChange={this.handleModeChange}>\r\n                <MenuItem value={0}><FormattedMessage id=\"Songs.mode0\"/></MenuItem>\r\n                <MenuItem value={1}><FormattedMessage id=\"Songs.mode1\"/></MenuItem>\r\n                <MenuItem value={2}><FormattedMessage id=\"Songs.mode2\"/></MenuItem>\r\n                <MenuItem value={3}><FormattedMessage id=\"Songs.mode3\"/></MenuItem>\r\n                <MenuItem value={4}><FormattedMessage id=\"Songs.mode4\"/></MenuItem>\r\n                <MenuItem value={5}><FormattedMessage id=\"Songs.mode5\"/></MenuItem>\r\n                <MenuItem value={6}><FormattedMessage id=\"Songs.mode6\"/></MenuItem>\r\n                <MenuItem value={7}><FormattedMessage id=\"Songs.mode7\"/></MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            <FormControl component=\"fieldset\" style={{width:\"100%\"}}>\r\n            <InputLabel htmlFor=\"standard-adornment-password\"><FormattedMessage id=\"Songs.filterByName\"/></InputLabel>\r\n              <Input\r\n                style={{width:\"100%\"}}\r\n                placeholder={\"(ex.)255\"}\r\n                value={filterByName}\r\n                onChange={this.handleInputChange}\r\n                endAdornment={\r\n                  filterByName &&\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton onClick={()=>this.handleInputChange(null)}>\r\n                      <BackspaceIcon/>\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                }\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container spacing={1} id=\"mainFilters\" style={{margin:\"5px 0\"}}>\r\n          <Grid item xs={6}>\r\n            <FormControl component=\"fieldset\">\r\n              <FormLabel component=\"legend\"><FormattedMessage id=\"Songs.filterByLevel\"/></FormLabel>\r\n              <FormGroup row>\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={options.level.some(t=> t === \"11\")} onChange={this.handleLevelChange(\"11\")} value=\"11\" />}\r\n                  label=\"11\"\r\n                />\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={options.level.some(t=> t === \"12\")} onChange={this.handleLevelChange(\"12\")} value=\"12\" />}\r\n                  label=\"12\"\r\n                />\r\n              </FormGroup>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            <FormControl component=\"fieldset\">\r\n              <FormLabel component=\"legend\"><FormattedMessage id=\"Songs.filterByDifficulty\"/></FormLabel>\r\n              <FormGroup row>\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={options.difficulty.some(t=> t === \"0\")} onChange={this.handleDiffChange(\"0\")} value=\"hyper\" />}\r\n                  label=\"H\"\r\n                />\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={options.difficulty.some(t=> t === \"1\")} onChange={this.handleDiffChange(\"1\")} value=\"another\" />}\r\n                  label=\"A\"\r\n                />\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={options.difficulty.some(t=> t === \"2\")} onChange={this.handleDiffChange(\"2\")} value=\"leggendaria\" />}\r\n                  label=\"\"\r\n                />\r\n              </FormGroup>\r\n            </FormControl>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <SongsTable\r\n          page={page} handleChangePage={this.handleChangePage}\r\n          data={this.sortedData()} sort={sort} isDesc={isDesc} mode={mode}\r\n          changeSort={this.changeSort} allSongsData={this.state.allSongsData}\r\n          updateScoreData={this.updateScoreData}/>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport SongsList from '../components/songs/played/songsList';\r\nimport { scoresDB } from '../../components/indexedDB';\r\nimport { scoreData } from '../../types/data';\r\n\r\ninterface S {\r\n  full:scoreData[]\r\n}\r\n\r\nexport default class Songs extends React.Component<{},S> {\r\n\r\n  constructor(props:Object){\r\n    super(props);\r\n    this.state ={\r\n      full:[]\r\n    }\r\n    this.updateScoreData = this.updateScoreData.bind(this);\r\n  }\r\n\r\n  async componentDidMount(){\r\n    await this.updateScoreData();\r\n  }\r\n\r\n  async updateScoreData(){\r\n    const full:scoreData[] = await new scoresDB().getAll();\r\n    this.setState({full:full});\r\n  }\r\n\r\n  render(){\r\n    if(!this.state.full){\r\n      return (null);\r\n    }\r\n    return (\r\n      <div>\r\n        <SongsList title=\"Songs.title\" full={this.state.full} updateScoreData={this.updateScoreData}/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport SongsList from '../components/songs/played/songsList';\r\nimport { scoresDB, songsDB } from '../../components/indexedDB';\r\nimport { scoreData, songData } from '../../types/data';\r\nimport { difficultyDiscriminator } from '../../components/songs/filter';\r\nimport { _currentStore, _isSingle } from '../../components/settings';\r\n\r\ninterface S {\r\n  full:scoreData[]\r\n}\r\n\r\nexport default class Songs extends React.Component<{},S> {\r\n\r\n  constructor(props:Object){\r\n    super(props);\r\n    this.state ={\r\n      full:[]\r\n    }\r\n    this.updateScoreData = this.updateScoreData.bind(this);\r\n  }\r\n\r\n  async componentDidMount(){\r\n    await this.updateScoreData();\r\n  }\r\n\r\n  async updateScoreData(){\r\n    const db = new scoresDB();\r\n    const songs:songData[] = await new songsDB().getAllFavoritedItems();\r\n    let full:scoreData[] = [];\r\n    for(let i =0;i < songs.length;++i){\r\n      const song = songs[i];\r\n      const d = difficultyDiscriminator(song.difficulty);\r\n      const res = await db.getItem(song.title,d,_currentStore(),_isSingle());\r\n      if((_isSingle() && song[\"dpLevel\"] !== \"0\") || (!_isSingle() && song[\"dpLevel\"] === \"0\")){\r\n        continue;\r\n      }\r\n      if(res.length === 0){\r\n        full.push({\r\n          title:song.title,\r\n          clearState:7,\r\n          currentBPI:-15,\r\n          difficulty:d,\r\n          difficultyLevel:song.difficultyLevel,\r\n          exScore:0,\r\n          isSingle:_isSingle(),\r\n          storedAt:_currentStore(),\r\n          lastScore:-1,\r\n          updatedAt:\"-\",\r\n        });\r\n      }else{\r\n        full.push(res[0]);\r\n      }\r\n    }\r\n    this.setState({full:full});\r\n  }\r\n\r\n  render(){\r\n    if(!this.state.full){\r\n      return (null);\r\n    }\r\n    return (\r\n      <div>\r\n        <SongsList title=\"Favorites.Title\" full={this.state.full} updateScoreData={this.updateScoreData}/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\n\r\nimport {scoreData, songData} from \"../../../../types/data\";\r\nimport DetailedSongInformation from \"../detailsScreen\";\r\nimport { difficultyDiscriminator } from '../../../../components/songs/filter';\r\nimport { _isSingle,_currentStore } from '../../../../components/settings';\r\n\r\nconst columns = [\r\n  { id: \"difficultyLevel\", label: \"\"},\r\n  { id: \"title\", label: \"\" },\r\n];\r\n\r\ninterface P{\r\n  data:songData[],\r\n  sort:number,\r\n  isDesc:boolean,\r\n  changeSort:(newNum:number)=>void,\r\n  updateScoreData:(willDelete?:boolean,willDeleteItems?:{title:string,difficulty:string})=>void,\r\n  page:number,\r\n  handleChangePage:(_e:React.MouseEvent<HTMLButtonElement, MouseEvent> | null, newPage:number)=>void\r\n}\r\n\r\ninterface S{\r\n  rowsPerPage:number,\r\n  isOpen:boolean,\r\n  currentSongData:songData | null,\r\n  currentScoreData:scoreData | null\r\n}\r\n\r\nexport default class SongsTable extends React.Component<Readonly<P>,S>{\r\n\r\n  constructor(props:Readonly<P>){\r\n    super(props);\r\n    this.state = {\r\n      rowsPerPage : 10,\r\n      isOpen:false,\r\n      currentSongData:null,\r\n      currentScoreData:null\r\n    }\r\n  }\r\n\r\n  handleOpen = (updateFlag:boolean = false,row?:any,willDeleteItems?:{title:string,difficulty:string}):void=> {\r\n    if(updateFlag){this.props.updateScoreData(true, willDeleteItems);}\r\n    const t = row ? {\r\n      difficulty:difficultyDiscriminator(row.difficulty),\r\n      title:row.title,\r\n      currentBPI:NaN,\r\n      exScore:0,\r\n      difficultyLevel:row.difficultyLevel,\r\n      storedAt:_currentStore(),\r\n      isSingle:_isSingle(),\r\n      clearState:7,\r\n      lastScore:-1,\r\n      updatedAt:\"-\",\r\n    } : null;\r\n    return this.setState({\r\n      isOpen:!this.state.isOpen,\r\n      currentSongData:row ? row : null,\r\n      currentScoreData:t\r\n    });\r\n  }\r\n\r\n  handleChangeRowsPerPage = (event:React.ChangeEvent<HTMLInputElement>):void => {\r\n    this.props.handleChangePage(null,0);\r\n    this.setState({rowsPerPage:+event.target.value});\r\n  }\r\n\r\n  render(){\r\n    const {rowsPerPage,isOpen,currentSongData,currentScoreData} = this.state;\r\n    const {page,data,changeSort,sort,isDesc} = this.props;\r\n    return (\r\n      <Paper style={{width:\"100%\",overflowX:\"auto\"}}>\r\n        <div>\r\n          <Table>\r\n            <TableHead>\r\n              <TableRow>\r\n                {columns.map((column,i) => (\r\n                  <TableCell\r\n                    key={column.id}\r\n                    onClick={()=>changeSort(i)}\r\n                  >\r\n                    {column.label}\r\n                    {i === sort &&\r\n                      <span>\r\n                        { isDesc && <span></span> }\r\n                        { !isDesc && <span></span> }\r\n                      </span>\r\n                    }\r\n                    {i !== sort && <span></span>}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {data.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row:any,i:number) => {\r\n                return (\r\n                  <TableRow\r\n                    onClick={()=>this.handleOpen(false,row)}\r\n                    hover role=\"checkbox\" tabIndex={-1} key={row.title + row.difficulty} className={ i % 2 ? \"isOdd\" : \"isEven\"}>\r\n                    {columns.map((column,j) => {\r\n                      const d = difficultyDiscriminator(row.difficulty);\r\n                      const prefix = d === \"hyper\" ? \"(H)\" : d === \"leggendaria\" ? \"()\" : \"\";\r\n                      return (\r\n                        <TableCell key={column.id + prefix}>\r\n                          {row[column.id]}\r\n                          {column.id === \"title\" && prefix}\r\n                        </TableCell>\r\n                      );\r\n                    })}\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </div>\r\n        <TablePagination\r\n          rowsPerPageOptions={[10, 25, 50, 100]}\r\n          component=\"div\"\r\n          count={this.props.data.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          labelRowsPerPage=\"\"\r\n          backIconButtonProps={{\r\n            \"aria-label\": \"previous page\",\r\n          }}\r\n          nextIconButtonProps={{\r\n            \"aria-label\": \"next page\",\r\n          }}\r\n          onChangePage={this.props.handleChangePage}\r\n          onChangeRowsPerPage={this.handleChangeRowsPerPage}\r\n        />\r\n        {isOpen &&\r\n          <DetailedSongInformation isOpen={isOpen} song={currentSongData} score={currentScoreData} handleOpen={this.handleOpen} willDelete={true}/>\r\n        }\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport Container from '@material-ui/core/Container';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { FormattedMessage } from \"react-intl\";\r\n\r\nimport SongsTable from \"./tableNotPlayed\";\r\nimport BackspaceIcon from '@material-ui/icons/Backspace';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\n\r\nimport {songData} from \"../../../../types/data\";\r\nimport { difficultyDiscriminator } from '../../../../components/songs/filter';\r\nimport equal from 'fast-deep-equal'\r\n\r\ninterface stateInt {\r\n  filterByName:string,\r\n  songData:songData[],\r\n  options:{[key:string]:string[]},\r\n  sort:number,\r\n  isDesc:boolean,\r\n  page:number,\r\n}\r\n\r\ninterface P{\r\n  title:string,\r\n  full:songData[],\r\n  updateScoreData:(whenUpdated:boolean,willDeleteItem?:{title:string,difficulty:string})=>Promise<void>,\r\n}\r\n\r\nexport default class NotPlayList extends React.Component<P,stateInt> {\r\n  _mounted: boolean = false;\r\n\r\n  constructor(props:P){\r\n    super(props);\r\n    this.state = {\r\n      filterByName:\"\",\r\n      songData:[],\r\n      sort:1,\r\n      isDesc:false,\r\n      options:{\r\n        level:[\"11\",\"12\"],\r\n        difficulty:[\"0\",\"1\",\"2\"],\r\n      },\r\n      page:0,\r\n    }\r\n    this.updateScoreData = this.updateScoreData.bind(this);\r\n  }\r\n\r\n  componentDidMount(){\r\n    this._mounted = true;\r\n    this.setState({songData:this.songFilter()})\r\n  }\r\n\r\n  componentDidUpdate(prevProps:P){\r\n    if(!equal(prevProps.full,this.props.full)){\r\n      return this.setState({songData:this.songFilter()});\r\n    }\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    this._mounted = false;\r\n  }\r\n\r\n  handleChangePage = (_event:React.MouseEvent<HTMLButtonElement, MouseEvent> | null, newPage:number):void => this.setState({page:newPage});\r\n\r\n  updateScoreData(whenUpdated:boolean = false,willDeleteItem?:{title:string,difficulty:string}):Promise<void>{\r\n    if(!whenUpdated || !willDeleteItem){\r\n      return this.props.updateScoreData(false);\r\n    }\r\n    return this.props.updateScoreData(whenUpdated,willDeleteItem);\r\n  }\r\n\r\n  handleLevelChange = (name:string) => (e:React.ChangeEvent<HTMLInputElement>) =>{\r\n    this.handleExec(name,e.target.checked,\"level\");\r\n  }\r\n\r\n  handleDiffChange = (name:string) => (e:React.ChangeEvent<HTMLInputElement>) =>{\r\n    this.handleExec(name,e.target.checked,\"difficulty\");\r\n  }\r\n\r\n  handleExec = (name:string,checked:boolean,target:string)=>{\r\n    let newState = this.state;\r\n    if(checked){\r\n      newState[\"options\"][target].push(name);\r\n    }else{\r\n      newState[\"options\"][target] = newState[\"options\"][target].filter((t:string)=> t !== name);\r\n    }\r\n    return this.setState({songData:this.songFilter(newState),options:newState[\"options\"],page:0});\r\n  }\r\n\r\n  handleInputChange = (e:React.ChangeEvent<HTMLInputElement|HTMLTextAreaElement>|null)=>{\r\n    let newState = this.cloneState();\r\n    newState.filterByName = e ? e.target.value : \"\";\r\n\r\n    return this.setState({songData:this.songFilter(newState),filterByName:newState.filterByName,page:0});\r\n  }\r\n\r\n  songFilter = (newState:{[s:string]:any} = this.state) =>{\r\n    const diffs:string[] = [\"hyper\",\"another\",\"leggendaria\"];\r\n    return this.props.full.filter((data)=>{\r\n      return (\r\n        newState[\"options\"][\"level\"].some((item:string)=>{\r\n          return item === data.difficultyLevel }) &&\r\n        newState[\"options\"][\"difficulty\"].some((item:number)=>{\r\n          return diffs[Number(item)] === difficultyDiscriminator(data.difficulty)} ) &&\r\n        data.title.toLowerCase().indexOf(newState[\"filterByName\"].toLowerCase()) > -1\r\n      )\r\n    });\r\n  }\r\n\r\n  changeSort = (newNum:number):void=>{\r\n    const {sort,isDesc} = this.state;\r\n    if(sort === newNum){\r\n      return this.setState({isDesc:!isDesc});\r\n    }\r\n    return this.setState({sort:newNum,isDesc:true})\r\n  }\r\n\r\n  sortedData = ():songData[]=>{\r\n    const {songData,sort,isDesc} = this.state;\r\n    const res = songData.sort((a,b)=> {\r\n      switch(sort){\r\n        case 0:\r\n        return Number(b.difficultyLevel) - Number(a.difficultyLevel);\r\n        case 1:\r\n        default:\r\n        return b.title.localeCompare(a.title, \"ja\", {numeric:true});\r\n      }\r\n    });\r\n    return isDesc ? res : res.reverse();\r\n  }\r\n\r\n  // readonly\r\n  // (state)\r\n  // \r\n  cloneState = () => JSON.parse(JSON.stringify(this.state))\r\n\r\n  render(){\r\n    const {filterByName,options,sort,isDesc,page} = this.state;\r\n    return (\r\n      <Container className=\"commonLayout\" fixed id=\"songsVil\">\r\n        <Typography component=\"h5\" variant=\"h5\" color=\"textPrimary\" gutterBottom\r\n          style={{display:\"flex\",justifyContent:\"space-between\"}}>\r\n          <FormattedMessage id={this.props.title}/>\r\n        </Typography>\r\n        <Grid container spacing={1} style={{margin:\"5px 0\"}}>\r\n          <Grid item xs={12}>\r\n            <FormControl component=\"fieldset\" style={{width:\"100%\"}}>\r\n            <InputLabel htmlFor=\"standard-adornment-password\"><FormattedMessage id=\"Songs.filterByName\"/></InputLabel>\r\n              <Input\r\n                style={{width:\"100%\"}}\r\n                placeholder={\"(ex.)255\"}\r\n                value={filterByName}\r\n                onChange={this.handleInputChange}\r\n                endAdornment={\r\n                  filterByName &&\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton onClick={()=>this.handleInputChange(null)}>\r\n                      <BackspaceIcon/>\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                }\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container spacing={1} id=\"mainFilters\" style={{margin:\"5px 0\"}}>\r\n          <Grid item xs={6}>\r\n            <FormControl component=\"fieldset\">\r\n              <FormLabel component=\"legend\"><FormattedMessage id=\"Songs.filterByLevel\"/></FormLabel>\r\n              <FormGroup row>\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={options.level.some(t=> t === \"11\")} onChange={this.handleLevelChange(\"11\")} value=\"11\" />}\r\n                  label=\"11\"\r\n                />\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={options.level.some(t=> t === \"12\")} onChange={this.handleLevelChange(\"12\")} value=\"12\" />}\r\n                  label=\"12\"\r\n                />\r\n              </FormGroup>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            <FormControl component=\"fieldset\">\r\n              <FormLabel component=\"legend\"><FormattedMessage id=\"Songs.filterByDifficulty\"/></FormLabel>\r\n              <FormGroup row>\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={options.difficulty.some(t=> t === \"0\")} onChange={this.handleDiffChange(\"0\")} value=\"hyper\" />}\r\n                  label=\"H\"\r\n                />\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={options.difficulty.some(t=> t === \"1\")} onChange={this.handleDiffChange(\"1\")} value=\"another\" />}\r\n                  label=\"A\"\r\n                />\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={options.difficulty.some(t=> t === \"2\")} onChange={this.handleDiffChange(\"2\")} value=\"leggendaria\" />}\r\n                  label=\"\"\r\n                />\r\n              </FormGroup>\r\n            </FormControl>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <SongsTable\r\n          page={page} handleChangePage={this.handleChangePage}\r\n          data={this.sortedData()} sort={sort} isDesc={isDesc}\r\n          changeSort={this.changeSort}\r\n          updateScoreData={this.updateScoreData}/>\r\n\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport { scoresDB, songsDB } from '../../components/indexedDB';\r\nimport { songData } from '../../types/data';\r\nimport { difficultyDiscriminator } from '../../components/songs/filter';\r\nimport { _isSingle,_currentStore } from '../../components/settings';\r\nimport Container from '@material-ui/core/Container';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport NotPlayList from '../components/songs/notplayed/notPlayList';\r\n\r\ninterface S {\r\n  full:songData[]\r\n}\r\n\r\nexport default class NotPlayed extends React.Component<{},S> {\r\n\r\n  constructor(props:Object){\r\n    super(props);\r\n    this.state ={\r\n      full:[]\r\n    }\r\n    this.updateScoreData = this.updateScoreData.bind(this);\r\n  }\r\n\r\n  async componentDidMount(){\r\n    await this.updateScoreData();\r\n  }\r\n\r\n  async updateScoreData(whenUpdated:boolean = false,willDeleteItem?:{title:string,difficulty:string}){\r\n    if(whenUpdated && willDeleteItem){\r\n      return this.setState({full:this.state.full.filter((item:songData)=>{\r\n        if(item.title !== willDeleteItem.title){\r\n          return true;\r\n        }else{\r\n          if(difficultyDiscriminator(item.difficulty) !== willDeleteItem.difficulty){\r\n            return true;\r\n          }\r\n        }\r\n        return false;\r\n      })});\r\n    }\r\n    const currentStore = _currentStore();\r\n    const isSingle = _isSingle();\r\n    const songs:songData[] = await new songsDB().getAll(isSingle);\r\n    const db = new scoresDB();\r\n    let full:songData[] = [];\r\n    for(let i =0;i < songs.length;++i){\r\n      let song = songs[i];\r\n      const res = await db.getItem(song.title,difficultyDiscriminator(song.difficulty),currentStore,isSingle);\r\n      if(res.length === 0) full.push(song);\r\n    }\r\n    this.setState({full:full});\r\n  }\r\n\r\n  render(){\r\n    if(this.state.full.length === 0){\r\n      return (\r\n        <Container className=\"loaderCentered\">\r\n          <CircularProgress />\r\n        </Container>);\r\n    }\r\n    return (\r\n      <div id=\"_notPlayed\">\r\n        <NotPlayList title=\"NotPlayed.Title\" full={this.state.full} updateScoreData={this.updateScoreData}/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport { scoresDB, songsDB, scoreHistoryDB } from '../../components/indexedDB';\r\nimport Container from '@material-ui/core/Container';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport bpiCalcuator from '../../components/bpi';\r\nimport {_isSingle,_currentStore, _chartColor} from \"../../components/settings\";\r\nimport moment from 'moment';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { XAxis, CartesianGrid, YAxis, Tooltip, Bar, ResponsiveContainer, Line, ComposedChart, LineChart, Legend } from 'recharts';\r\n\r\ninterface S {\r\n  isLoading:boolean,\r\n  totalBPI:number,\r\n  perDate:{name:string,sum:string,avg:number}[],\r\n  groupedByBPI:any[],\r\n}\r\n\r\nclass Stats extends React.Component<{intl:any},S> {\r\n\r\n  constructor(props:{intl:any}){\r\n    super(props);\r\n    this.state ={\r\n      isLoading:true,\r\n      totalBPI:0,\r\n      perDate:[],\r\n      groupedByBPI:[],\r\n    }\r\n    this.updateScoreData = this.updateScoreData.bind(this);\r\n  }\r\n\r\n  async componentDidMount(){\r\n    await this.updateScoreData();\r\n  }\r\n\r\n  async updateScoreData(){\r\n    const db = new scoresDB();\r\n    const bpi = new bpiCalcuator();\r\n    const currentStore = _currentStore();\r\n    const isSingle = _isSingle();\r\n    const allSongsTwelvesBPI = await db.getAllTwelvesBPI(isSingle,currentStore,\"12\");\r\n    const allSongsElevensBPI = await db.getAllTwelvesBPI(isSingle,currentStore,\"11\");\r\n    bpi.allTwelvesBPI = allSongsTwelvesBPI;\r\n    bpi.allTwelvesLength = await new songsDB().getAllTwelvesLength(isSingle);\r\n    //compare by date\r\n    const allDiffs = (await new scoreHistoryDB().getAll(\"12\")).reduce((groups, item) => {\r\n      const date = moment(item.updatedAt).format(\"YYYY/MM/DD\");\r\n      if (!groups[date]) {\r\n        groups[date] = [];\r\n      }\r\n      groups[date].push(item);\r\n      return groups;\r\n    }, {});\r\n    let eachDaySum:{name:string,sum:string,avg:number,}[] = [];\r\n    Object.keys(allDiffs).map((item,i)=>{\r\n      if(i > 10){\r\n        return 0;\r\n      }\r\n      const avg:{BPI:number} = allDiffs[item].reduce((a:any,c:any)=>{return {BPI:a.BPI + c.BPI}});\r\n      eachDaySum.push({\r\n        name : item,\r\n        sum : allDiffs[item].length,\r\n        avg : Math.round(avg.BPI / allDiffs[item].length * 100) / 100\r\n      });\r\n      return 0;\r\n    });\r\n\r\n    let bpis = [-20,-10,0,10,20,30,40,50,60,70,80,90,100];\r\n    let groupedByBPI = [];\r\n    const twelvesBPIGrouped = this.groupByBPI(allSongsTwelvesBPI);\r\n    const elevensBPIGrouped = this.groupByBPI(allSongsElevensBPI);\r\n    for(let i = 0; i < bpis.length; ++i){\r\n      let obj:{\"name\":number,\"11\":number,\"12\":number} = {\"name\":bpis[i],\"11\":0,\"12\":0};\r\n      obj[\"11\"] = elevensBPIGrouped[bpis[i]] ? elevensBPIGrouped[bpis[i]] : 0;\r\n      obj[\"12\"] = twelvesBPIGrouped[bpis[i]] ? twelvesBPIGrouped[bpis[i]] : 0;\r\n      groupedByBPI.push(obj);\r\n    }\r\n\r\n    //BPI\r\n    this.setState({\r\n      isLoading:false,\r\n      totalBPI:bpi.totalBPI(),\r\n      perDate:eachDaySum.sort((a,b)=> moment(a.name).diff(b.name)),\r\n      groupedByBPI:groupedByBPI\r\n    });\r\n  }\r\n\r\n  groupByBPI = (array:number[])=>{\r\n    return array.reduce((groups:{[key:number]:number}, item:number) => {\r\n      let _ = Math.floor(item / 10) * 10;\r\n      if(_ > 100) _ = 100\r\n      if (!groups[_]) {\r\n        groups[_] = 1;\r\n      }else{\r\n        groups[_]++;\r\n      }\r\n      return groups;\r\n    }, {});\r\n  }\r\n\r\n  render(){\r\n    const {totalBPI,isLoading,perDate,groupedByBPI} = this.state;\r\n    const {formatMessage} = this.props.intl;\r\n    const chartColor = _chartColor();\r\n    if(isLoading){\r\n      return (\r\n        <Container className=\"loaderCentered\">\r\n          <CircularProgress />\r\n        </Container>\r\n      );\r\n    }\r\n    return (\r\n      <Container className=\"commonLayout\" fixed>\r\n        <Typography component=\"h5\" variant=\"h5\" color=\"textPrimary\" gutterBottom>\r\n          <FormattedMessage id=\"Stats.title\"/>\r\n        </Typography>\r\n        <Grid container spacing={3}>\r\n          <Grid item xs={12} md={3} lg={3}>\r\n            <Paper style={{padding:\"15px\"}} className=\"responsiveTotalBPI\">\r\n              <Typography component=\"h6\" variant=\"h6\" color=\"textPrimary\" gutterBottom>\r\n                <FormattedMessage id=\"Stats.TotalBPI\"/>\r\n              </Typography>\r\n              <Typography component=\"h2\" variant=\"h2\" color=\"textPrimary\">\r\n                {totalBPI}\r\n              </Typography>\r\n            </Paper>\r\n          </Grid>\r\n          <Grid item xs={12} md={9} lg={9}>\r\n            <Paper style={{padding:\"15px\",height:240}}>\r\n              <Typography component=\"h6\" variant=\"h6\" color=\"textPrimary\" gutterBottom>\r\n                <FormattedMessage id=\"Stats.EachDay\"/>\r\n              </Typography>\r\n              {perDate.length > 0 &&\r\n                <div style={{width:\"95%\",height:\"100%\",margin:\"5px auto\"}}>\r\n                  <ResponsiveContainer width=\"100%\">\r\n                    <ComposedChart\r\n                      data={perDate}\r\n                      margin={{\r\n                        top: 5, right: 30, left: -30, bottom: 25,\r\n                      }}>\r\n                      <CartesianGrid strokeDasharray=\"3 3\" />\r\n                      <XAxis dataKey=\"name\" stroke={chartColor} />\r\n                      <YAxis orientation=\"left\" tickLine={false} axisLine={false} stroke={chartColor}/>\r\n                      <Tooltip contentStyle={{color:\"#333\"}}/>\r\n                      <Bar dataKey=\"sum\" name={formatMessage({id:\"Stats.UpdatedSum\"})} fill=\"#82ca9d\" />\r\n                      <Line dataKey=\"avg\" name={formatMessage({id:\"Stats.Average\"})} />\r\n                    </ComposedChart>\r\n                  </ResponsiveContainer>\r\n                </div>\r\n              }\r\n              {perDate.length === 0 && <p>No data found.</p>}\r\n            </Paper>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container spacing={3}>\r\n          <Grid item xs={12} md={12} lg={12}>\r\n            <Paper style={{padding:\"15px\",height:270}}>\r\n              <Typography component=\"h6\" variant=\"h6\" color=\"textPrimary\" gutterBottom>\r\n                <FormattedMessage id=\"Stats.Distribution\"/>\r\n              </Typography>\r\n              {(groupedByBPI.length > 0) &&\r\n                <div style={{width:\"95%\",height:\"100%\",margin:\"5px auto\"}}>\r\n                  <ResponsiveContainer width=\"100%\">\r\n                    <LineChart\r\n                      data={groupedByBPI}\r\n                      margin={{\r\n                        top: 5, right: 30, left: -30, bottom: 30,\r\n                      }}\r\n                      >\r\n                        <CartesianGrid strokeDasharray=\"3 3\" />\r\n                        <XAxis dataKey=\"name\" stroke={chartColor} />\r\n                        <YAxis stroke={chartColor}/>\r\n                        <Tooltip contentStyle={{color:\"#333\"}}/>\r\n                        <Legend />\r\n                        <Line type=\"monotone\" dataKey=\"11\" stroke=\"#8884d8\" activeDot={{ r: 8 }} />\r\n                        <Line type=\"monotone\" dataKey=\"12\" stroke=\"#82ca9d\" />\r\n                      </LineChart>\r\n                  </ResponsiveContainer>\r\n                </div>\r\n              }\r\n              {groupedByBPI.length === 0 && <p>No data found.</p>}\r\n            </Paper>\r\n          </Grid>\r\n        </Grid>\r\n\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default injectIntl(Stats);\r\n","import { Container } from 'unstated'\r\nimport { _lang,_currentStore, _currentTheme, _isSingle, _goalBPI, _goalPercentage } from '../settings'\r\n\r\ninterface S{\r\n  lang:string,\r\n  store:string,\r\n  theme:string,\r\n  cannotMove:boolean,\r\n  isSingle:number,\r\n  goalBPI:number,\r\n  goalPercentage:number,\r\n}\r\n\r\nexport default class GlobalContainer extends Container<S> {\r\n\r\n  constructor(){\r\n    super();\r\n    this.setLang = this.setLang.bind(this);\r\n    this.setStore = this.setStore.bind(this);\r\n    this.setTheme = this.setTheme.bind(this);\r\n    this.setIsSingle = this.setIsSingle.bind(this);\r\n    this.setGoalBPI = this.setGoalBPI.bind(this);\r\n    this.setGoalPercentage = this.setGoalPercentage.bind(this);\r\n  }\r\n\r\n  state = {\r\n    lang : _lang(),\r\n    store : _currentStore(),\r\n    theme : _currentTheme(),\r\n    isSingle : _isSingle(),\r\n    goalBPI : _goalBPI(),\r\n    goalPercentage : _goalPercentage(),\r\n    cannotMove: false\r\n  }\r\n\r\n  setLang(newLang:string) {\r\n    localStorage.setItem(\"lang\",newLang);\r\n    this.setState({ lang: newLang })\r\n  }\r\n\r\n  setStore(newStore:string){\r\n    localStorage.setItem(\"currentStore\",newStore);\r\n    this.setState({ store: newStore });\r\n  }\r\n\r\n  setTheme(newTheme:string){\r\n    localStorage.setItem(\"theme\",newTheme);\r\n    this.setState({ theme: newTheme });\r\n  }\r\n\r\n  setIsSingle(newState:number){\r\n    localStorage.setItem(\"isSingle\",String(newState));\r\n    this.setState({ isSingle: newState });\r\n  }\r\n\r\n  setGoalBPI(newState:number){\r\n    localStorage.setItem(\"goalBPI\",String(newState));\r\n    this.setState({ goalBPI: newState });\r\n  }\r\n\r\n  setGoalPercentage(newState:number){\r\n    localStorage.setItem(\"goalPercentage\",String(newState));\r\n    this.setState({ goalPercentage: newState });\r\n  }\r\n\r\n  setMove(newState:boolean) {\r\n    this.setState({ cannotMove: newState })\r\n  }\r\n\r\n}\r\n","export const config ={\r\n  versionNumber:\"5\",\r\n}\r\n","import * as React from 'react';\r\nimport Container from '@material-ui/core/Container';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport { Subscribe } from 'unstated';\r\nimport GlobalContainer from '../../components/context/global';\r\nimport Button from '@material-ui/core/Button';\r\nimport UpdateIcon from '@material-ui/icons/Update';\r\nimport { _currentVersion, _isSingle } from '../../components/settings';\r\nimport { songsDB, scoresDB, scoreHistoryDB } from '../../components/indexedDB';\r\nimport { songData } from '../../types/data';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport { config } from '../../config';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\ninterface S {\r\n  isLoading:boolean,\r\n  disableUpdateBtn:boolean,\r\n  disableDeleteBtn:boolean,\r\n  currentVersion:string,\r\n  message:string,\r\n  message2:string,\r\n  currentResetStore:string,\r\n  isDialogOpen:boolean,\r\n}\r\n\r\ninterface P{\r\n  intl:any,\r\n  global:any\r\n}\r\n\r\nclass Settings extends React.Component<P,S> {\r\n\r\n  constructor(props:P){\r\n    super(props);\r\n    this.state ={\r\n      isLoading:false,\r\n      disableUpdateBtn:false,\r\n      currentVersion:_currentVersion(),\r\n      message:\"\",\r\n      message2:\"\",\r\n      currentResetStore:\"27\",\r\n      disableDeleteBtn:false,\r\n      isDialogOpen:false,\r\n    }\r\n  }\r\n\r\n  deleteDef = async()=>{\r\n    try{\r\n      this.props.global.setMove(true);\r\n      this.setState({disableDeleteBtn:true,message2:\"\"});\r\n      const sdb = new scoresDB(), shdb = new scoreHistoryDB(),sodb = new songsDB();\r\n      const target = this.state.currentResetStore;\r\n      if(target === \"Songs Database\"){\r\n        await sodb.deleteAll();\r\n      }else{\r\n        await sdb.resetItems(target);\r\n        await shdb.reset(target);\r\n      }\r\n      this.setState({disableDeleteBtn:false,message2:\"\"});\r\n    }catch(e){\r\n      console.log(e);\r\n      this.setState({disableDeleteBtn:false,message2:\"\"});\r\n    }\r\n    this.props.global.setMove(false);\r\n  }\r\n\r\n  toggleDialog = ()=> this.setState({isDialogOpen:!this.state.isDialogOpen})\r\n\r\n  updateDef = async()=>{\r\n    const end = ()=>{this.props.global.setMove(false);}\r\n    try{\r\n      this.props.global.setMove(true);\r\n      this.setState({disableUpdateBtn:true,message:\"\"});\r\n      const sdb = new songsDB();\r\n      const schDB = new scoreHistoryDB();\r\n      const reducer = (t:songData[])=>t.reduce((result:{[key:string]:songData}, current:songData) => {result[current.title + current.difficulty + current.dpLevel] = current;return result;}, {});\r\n      const allSongs = await sdb.getAllWithAllPlayModes().then(t=>reducer(t));\r\n      const res = await fetch(\"https://files.poyashi.me/json/songsWithDP.json\").then(t=>t.json());\r\n      if(Number(res.requireVersion) > Number(config.versionNumber) ){\r\n        end();\r\n        return this.setState({disableUpdateBtn:false,message:\":>=\"+ res.requireVersion });\r\n      }\r\n      if(res.version === this.state.currentVersion){\r\n        end();\r\n        return this.setState({disableUpdateBtn:false,message:\"\"});\r\n      }\r\n      const promiseProducer = ()=>{\r\n        return res.body.map((t:songData) => {\r\n          return new Promise(resolve=>{\r\n            const pfx = t[\"title\"] + t[\"difficulty\"] + t[\"dpLevel\"];\r\n            if(allSongs[pfx] && allSongs[pfx][\"dpLevel\"] === t[\"dpLevel\"]){\r\n              //\r\n              sdb.updateItem(t).then(()=>resolve());\r\n            }else{\r\n              //\r\n              sdb.setItem(t).then(()=>resolve());\r\n            }\r\n          });\r\n        });\r\n      }\r\n      await Promise.all(promiseProducer());\r\n      const scDB = new scoresDB();\r\n      scDB.setNewSongsDBRawData(reducer(res.body));\r\n      await scDB.recalculateBPI();\r\n      await schDB.recalculateBPI();\r\n      localStorage.setItem(\"lastDefFileVer\",res.version);\r\n      this.setState({currentVersion:res.version,disableUpdateBtn:false,message:\"\"});\r\n    }catch(e){\r\n      console.log(e);\r\n      this.setState({disableUpdateBtn:false,message:\"\"});\r\n    }\r\n    end();\r\n    return;\r\n  }\r\n\r\n  render(){\r\n    const {isLoading,isDialogOpen,disableUpdateBtn,message,message2,currentResetStore,disableDeleteBtn} = this.state;\r\n    if(isLoading){\r\n      return (\r\n        <Container className=\"loaderCentered\">\r\n          <CircularProgress />\r\n        </Container>\r\n      );\r\n    }\r\n    return (\r\n      <Subscribe to={[GlobalContainer]}>\r\n        {({state,setLang,setStore,setTheme,setIsSingle,setGoalBPI,setGoalPercentage}:GlobalContainer)=> (\r\n          <Container className=\"commonLayout\" fixed>\r\n            <Typography component=\"h5\" variant=\"h5\" color=\"textPrimary\" gutterBottom>\r\n              <FormattedMessage id=\"Settings.title\"/>\r\n            </Typography>\r\n            <Paper style={{padding:\"15px\"}}>\r\n              <FormControl>\r\n                <InputLabel><FormattedMessage id=\"Settings.language\"/></InputLabel>\r\n                <Select value={state.lang} onChange={(e:React.ChangeEvent<{ value: unknown }>,)=>{\r\n                  if(typeof e.target.value === \"string\"){\r\n                    setLang(e.target.value)\r\n                  }\r\n                }}>\r\n                  <MenuItem value=\"ja\"></MenuItem>\r\n                  <MenuItem value=\"en\">English</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n              <Typography variant=\"caption\" display=\"block\">\r\n                <FormattedMessage id=\"Settings.noteLang\"/>\r\n              </Typography>\r\n              <Divider style={{margin:\"10px 0\"}}/>\r\n              <FormControl>\r\n                <InputLabel><FormattedMessage id=\"Settings.theme\"/></InputLabel>\r\n                <Select value={state.theme} onChange={(e:React.ChangeEvent<{ value: unknown }>,)=>{\r\n                  if(typeof e.target.value === \"string\"){\r\n                    setTheme(e.target.value)\r\n                  }\r\n                }}>\r\n                  <MenuItem value=\"light\">Light</MenuItem>\r\n                  <MenuItem value=\"dark\">Dark</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n              <Divider style={{margin:\"10px 0\"}}/>\r\n              <FormControl>\r\n                <InputLabel><FormattedMessage id=\"Settings.dataStore\"/></InputLabel>\r\n                <Select value={state.store} onChange={(e:React.ChangeEvent<{ value: unknown }>,)=>{\r\n                  if(typeof e.target.value === \"string\"){\r\n                    setStore(e.target.value)\r\n                  }\r\n                }}>\r\n                  <MenuItem value=\"26\">26 Rootage</MenuItem>\r\n                  <MenuItem value=\"27\">27 HEROIC VERSE</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n              <Typography variant=\"caption\" display=\"block\">\r\n                <FormattedMessage id=\"Settings.noteMes1\"/>\r\n              </Typography>\r\n              <Typography variant=\"caption\" display=\"block\">\r\n                <FormattedMessage id=\"Settings.inaccurateMes\"/>\r\n              </Typography>\r\n              <Divider style={{margin:\"10px 0\"}}/>\r\n              <Typography variant=\"caption\" display=\"block\" className=\"MuiFormLabel-root MuiInputLabel-animated MuiInputLabel-shrink\">\r\n                <FormattedMessage id=\"Settings.DPMode\"/>(beta)\r\n              </Typography>\r\n              <Switch\r\n                checked={state.isSingle === 0 ? true : false}\r\n                onChange={(e:React.ChangeEvent<HTMLInputElement>,)=>{\r\n                  if(typeof e.target.checked === \"boolean\"){\r\n                    setIsSingle(e.target.checked === true ? 0 : 1);\r\n                  }\r\n                }}\r\n              />\r\n              <Typography variant=\"caption\" display=\"block\">\r\n                <FormattedMessage id=\"Settings.dpDescription\"/>\r\n              </Typography>\r\n              <Divider style={{margin:\"10px 0\"}}/>\r\n              <TextField\r\n                value={state.goalBPI}\r\n                label={<FormattedMessage id=\"Settings.MyGoalBPI\"/>}\r\n                type=\"number\"\r\n                InputLabelProps={{\r\n                  shrink: true,\r\n                }}\r\n                onChange={(e:React.ChangeEvent<HTMLInputElement>,)=>{\r\n                  if(typeof e.target.value === \"string\"){\r\n                    setGoalBPI(Number(e.target.value) > 100 ? 100 : Number(e.target.value));\r\n                  }\r\n                }}\r\n                style={{margin:\"0 0 5px 0\",width:\"100%\"}}\r\n              />\r\n              <TextField\r\n                value={state.goalPercentage}\r\n                label={<FormattedMessage id=\"Settings.MyGoalPercentage\"/>}\r\n                type=\"number\"\r\n                InputLabelProps={{\r\n                  shrink: true,\r\n                }}\r\n                onChange={(e:React.ChangeEvent<HTMLInputElement>,)=>{\r\n                  if(typeof e.target.value === \"string\"){\r\n                    setGoalPercentage(Number(e.target.value) > 100 ? 100 : Number(e.target.value));\r\n                  }\r\n                }}\r\n                style={{margin:\"0 0 5px 0\",width:\"100%\"}}\r\n              />\r\n              <Typography variant=\"caption\" display=\"block\">\r\n                <FormattedMessage id=\"Settings.MyGoalDescription\"/>\r\n              </Typography>\r\n              <Divider style={{margin:\"10px 0\"}}/>\r\n                <FormControl>\r\n                  <Typography variant=\"caption\" display=\"block\" className=\"MuiFormLabel-root MuiInputLabel-animated MuiInputLabel-shrink\">\r\n                    <FormattedMessage id=\"Settings.Update\"/>\r\n                  </Typography>\r\n                  <div style={{position:\"relative\"}}>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      color=\"secondary\"\r\n                      onClick={this.updateDef}\r\n                      disabled={disableUpdateBtn}\r\n                      startIcon={<UpdateIcon />}>\r\n                      <FormattedMessage id=\"Settings.UpdateResourcePacks\"/>\r\n                    </Button>\r\n                    {disableUpdateBtn && <CircularProgress size={24} style={{color:\"#777\",position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12}} />}\r\n                  </div>\r\n                </FormControl>\r\n                <Typography variant=\"caption\" display=\"block\">\r\n                  {message}\r\n                </Typography>\r\n                <Typography variant=\"caption\" display=\"block\">\r\n                  <FormattedMessage id=\"Settings.currentVersion\"/>{this.state.currentVersion}\r\n                </Typography>\r\n                <Typography variant=\"caption\" display=\"block\">\r\n                  <FormattedMessage id=\"Settings.updateWarning\"/>\r\n                </Typography>\r\n                <Divider style={{margin:\"10px 0\"}}/>\r\n                <FormControl>\r\n                  <InputLabel><FormattedMessage id=\"Settings.dataClear\"/></InputLabel>\r\n                  <Select value={currentResetStore} onChange={(e:React.ChangeEvent<{ value: unknown }>,)=>{\r\n                    if(typeof e.target.value !== \"string\"){return;}\r\n                    this.setState({currentResetStore:e.target.value});\r\n                  }}>\r\n                    <MenuItem value=\"26\">26 Rootage</MenuItem>\r\n                    <MenuItem value=\"27\">27 HEROIC VERSE</MenuItem>\r\n                    <MenuItem value=\"Songs Database\">Songs Database</MenuItem>\r\n                  </Select>\r\n                </FormControl>\r\n                <Typography variant=\"caption\" display=\"block\">\r\n                  <FormattedMessage id=\"Settings.resetWarning\"/>\r\n                </Typography>\r\n                <div style={{position:\"relative\"}}>\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    color=\"secondary\"\r\n                    style={{background:\"#dc004e\"}}\r\n                    onClick={this.toggleDialog}\r\n                    disabled={disableDeleteBtn}\r\n                    startIcon={<DeleteForeverIcon />}>\r\n                    <FormattedMessage id=\"Settings.DeleteExec\"/>\r\n                  </Button>\r\n                  <Typography variant=\"caption\" display=\"block\">\r\n                    {message2}\r\n                  </Typography>\r\n                  <AlertDialog isDialogOpen={isDialogOpen} exec={this.deleteDef} close={this.toggleDialog} currentResetStore={currentResetStore}/>\r\n                  {disableDeleteBtn && <CircularProgress size={24} style={{color:\"#777\",position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12}} />}\r\n                </div>\r\n            </Paper>\r\n          </Container>\r\n        )}\r\n      </Subscribe>\r\n    );\r\n  }\r\n}\r\n\r\nexport default injectIntl(Settings);\r\n\r\nclass AlertDialog extends React.Component<{isDialogOpen:boolean,exec:()=>void,close:()=>void,currentResetStore:string},{}> {\r\n\r\n  handleOk = () => {\r\n    this.props.exec();\r\n    this.props.close();\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.props.close();\r\n  };\r\n\r\n  render(){\r\n    const {isDialogOpen,currentResetStore} = this.props;\r\n    return (\r\n      <div>\r\n        <Dialog\r\n          open={isDialogOpen}\r\n          onClose={this.handleClose}>\r\n          <DialogTitle>Confirm</DialogTitle>\r\n          <DialogContent>\r\n            <DialogContentText>\r\n              <FormattedMessage id=\"Settings.DeleteDialogBody\"/><br/>\r\n              <FormattedMessage id=\"Settings.DeleteDialogBody2\"/><br/>\r\n              {currentResetStore === \"26\" ? \"26 Rootage\" : currentResetStore === \"27\" ? \"27 HEROIC VERSE\" : \"Songs Database\"}\r\n            </DialogContentText>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={this.handleClose} color=\"secondary\">\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={this.handleOk} color=\"secondary\" autoFocus>\r\n              Continue\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport DetailedSongInformation from \"../../components/songs/detailsScreen\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport { scoreData, songData } from '../../../types/data';\r\nimport { diffColor } from \"../songs/common\";\r\n\r\ninterface S {\r\n  isOpen:boolean,\r\n  currentSongData:songData | null,\r\n  currentScoreData:scoreData | null,\r\n}\r\n\r\ninterface P{\r\n  isLoading:boolean,\r\n  full:any[],\r\n  page:number,\r\n  rowsPerPage:number,\r\n  handleChangePage:(newPage:number)=>void,\r\n  handleChangeRowsPerPage:(value:string)=>void,\r\n  changeSort:(value:number)=>void,\r\n  sort:number,\r\n  isDesc:boolean,\r\n}\r\n\r\nexport default class Compare extends React.Component<P,S> {\r\n\r\n  constructor(props:P){\r\n    super(props);\r\n    this.state ={\r\n      isOpen:false,\r\n      currentSongData:null,\r\n      currentScoreData:null,\r\n    }\r\n  }\r\n\r\n  handleOpen = async(updateFlag:boolean,row?:any):Promise<void>=> {\r\n    if(updateFlag){\r\n\r\n    }\r\n    return this.setState({\r\n      isOpen:!this.state.isOpen,\r\n      currentSongData:row ? row[\"songData\"] : null,\r\n      currentScoreData:row ? row[\"scoreData\"] : null\r\n    });\r\n  }\r\n\r\n  cloneState = () => JSON.parse(JSON.stringify(this.state))\r\n\r\n  handleChangePage = (_e:React.MouseEvent<HTMLButtonElement, MouseEvent> | null, newPage:number):void => this.props.handleChangePage(newPage);\r\n\r\n  handleChangeRowsPerPage = (event:React.ChangeEvent<HTMLInputElement>):void => this.props.handleChangeRowsPerPage(event.target.value);\r\n\r\n  render(){\r\n    const {currentScoreData,currentSongData,isOpen} = this.state;\r\n    const {full,isLoading,page,rowsPerPage,changeSort,sort,isDesc} = this.props;\r\n\r\n    const columns = [\r\n      { id: \"difficultyLevel\", label: \"\"},\r\n      { id: \"title\", label: \"\" },\r\n      { id: \"exScore\", label: \"S\"},\r\n      {\r\n        id: \"compareData\",\r\n        label: \"W\",\r\n      }\r\n    ];\r\n    if(isLoading){\r\n      return (\r\n        <Container className=\"loaderCentered\">\r\n          <CircularProgress />\r\n        </Container>\r\n      );\r\n    }\r\n    return (\r\n    <Paper style={{width:\"100%\",overflowX:\"auto\"}}>\r\n      <div>\r\n        <Table>\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column,i) => (\r\n                <TableCell\r\n                  key={column.id}\r\n                  onClick={()=>changeSort(i)}\r\n                >\r\n                  {column.label}\r\n                  {i === sort &&\r\n                    <span>\r\n                      { isDesc && <span></span> }\r\n                      { !isDesc && <span></span> }\r\n                    </span>\r\n                  }\r\n                  {i !== sort && <span></span>}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {full.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row:any,i:number) => {\r\n              return (\r\n                <TableRow\r\n                  onClick={()=>this.handleOpen(false,row)}\r\n                  hover role=\"checkbox\" tabIndex={-1} key={row.title} className={ i % 2 ? \"isOdd\" : \"isEven\"}>\r\n                  {columns.map((column,j) => {\r\n                    const prefix = row.difficulty === \"hyper\" ? \"(H)\" : row.difficulty === \"leggendaria\" ? \"()\" : \"\";\r\n                    return (\r\n                      <TableCell key={column.id + prefix} style={{backgroundColor : diffColor(j,row.scoreData),position:\"relative\"}}>\r\n                        {row[column.id]}\r\n                        {j === 1 && prefix}\r\n                        {(j === 3) && <span className=\"plusOverlayScore\">\r\n                          {row.gap}\r\n                          </span>\r\n                        }\r\n                      </TableCell>\r\n                    );\r\n                  })}\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </div>\r\n      <TablePagination\r\n        rowsPerPageOptions={[10, 25, 50, 100]}\r\n        component=\"div\"\r\n        count={full.length}\r\n        rowsPerPage={rowsPerPage}\r\n        page={page}\r\n        labelRowsPerPage=\"\"\r\n        backIconButtonProps={{\r\n          \"aria-label\": \"previous page\",\r\n        }}\r\n        nextIconButtonProps={{\r\n          \"aria-label\": \"next page\",\r\n        }}\r\n        onChangePage={this.handleChangePage}\r\n        onChangeRowsPerPage={this.handleChangeRowsPerPage}\r\n      />\r\n      {isOpen &&\r\n        <DetailedSongInformation isOpen={isOpen} song={currentSongData} score={currentScoreData} handleOpen={this.handleOpen}/>\r\n      }\r\n    </Paper>\r\n    );\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport { scoresDB, songsDB } from '../../components/indexedDB';\r\nimport {_isSingle, _goalBPI, _goalPercentage} from \"../../components/settings\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport CompareTable from \"../components/compare/table\";\r\nimport bpiCalcuator from '../../components/bpi';\r\n\r\ninterface S {\r\n  isLoading:boolean,\r\n  full:any[],\r\n  filtered:any[],\r\n  sort:number,\r\n  isDesc:boolean,\r\n  options:{[key:string]:string[]},\r\n  filterByName:string,\r\n  compareFrom:string,\r\n  compareTo:string,\r\n  page:number,\r\n  rowsPerPage:number,\r\n}\r\n\r\nexport default class Compare extends React.Component<{},S> {\r\n  _mounted: boolean = false;\r\n\r\n  constructor(props:Object){\r\n    super(props);\r\n    this.state ={\r\n      isLoading:true,\r\n      full:[],\r\n      filtered:[],\r\n      sort:3,\r\n      isDesc:true,\r\n      options:{\r\n        level:[\"11\",\"12\"],\r\n        difficulty:[\"0\",\"1\",\"2\"],\r\n        pm:[\"+\",\"-\"],\r\n      },\r\n      filterByName:\"\",\r\n      compareFrom:\"27\",\r\n      compareTo:\"26\",\r\n      page:0,\r\n      rowsPerPage:10,\r\n    }\r\n  }\r\n\r\n  async componentDidMount(){\r\n    this._mounted = true;\r\n    this.dataHandler();\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    this._mounted = false;\r\n  }\r\n\r\n  handleLevelChange = (name:string) => (e:React.ChangeEvent<HTMLInputElement>) =>{\r\n    this.handleExec(name,e.target.checked,\"level\");\r\n  }\r\n\r\n  handleDiffChange = (name:string) => (e:React.ChangeEvent<HTMLInputElement>) =>{\r\n    this.handleExec(name,e.target.checked,\"difficulty\");\r\n  }\r\n\r\n  handlePMChange = (name:string) => (e:React.ChangeEvent<HTMLInputElement>) =>{\r\n    this.handleExec(name,e.target.checked,\"pm\");\r\n  }\r\n\r\n  handleExec = (name:string,checked:boolean,target:string)=>{\r\n    let newState:S = this.state;\r\n    if(checked){\r\n      newState[\"options\"][target].push(name);\r\n    }else{\r\n      newState[\"options\"][target] = newState[\"options\"][target].filter((t:string)=> t !== name);\r\n    }\r\n    this.setState({options:newState[\"options\"]});\r\n    return this.filter();\r\n  }\r\n\r\n  changeSort = (newNum:number):void=>{\r\n    const {sort,isDesc} = this.state;\r\n    if(sort === newNum){\r\n      return this.setState({isDesc:!isDesc});\r\n    }\r\n    this.setState({sort:newNum,isDesc:true});\r\n  }\r\n\r\n  handleCompareFromChange = async (event:React.ChangeEvent<{name?:string|undefined; value:unknown;}>):Promise<void> =>{\r\n    if (typeof event.target.value !== \"string\") { return; }\r\n    let newState = this.cloneState();\r\n    newState.compareFrom = event.target.value;\r\n    this.setState({compareFrom:event.target.value,isLoading:true});\r\n    return this.dataHandler(newState);\r\n  }\r\n\r\n  handleCompareToChange = async (event:React.ChangeEvent<{name?:string|undefined; value:unknown;}>):Promise<void> =>{\r\n    if (typeof event.target.value !== \"string\") { return; }\r\n    let newState = this.cloneState();\r\n    newState.compareTo = event.target.value;\r\n    this.setState({compareTo:event.target.value,isLoading:true});\r\n    return this.dataHandler(newState);\r\n  }\r\n\r\n  filter = ():any[]=>{\r\n    const {options,full} = this.state;\r\n    const diffs:string[] = [\"hyper\",\"another\",\"leggendaria\"];\r\n    return full.filter((data)=>\r\n        options[\"level\"].some((item:string)=>item === data.difficultyLevel) &&\r\n        options[\"difficulty\"].some((item:string)=>diffs[Number(item)] === data.difficulty )\r\n    )\r\n  }\r\n\r\n  async dataHandler(newState:any = this.state):Promise<void>{\r\n    let result:any[] = [];\r\n    const f = newState.compareFrom;\r\n    const t = newState.compareTo;\r\n    const isSingle = _isSingle();\r\n    const scores = new scoresDB(isSingle,f);\r\n    const sdb = new songsDB();\r\n    const calc = new bpiCalcuator();\r\n    const fData = await scores.getSpecificVersionAll();\r\n    const goalBPI = _goalBPI(), goalPerc = _goalPercentage();\r\n    for(let i =0; i < fData.length; ++i){\r\n      let tScore = 0;\r\n      const tData = await scores.getItem(fData[i][\"title\"],fData[i][\"difficulty\"],t,isSingle);\r\n      const songData = isSingle ?\r\n      await sdb.getOneItemIsSingle(fData[i][\"title\"],fData[i][\"difficulty\"]) :\r\n      await sdb.getOneItemIsDouble(fData[i][\"title\"],fData[i][\"difficulty\"]);\r\n      calc.setData(songData[0][\"notes\"] * 2,songData[0][\"avg\"],songData[0][\"wr\"]);\r\n      if(!tData || tData.length === 0){\r\n        tScore = 0;\r\n      }else{\r\n        tScore = tData[0][\"exScore\"];\r\n      }\r\n      if(t === \"WR\"){\r\n        tScore = songData[0][\"wr\"];\r\n      }\r\n      if(t === \"AVERAGE\"){\r\n        tScore = songData[0][\"avg\"];\r\n      }\r\n      if(t === \"BPI\"){\r\n        tScore = calc.calcFromBPI(goalBPI,true);\r\n      }\r\n      if(t === \"PERCENTAGE\"){\r\n        tScore = Math.ceil(songData[0][\"notes\"] * 2 * goalPerc / 100)\r\n      }\r\n      result.push({\r\n        title:fData[i][\"title\"],\r\n        songData: songData[0],\r\n        scoreData: fData[i],\r\n        difficulty:fData[i][\"difficulty\"],\r\n        difficultyLevel:fData[i][\"difficultyLevel\"],\r\n        exScore:fData[i][\"exScore\"],\r\n        compareData:tScore,\r\n        gap:fData[i][\"exScore\"] - tScore\r\n      });\r\n    }\r\n    if(!this._mounted){return;}\r\n    return this.setState({full:result,isLoading:false});\r\n  }\r\n\r\n  sortedData = ():any[]=>{\r\n    const {isDesc,sort} = this.state;\r\n    const sortedData:any[] = this.filter().sort((a,b)=>{\r\n      switch(sort){\r\n        case 0:\r\n        return Number(b.difficultyLevel) - Number(a.difficultyLevel);\r\n        case 1:\r\n        return b.title.localeCompare(a.title, \"ja\", {numeric:true});\r\n        default:\r\n        case 2:\r\n          return b.exScore - a.exScore;\r\n        case 3:\r\n          return b.gap - a.gap;\r\n      }\r\n    }).filter((t:any)=>{\r\n      const pm:string[] = this.state.options.pm;\r\n      if(pm.indexOf(\"+\") === -1 && pm.indexOf(\"-\") > -1){\r\n        return t.gap <= 0;\r\n      }\r\n      if(pm.indexOf(\"+\") > -1 && pm.indexOf(\"-\") === -1){\r\n        return t.gap > 0;\r\n      }\r\n      return pm.indexOf(\"+\") > -1 && pm.indexOf(\"-\") > -1 ? true : false;\r\n    });\r\n    return isDesc ? sortedData.reverse() : sortedData;\r\n  }\r\n\r\n  cloneState = () => JSON.parse(JSON.stringify(this.state))\r\n\r\n  handleChangePage = (newPage:number):void => this.setState({page:newPage});\r\n\r\n  handleChangeRowsPerPage = (value:string):void => this.setState({page:0,rowsPerPage:+value});\r\n\r\n  render(){\r\n    const {compareFrom,compareTo,isLoading,page,rowsPerPage,options,sort,isDesc} = this.state;\r\n    if(!this.state.full){\r\n      return (null);\r\n    }\r\n    return (\r\n      <Container className=\"commonLayout\" fixed  id=\"songsVil\">\r\n        <Typography component=\"h5\" variant=\"h5\" color=\"textPrimary\" gutterBottom>\r\n          <FormattedMessage id=\"Compare.Title\"/>\r\n        </Typography>\r\n        <Grid container spacing={1} style={{margin:\"5px 0\"}}>\r\n          <Grid item xs={6}>\r\n            <FormControl style={{width:\"100%\"}}>\r\n              <InputLabel><FormattedMessage id=\"Compare.From\"/></InputLabel>\r\n              <Select value={compareFrom} onChange={this.handleCompareFromChange}>\r\n                <MenuItem value={\"26\"}>26 Rootage</MenuItem>\r\n                <MenuItem value={\"27\"}>27 HEROIC VERSE</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            <FormControl style={{width:\"100%\"}}>\r\n              <InputLabel><FormattedMessage id=\"Compare.To\"/></InputLabel>\r\n              <Select value={compareTo} onChange={this.handleCompareToChange}>\r\n                <MenuItem value={\"26\"}>26 Rootage</MenuItem>\r\n                <MenuItem value={\"27\"}>27 HEROIC VERSE</MenuItem>\r\n                <MenuItem value={\"WR\"}>WORLD RECORD</MenuItem>\r\n                <MenuItem value={\"AVERAGE\"}>KAIDEN AVERAGE</MenuItem>\r\n                <MenuItem value={\"BPI\"}>TARGET BPI</MenuItem>\r\n                <MenuItem value={\"PERCENTAGE\"}>TARGET PERCENTAGE</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container spacing={1} id=\"mainFilters\" style={{margin:\"5px 0\"}}>\r\n          <Grid item xs={4}>\r\n            <FormControl component=\"fieldset\">\r\n              <FormLabel component=\"legend\"><FormattedMessage id=\"Songs.filterByLevel\"/></FormLabel>\r\n              <FormGroup row>\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={options.level.some(t=> t === \"11\")} onChange={this.handleLevelChange(\"11\")} value=\"11\" />}\r\n                  label=\"11\"\r\n                />\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={options.level.some(t=> t === \"12\")} onChange={this.handleLevelChange(\"12\")} value=\"12\" />}\r\n                  label=\"12\"\r\n                />\r\n              </FormGroup>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={5}>\r\n            <FormControl component=\"fieldset\">\r\n              <FormLabel component=\"legend\"><FormattedMessage id=\"Songs.filterByDifficulty\"/></FormLabel>\r\n              <FormGroup row>\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={options.difficulty.some(t=> t === \"0\")} onChange={this.handleDiffChange(\"0\")} value=\"hyper\" />}\r\n                  label=\"H\"\r\n                />\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={options.difficulty.some(t=> t === \"1\")} onChange={this.handleDiffChange(\"1\")} value=\"another\" />}\r\n                  label=\"A\"\r\n                />\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={options.difficulty.some(t=> t === \"2\")} onChange={this.handleDiffChange(\"2\")} value=\"leggendaria\" />}\r\n                  label=\"\"\r\n                />\r\n              </FormGroup>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={3}>\r\n            <FormControl component=\"fieldset\">\r\n              <FormLabel component=\"legend\"><FormattedMessage id=\"Compare.filterByPlusMinus\"/></FormLabel>\r\n              <FormGroup row>\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={options.pm.some(t=> t === \"+\")} onChange={this.handlePMChange(\"+\")} value=\"+\" />}\r\n                  label=\"+\"\r\n                />\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={options.pm.some(t=> t === \"-\")} onChange={this.handlePMChange(\"-\")} value=\"-\" />}\r\n                  label=\"-\"\r\n                />\r\n              </FormGroup>\r\n            </FormControl>\r\n          </Grid>\r\n        </Grid>\r\n        <CompareTable full={this.sortedData()} isLoading={isLoading} page={page} rowsPerPage={rowsPerPage} sort={sort} isDesc={isDesc}\r\n        changeSort={this.changeSort}\r\n        handleChangeRowsPerPage={this.handleChangeRowsPerPage} handleChangePage={this.handleChangePage}/>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport Container from '@material-ui/core/Container';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\nexport default class Index extends React.Component<{},{}> {\r\n\r\n  render(){\r\n    return (\r\n      <div>\r\n        <Container className=\"commonLayout\" fixed>\r\n          <Typography component=\"h5\" variant=\"h5\" color=\"textPrimary\" gutterBottom>\r\n            <FormattedMessage id=\"Help.title\"/>\r\n          </Typography>\r\n          <ExpansionPanel>\r\n            <ExpansionPanelSummary\r\n              expandIcon={<ExpandMoreIcon />}\r\n            >\r\n              <Typography>\r\n                <FormattedMessage id=\"Help.AboutThisSite\"/>\r\n              </Typography>\r\n            </ExpansionPanelSummary>\r\n            <ExpansionPanelDetails>\r\n              <Typography display=\"block\">\r\n                <FormattedMessage id=\"Help.A.1\"/><br/>\r\n                <FormattedMessage id=\"Help.A.2\"/><br/>\r\n                <FormattedMessage id=\"Help.A.3\"/>\r\n              </Typography>\r\n            </ExpansionPanelDetails>\r\n          </ExpansionPanel>\r\n          <ExpansionPanel>\r\n            <ExpansionPanelSummary\r\n              expandIcon={<ExpandMoreIcon />}\r\n            >\r\n              <Typography>\r\n                <FormattedMessage id=\"Help.Functions\"/>\r\n              </Typography>\r\n            </ExpansionPanelSummary>\r\n            <ExpansionPanelDetails>\r\n              <Typography display=\"block\">\r\n                <FormattedMessage id=\"Help.B.1\"/><br/>\r\n                <FormattedMessage id=\"Help.B.2\"/><br/>\r\n                <FormattedMessage id=\"Help.B.3\"/><br/>\r\n                <FormattedMessage id=\"Help.B.4\"/>\r\n                <Divider style={{margin:\"10px 0\"}}/>\r\n                <FormattedMessage id=\"Help.B.5\"/>\r\n              </Typography>\r\n            </ExpansionPanelDetails>\r\n          </ExpansionPanel>\r\n          <ExpansionPanel>\r\n            <ExpansionPanelSummary\r\n              expandIcon={<ExpandMoreIcon />}\r\n            >\r\n              <Typography>\r\n                <FormattedMessage id=\"Help.HowToUse\"/>\r\n              </Typography>\r\n            </ExpansionPanelSummary>\r\n            <ExpansionPanelDetails>\r\n              <Typography display=\"block\">\r\n                <FormattedMessage id=\"Help.C.1\"/>\r\n                <Divider style={{margin:\"10px 0\"}}/>\r\n                <FormattedMessage id=\"Help.C.2\"/><br/>\r\n                <FormattedMessage id=\"Help.C.3\"/><br/>\r\n                <FormattedMessage id=\"Help.C.4\"/><br/>\r\n                <FormattedMessage id=\"Help.C.5\"/><br/>\r\n                <FormattedMessage id=\"Help.C.6\"/>\r\n                <Divider style={{margin:\"10px 0\"}}/>\r\n                <FormattedMessage id=\"Help.C.7\"/>\r\n                <Divider style={{margin:\"10px 0\"}}/>\r\n                <FormattedMessage id=\"Help.C.8\"/>\r\n              </Typography>\r\n            </ExpansionPanelDetails>\r\n          </ExpansionPanel>\r\n          <ExpansionPanel>\r\n            <ExpansionPanelSummary\r\n              expandIcon={<ExpandMoreIcon />}\r\n            >\r\n              <Typography>\r\n                <FormattedMessage id=\"Help.Settings\"/>\r\n              </Typography>\r\n            </ExpansionPanelSummary>\r\n            <ExpansionPanelDetails>\r\n              <Typography display=\"block\">\r\n                <FormattedMessage id=\"Help.D.1\"/><br/>\r\n                <FormattedMessage id=\"Help.D.2\"/><br/>\r\n                <FormattedMessage id=\"Help.D.3\"/><br/>\r\n                <FormattedMessage id=\"Help.D.4\"/>\r\n              </Typography>\r\n            </ExpansionPanelDetails>\r\n          </ExpansionPanel>\r\n          <ExpansionPanel>\r\n            <ExpansionPanelSummary\r\n              expandIcon={<ExpandMoreIcon />}\r\n            >\r\n              <Typography>\r\n                <FormattedMessage id=\"Help.Contact\"/>\r\n              </Typography>\r\n            </ExpansionPanelSummary>\r\n            <ExpansionPanelDetails>\r\n              <Typography display=\"block\">\r\n                <FormattedMessage id=\"Help.E.1\"/>\r\n              </Typography>\r\n            </ExpansionPanelDetails>\r\n          </ExpansionPanel>\r\n          <ExpansionPanel>\r\n            <ExpansionPanelSummary\r\n              expandIcon={<ExpandMoreIcon />}\r\n            >\r\n              <Typography>\r\n                <FormattedMessage id=\"Help.Requirements\"/>\r\n              </Typography>\r\n            </ExpansionPanelSummary>\r\n            <ExpansionPanelDetails>\r\n              <Typography display=\"block\">\r\n                <FormattedMessage id=\"Help.F.1\"/>\r\n                <Divider style={{margin:\"10px 0\"}}/>\r\n                <FormattedMessage id=\"Help.F.2\"/><br/>\r\n                <FormattedMessage id=\"Help.F.3\"/>\r\n              </Typography>\r\n            </ExpansionPanelDetails>\r\n          </ExpansionPanel>\r\n          <ExpansionPanel>\r\n            <ExpansionPanelSummary\r\n              expandIcon={<ExpandMoreIcon />}\r\n            >\r\n              <Typography>\r\n                <FormattedMessage id=\"Help.Licenses\"/>\r\n              </Typography>\r\n            </ExpansionPanelSummary>\r\n            <ExpansionPanelDetails>\r\n              <Typography display=\"block\">\r\n\r\n                <Divider style={{margin:\"10px 0\"}}/>\r\n                material-ui : Copyright (c) 2014 Call-Em-All <a href=\"https://opensource.org/licenses/mit-license.php\" target=\"_blank\" rel=\"noreferrer noopener\">The MIT License (MIT)</a><br/>\r\n                Dexie.js : Copyright (c) dfahlander <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" target=\"_blank\" rel=\"noreferrer noopener\">Apache License</a><br/>\r\n                fast-deep-equal : Copyright (c) epoberezkin MIT<br/>\r\n                moment,moment-timezone : Copyright (c) JS Foundation and other contributors MIT<br/>\r\n                react : Copyright (c) Facebook MIT<br/>\r\n                react-dom : Copyright (c) 2017 Tylor Steinberger MIT<br/>\r\n                react-router : Copyright (c) React Training 2016-2018 MIT<br/>\r\n                react-intl : Copyright (c) Yahoo! BSD License<br/>\r\n                recharts : Copyright (c) recharts MIT<br/>\r\n                typescript : Copyright (c) Microsoft Apache License<br/>\r\n                unstated : Copyright (c) 2018-present James Kyle MIT<br/>\r\n              </Typography>\r\n            </ExpansionPanelDetails>\r\n          </ExpansionPanel>\r\n          <ExpansionPanel>\r\n            <ExpansionPanelSummary\r\n              expandIcon={<ExpandMoreIcon />}\r\n            >\r\n              <Typography>\r\n                Updates\r\n              </Typography>\r\n            </ExpansionPanelSummary>\r\n            <ExpansionPanelDetails>\r\n              <Typography display=\"block\">\r\n                <p>2019/11/08 : v0.0.0.4 BPI,DP()</p>\r\n                <p>2019/11/07 : v0.0.0.3 ,,1,,</p>\r\n                <p>2019/11/06 : v0.0.0.2 (!)</p>\r\n                <p>2019/11/06 : v0.0.0.1 </p>\r\n              </Typography>\r\n            </ExpansionPanelDetails>\r\n          </ExpansionPanel>\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","const ja = {\r\n  \"Top.Title\": \"BPIManager\",\r\n  \"GlobalNav.Home\": \"\",\r\n  \"GlobalNav.Data\": \"\",\r\n  \"GlobalNav.FavoriteSongs\": \"\",\r\n  \"GlobalNav.SongList\": \"\",\r\n  \"GlobalNav.unregisteredSongs\": \"\",\r\n  \"GlobalNav.Statistics\": \"\",\r\n  \"GlobalNav.compare\": \"\",\r\n  \"GlobalNav.Settings\": \"\",\r\n  \"GlobalNav.Help\": \"\",\r\n  \"Index.heroText\": \"Webbeatmania IIDXBPI\",\r\n  \"Index.importButton\" : \"\",\r\n  \"Index.helpButton\" : \"\",\r\n  \"Index.notes1\" : \"beatmania\",\r\n  \"Index.notes2\" : \"norimisoBPIZUBUBPICL\",\r\n  \"Data.add\" : \"\",\r\n  \"Data.infoBulk\" : \"e-AMUSEMENTCSV\",\r\n  \"Data.howToBulk1\" : \" \",\r\n  \"Data.CSVURL\" : \"\",\r\n  \"Data.howToBulk2\" : \"CSV\",\r\n  \"Data.Execute\": \"\",\r\n  \"Data.notPremium1\": \"\",\r\n  \"Data.Success\":\"\",\r\n  \"Data.Failed\":\"\",\r\n  \"Data.edit\" : \"\",\r\n  \"Data.howToEdit\" : \":\",\r\n  \"Data.howToEdit1\" : \"\",\r\n  \"Data.howToEdit2\" : \"\",\r\n  \"Data.howToEdit3\" : \"\",\r\n  \"Data.howToEdit4\" : \"That's all!\",\r\n  \"Songs.title\":\"\",\r\n  \"Songs.filterByLevel\":\"\",\r\n  \"Songs.filterByDifficulty\":\"\",\r\n  \"Songs.detailedFilter\":\"\",\r\n  \"Songs.filterByName\":\"\",\r\n  \"Songs.filterByFavorite\":\"\",\r\n  \"Songs.mode\":\"\",\r\n  \"Songs.mode0\":\"BPI\",\r\n  \"Songs.mode1\":\"A\",\r\n  \"Songs.mode2\":\"AA\",\r\n  \"Songs.mode3\":\"AAA\",\r\n  \"Songs.mode4\":\"MAX\",\r\n  \"Songs.mode5\":\"HARD CLEAR\",\r\n  \"Songs.mode6\":\"EX-HARD CLEAR\",\r\n  \"Songs.mode7\":\"FULLCOMBO\",\r\n  \"Songs.legend\":\"\",\r\n  \"Songs.updatedToday\":\"\",\r\n  \"Details.SaveButton\":\"\",\r\n  \"Details.typeNewScore\":\"\",\r\n  \"Details.FavButton\":\"\",\r\n  \"Details.FavButtonRemove\":\"\",\r\n  \"Details.FavButtonRemoved\":\"\",\r\n  \"Details.FavButtonAdded\":\"\",\r\n  \"Details.Graph\":\"\",\r\n  \"Details.Details\":\"\",\r\n  \"Details.Diffs\":\"\",\r\n  \"Details.ErrorIIDXInfo\":\"IIDXInfo12\",\r\n  \"Common.Tweet\":\"\",\r\n  \"SongDetail.SongDetailHead\":\"\",\r\n  \"SongDetail.Notes\":\"\",\r\n  \"SongDetail.WorldRecord\":\"\",\r\n  \"SongDetail.Average\":\"\",\r\n  \"SongDetail.You\":\"\",\r\n  \"SongDetail.Version\":\"\",\r\n  \"SongDetail.ScoreDetailHead\":\"\",\r\n  \"SongDetail.ClearState\":\"\",\r\n  \"SongDetail.MissCount\":\"\",\r\n  \"SongDetail.LastPlayed\":\"\",\r\n  \"SongDetail.ScoreDetails\":\"\",\r\n  \"SongDiffs.Target\":\"\",\r\n  \"SongDiffs.WithinSameVersion\":\"\",\r\n  \"SongDiffs.EachVersion\":\"\",\r\n  \"Favorites.Title\":\"\",\r\n  \"NotPlayed.Title\":\"\",\r\n  \"Stats.title\":\"\",\r\n  \"Stats.TotalBPI\":\"BPI\",\r\n  \"Stats.EachDay\":\"/BPI\",\r\n  \"Stats.UpdatedSongs\":\"\",\r\n  \"Stats.UpdatedSum\":\"\",\r\n  \"Stats.Average\":\"BPI\",\r\n  \"Stats.LethalWeapon\":\"\",\r\n  \"Stats.PossibleToGetBetter\":\"\",\r\n  \"Stats.Distribution\":\"BPI\",\r\n  \"Compare.Title\":\"\",\r\n  \"Compare.From\":\"\",\r\n  \"Compare.To\":\"\",\r\n  \"Compare.filterByPlusMinus\":\"\",\r\n  \"Settings.title\":\"\",\r\n  \"Settings.language\":\"\",\r\n  \"Settings.theme\":\"\",\r\n  \"Settings.dataStore\":\"\",\r\n  \"Settings.delete\":\"\",\r\n  \"Settings.noteLang\":\"UI\",\r\n  \"Settings.noteMes1\":\"\",\r\n  \"Settings.inaccurateMes\":\"1,BPI\",\r\n  \"Settings.Update\":\"\",\r\n  \"Settings.UpdateResourcePacks\":\"\",\r\n  \"Settings.currentVersion\":\":\",\r\n  \"Settings.updateWarning\":\"\",\r\n  \"Settings.dataClear\":\"\",\r\n  \"Settings.DPMode\":\"DP\",\r\n  \"Settings.dpDescription\":\"DP\",\r\n  \"Help.title\":\"\",\r\n  \"Help.AboutThisSite\":\"\",\r\n  \"Help.A.1\":\"BPIManagerZUBUBPICL1112BPI\",\r\n  \"Help.A.2\":\"BPICL\",\r\n  \"Help.A.3\":\"\",\r\n  \"Help.Functions\":\"\",\r\n  \"Help.B.1\":\"BPIManager\",\r\n  \"Help.B.2\":\"1112BPI\",\r\n  \"Help.B.3\":\"1\",\r\n  \"Help.B.4\":\"BPIBPI\",\r\n  \"Help.B.5\":\"\",\r\n  \"Help.HowToUse\":\"\",\r\n  \"Help.C.1\":\"CSV\",\r\n  \"Help.C.2\":\"\",\r\n  \"Help.C.3\":\"BPIEX\",\r\n  \"Help.C.4\":\"\",\r\n  \"Help.C.5\":\"\",\r\n  \"Help.C.6\":\"\",\r\n  \"Help.C.7\":\"\",\r\n  \"Help.C.8\":\"1\",\r\n  \"Help.Settings\":\"\",\r\n  \"Help.D.1\":\"\",\r\n  \"Help.D.2\":\"\",\r\n  \"Help.D.3\":\"26 Rootage27 HEROIC VERSE\",\r\n  \"Help.D.4\":\"1\",\r\n  \"Help.Contact\":\"\",\r\n  \"Help.E.1\":\"Twitter(@BPIManager)\",\r\n  \"Help.Requirements\":\"\",\r\n  \"Help.F.1\":\"\",\r\n  \"Help.F.2\":\"IndexedDB+)\",\r\n  \"Help.F.3\":\"fetch API\",\r\n  \"Help.Licenses\":\"\",\r\n  \"Settings.resetWarning\":\"\",\r\n  \"Settings.DeleteExec\":\"\",\r\n  \"Settings.DeleteDialogBody\":\"\",\r\n  \"Settings.DeleteDialogBody2\":\":\",\r\n  \"Settings.MyGoalBPI\":\"BPI\",\r\n  \"Settings.MyGoalPercentage\":\"\",\r\n  \"Settings.MyGoalDescription\":\"BPI/EX\"\r\n};\r\n\r\nexport default ja;\r\n","const ja = {\r\n  \"Top.Title\": \"BPIManager\",\r\n  \"GlobalNav.Home\": \"Home\",\r\n  \"GlobalNav.Data\": \"Data\",\r\n  \"GlobalNav.FavoriteSongs\": \"Favorite Songs\",\r\n  \"GlobalNav.SongList\": \"Songs\",\r\n  \"GlobalNav.unregisteredSongs\": \"Not played yet\",\r\n  \"GlobalNav.Statistics\": \"Statistics\",\r\n  \"GlobalNav.compare\": \"Compare\",\r\n  \"GlobalNav.Settings\": \"Settings\",\r\n  \"GlobalNav.Help\": \"Help\",\r\n  \"Index.heroText\": \"Easily manage your scores of beatmania IIDX and visualize as BPI, in Web.\",\r\n  \"Index.importButton\" : \"Try it out!\",\r\n  \"Index.helpButton\" : \"Read documents\",\r\n  \"Index.notes1\" : \"beatmania is the trademark registered by Konami Degital Entertainment Co., Ltd.\",\r\n  \"Index.notes2\" : \"This tool was affected by both of BPI which was invented by norimiso and BPICL which was released by ZUBU.\",\r\n  \"Data.add\" : \"Import score data\",\r\n  \"Data.infoBulk\" : \"If you've been subscribed to e-AMUSEMENT Premium Course, you can import all your scores in bulk by importing CSV from official IIDX website.\",\r\n  \"Data.howToBulk1\" : \"Just access \",\r\n  \"Data.CSVURL\" : \"HERE\",\r\n  \"Data.howToBulk2\" : \", copy displayed text and then paste it to form shown below.\",\r\n  \"Data.Execute\": \"Import\",\r\n  \"Data.notPremium1\": \"If you cannot use the way above, so please fill each songs in individually.\",\r\n  \"Data.Success\":\"Successfully imported.\",\r\n  \"Data.Failed\":\"Failed to import scores.\",\r\n  \"Data.edit\" : \"Edit scores on your own\",\r\n  \"Data.howToEdit\" : \"You can edit the score of each songs by detailed song information screen.\",\r\n  \"Data.howToEdit1\" : \"Access to \\\"songs not done yet\\\" page and search by the song name you want to edit.\",\r\n  \"Data.howToEdit2\" : \"Search results will be shown, then click the song name.\",\r\n  \"Data.howToEdit3\" : \"You can see detailed song information screen. Type your score and press save button.\",\r\n  \"Data.howToEdit4\" : \"That's all!\",\r\n  \"Songs.title\":\"Songs\",\r\n  \"Songs.filterByLevel\":\"Level\",\r\n  \"Songs.filterByDifficulty\":\"Difficulty\",\r\n  \"Songs.detailedFilter\":\"Configure\",\r\n  \"Songs.filterByName\":\"Filter by song title\",\r\n  \"Songs.filterByFavorite\":\"Favorited\",\r\n  \"Songs.mode\":\"Aiming for...\",\r\n  \"Songs.mode0\":\"Higher BPI\",\r\n  \"Songs.mode1\":\"new A\",\r\n  \"Songs.mode2\":\"new AA\",\r\n  \"Songs.mode3\":\"new AAA\",\r\n  \"Songs.mode4\":\"new MAX\",\r\n  \"Songs.mode5\":\"new HARD CLEAR\",\r\n  \"Songs.mode6\":\"new EX-HARD CLEAR\",\r\n  \"Songs.mode7\":\"new FULLCOMBO\",\r\n  \"Songs.legend\":\"To see legends and usage, click here and go to help\",\r\n  \"Songs.updatedToday\":\"Only displays the scores updated today\",\r\n  \"Details.SaveButton\":\"Save\",\r\n  \"Details.typeNewScore\":\"My Record\",\r\n  \"Details.FavButton\":\"Favorite\",\r\n  \"Details.FavButtonRemove\":\"Delete favorite\",\r\n  \"Details.FavButtonRemoved\":\"Successfully deleted.\",\r\n  \"Details.FavButtonAdded\":\"Successfully added.\",\r\n  \"Details.Graph\":\"Graph\",\r\n  \"Details.Details\":\"Details\",\r\n  \"Details.Diffs\":\"Diffs\",\r\n  \"Details.ErrorIIDXInfo\":\"IIDXInfo is only available for level-12.\",\r\n  \"Common.Tweet\":\"Tweet\",\r\n  \"SongDetail.SongDetailHead\":\"Song\",\r\n  \"SongDetail.Notes\":\"Notes\",\r\n  \"SongDetail.WorldRecord\":\"World Record\",\r\n  \"SongDetail.Average\":\"Average\",\r\n  \"SongDetail.You\":\"You\",\r\n  \"SongDetail.Version\":\"Version\",\r\n  \"SongDetail.ScoreDetailHead\":\"Play Status\",\r\n  \"SongDiffs.Target\":\"Datasets\",\r\n  \"SongDiffs.WithinSameVersion\":\"Within the same version\",\r\n  \"SongDiffs.EachVersion\":\"Across versions\",\r\n  \"SongDetail.ClearState\":\"Clear State\",\r\n  \"SongDetail.MissCount\":\"Miss Count\",\r\n  \"SongDetail.LastPlayed\":\"Last Played\",\r\n  \"SongDetail.ScoreDetails\":\"Detail\",\r\n  \"Favorites.Title\":\"Favorites\",\r\n  \"NotPlayed.Title\":\"Not Played yet\",\r\n  \"Stats.title\":\"Statistics\",\r\n  \"Stats.TotalBPI\":\"Total BPI\",\r\n  \"Stats.EachDay\":\"Total and BPI per day\",\r\n  \"Stats.UpdatedSongs\":\"New records\",\r\n  \"Stats.UpdatedSum\":\"The total of updated songs\",\r\n  \"Stats.Average\":\"Average BPI\",\r\n  \"Stats.PossibleToGetBetter\":\"Songs Possible to Get better\",\r\n  \"Stats.Distribution\":\"BPI Distributions by Lv.\",\r\n  \"Compare.Title\":\"Compare\",\r\n  \"Compare.From\":\"Data source\",\r\n  \"Compare.To\":\"Compare with\",\r\n  \"Compare.filterByPlusMinus\":\"P/M\",\r\n  \"Settings.title\":\"Settings\",\r\n  \"Settings.language\":\"Language\",\r\n  \"Settings.dataStore\":\"Version\",\r\n  \"Settings.delete\":\"Delete all data\",\r\n  \"Settings.theme\":\"Theme\",\r\n  \"Settings.dataClear\":\"Clear database\",\r\n  \"Settings.DPMode\":\"Double Play Mode\",\r\n  \"Settings.dpDescription\":\"When turning on this function you can register double play scores.\",\r\n  \"Settings.noteLang\":\"Select language you want to use. Please contribute to improve the quality of translation.(contact @BPIManager)\",\r\n  \"Settings.noteMes1\":\"Registering scores in older IIDX makes you able to compare them across versions.\",\r\n  \"Settings.inaccurateMes\":\"Please note that since BPI in older IIDX versions will also be calculated with the latest WR and average scores so they would be rather inaccurate than them at the time.\",\r\n  \"Settings.Update\":\"Update\",\r\n  \"Settings.UpdateResourcePacks\":\"Update definition file\",\r\n  \"Settings.currentVersion\":\"Current version of the definition data:\",\r\n  \"Settings.updateWarning\":\"This process may take a few minutes.\",\r\n  \"Help.title\":\"Documents\",\r\n  \"Help.AboutThisSite\":\"About this site\",\r\n  \"Help.A.1\":\"BPIManager is a tool developed as a clone of BPICL(which has been released from ZUBU), which enables users to manage their scores of IIDX, especially Lv11 and Lv12.\",\r\n  \"Help.A.2\":\"The development goal of this tool is to add unique functions which helps facilitate breaking records, after cloning functions of BPICL as possible.\",\r\n  \"Help.A.3\":\"*This tool is intended for being added on home screen on smartphones.\",\r\n  \"Help.Functions\":\"About functions\",\r\n  \"Help.B.1\":\"By using BPIManager users can do as follows:\",\r\n  \"Help.B.2\":\"1. Saving and checking scores, BPI and etc. of Lv11 and Lv12 songs.\",\r\n  \"Help.B.3\":\"2. Comparing scores across/within versions or with either World record or Kaiden average.\",\r\n  \"Help.B.4\":\"3. Showing statistics like BPIs average per day or BPI distributions.\",\r\n  \"Help.B.5\":\"If you want any other functions please feel free to contact me.\",\r\n  \"Help.HowToUse\":\"How to use\",\r\n  \"Help.C.1\":\"To add scores in bulk please go to \\\"Data\\\" and import CSV from official IIDX website, or go to \\\"Not played yet\\\" and save scores individually.\",\r\n  \"Help.C.2\":\"Scores already saved can be checked in \\\"Songs\\\". By clicking song title you can check graphs, details and so on.\",\r\n  \"Help.C.3\":\"1. In \\\"Graph\\\" tab you can see EXScores corresponding to each BPIs.\",\r\n  \"Help.C.4\":\"2. In \\\"Details\\\" tab you can check your own play data and information about the song.\",\r\n  \"Help.C.5\":\"3. In \\\"Diffs\\\" tab, the scores of the song in the past series and the transitions of the your best score in the current version will be displayed.\",\r\n  \"Help.C.6\":\"4. Songs you need to remember can be registered as favorites by clicking the star icon. Songs favorited can be checked in \\\"Favorites\\\".\",\r\n  \"Help.C.7\":\"In \\\"Not played yet\\\" the list of songs which haven't been played in the current version will be displayed.\",\r\n  \"Help.C.8\":\"In \\\"Compare\\\", you can compare scores between series, or with World record or Kaiden average.\",\r\n  \"Help.Settings\":\"About configure\",\r\n  \"Help.D.1\":\"In \\\"Settings\\\" you can change configures in this tool.\",\r\n  \"Help.D.2\":\"By changing \\\"Language\\\" you can change the language which will be used in this tool.\",\r\n  \"Help.D.3\":\"By changing \\\"Version\\\" you can change the destination of save data. Currently only 26 Rootage and 27 HEROIC VERSE available.\",\r\n  \"Help.D.4\":\"By Clicking \\\"Update definition file\\\" you can update the definition data such as World records, Kaiden averages, etc. Please refer to the description for updating definition data.\",\r\n  \"Help.Contact\":\"Contact\",\r\n  \"Help.E.1\":\"If you found bugs or have requests,complaint or anything else please contact me(@BPIManager).\",\r\n  \"Help.Requirements\":\"Requirements\",\r\n  \"Help.F.1\":\"To use this tool you have to satisfy the conditions below.\",\r\n  \"Help.F.2\":\"IndexedDB available\",\r\n  \"Help.F.3\":\"fetch API available\",\r\n  \"Help.Licenses\":\"Licenses\",\r\n  \"Settings.resetWarning\":\"Delete all data stored in the selected database. WARNING: BE AWARE THAT THIS ACTION CANNOT BE UNDONE.\",\r\n  \"Settings.DeleteExec\":\"Execute\",\r\n  \"Settings.DeleteDialogBody\":\"You are about to delete all scores stored in the selected database.\",\r\n  \"Settings.DeleteDialogBody2\":\"This action cannot be undone. Really do you want to continue to delete this data :\",\r\n  \"Settings.MyGoalBPI\":\"Target BPI\",\r\n  \"Settings.MyGoalPercentage\":\"Target Percentage\",\r\n  \"Settings.MyGoalDescription\":\"Setting values above makes it possible to compare with EX score corresponding to them in Compare screen. \"\r\n};\r\n\r\nexport default ja;\r\n","import * as React from 'react';\r\nimport AppBar from \"../view/components/header/appBar\";\r\nimport { IntlProvider } from 'react-intl'\r\nimport Index from \"../view/pages\";\r\nimport Data from \"../view/pages/data\";\r\nimport Songs from \"../view/pages/songs\";\r\nimport Favorite from \"../view/pages/favorites\";\r\nimport NotPlayed from \"../view/pages/notPlayed\";\r\nimport Stats from \"../view/pages/stats\";\r\nimport Settings from \"../view/pages/settings\";\r\nimport Compare from \"../view/pages/compare\";\r\nimport Help from \"../view/pages/help\";\r\nimport {BrowserRouter, Route} from \"react-router-dom\";\r\n\r\n\r\n//locale data\r\n\r\nimport ja  from \"../i18n/ja\";\r\nimport en from \"../i18n/en\";\r\nimport GlobalContainer from '../components/context/global';\r\nimport { Subscribe, Provider } from 'unstated';\r\n\r\n//\r\nexport default class Router extends React.Component<{},{}> {\r\n\r\n  render(){\r\n    return (\r\n      <Provider>\r\n        <Subscribe to={[GlobalContainer]}>\r\n          {global =>{\r\n            return (<IntlProvider\r\n              locale={global.state.lang}\r\n              messages={global.state.lang === \"ja\" ? ja : en}\r\n            >\r\n              <BrowserRouter>\r\n                <AppBar global={global}/>\r\n                <Route path=\"/\" exact component={Index}/>\r\n                <Route path=\"/data\" exact render={_props=><Data global={global}/>}/>\r\n                <Route path=\"/songs\" exact component={Songs}/>\r\n                <Route path=\"/favorite\" exact component={Favorite}/>\r\n                <Route path=\"/notPlayed\" exact component={NotPlayed}/>\r\n                <Route path=\"/stats\" exact component={Stats}/>\r\n                <Route path=\"/compare\" exact component={Compare}/>\r\n                <Route path=\"/settings\" exact render={_props=><Settings global={global}/>}/>\r\n                <Route path=\"/help\" exact component={Help}/>\r\n              </BrowserRouter>\r\n            </IntlProvider>\r\n          )}}\r\n        </Subscribe>\r\n      </Provider>\r\n    );\r\n  }\r\n\r\n}\r\n","import * as React from 'react';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport timeFormatter from \"../common/timeFormatter\";\r\nimport storageWrapper,{songsDB} from \"../indexedDB\";\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\n\r\nexport default class Initialize extends React.Component<{},{show:boolean,error:boolean,errorMessage:string}>{\r\n  storage:any;\r\n  songsDB:any;\r\n\r\n  constructor(props:Object){\r\n    super(props);\r\n    this.storage = new storageWrapper();\r\n    this.songsDB = new songsDB();\r\n    this.state = {\r\n      show : true,\r\n      error:false,\r\n      errorMessage:\"\"\r\n    }\r\n  }\r\n\r\n  wait = (msec:number = 10)=> {\r\n    return new Promise(resolve=>{\r\n      setTimeout(resolve, msec)\r\n    });\r\n  }\r\n\r\n  async componentDidMount(){\r\n    try{\r\n      const songsAvailable:string[] = await this.songsDB.getAll();\r\n      if(songsAvailable.length > 0){\r\n        return this.setState({show:false});\r\n      }\r\n      const now = timeFormatter(0);\r\n      const csv = await fetch(\"https://files.poyashi.me/json/songs.json?t=initialized\").then(t=>t.json());\r\n      for(let i=0;i < csv.body.length;++i){\r\n        await this.songsDB.setItem(Object.assign(csv[\"body\"][i],{\r\n          isFavorited:false,\r\n          isCreated:false,\r\n          updatedAt:now,\r\n        }));\r\n        this.wait(3);\r\n      }\r\n      localStorage.setItem(\"isSingle\",\"1\");\r\n      localStorage.setItem(\"lastDefFileVer\",csv.version);\r\n      return this.setState({show:false});\r\n    }catch(e){\r\n      console.log(e);\r\n      return this.setState({error:true,errorMessage:e.message || \"\"})\r\n    }\r\n  }\r\n\r\n  render(){\r\n    if(!this.state.show){\r\n      return (null);\r\n    }\r\n    if(this.state.error){\r\n      return (<div id=\"overlayLayout\">\r\n        <div>\r\n          <WarningIcon/>\r\n        </div>\r\n        <div>\r\n          <p>{this.state.errorMessage}</p>\r\n        </div>\r\n      </div>);\r\n    }\r\n    return (\r\n      <div id=\"overlayLayout\">\r\n        <div>\r\n          <CircularProgress/>\r\n        </div>\r\n        <div>\r\n          <p>Loading essential components...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n","import { createMuiTheme } from \"@material-ui/core\";\r\n\r\nexport const theme = createMuiTheme({\r\n  palette: {\r\n    type: 'dark',\r\n    primary: {\r\n      50: '#dedede',\r\n      100: '#808080',\r\n      200: '#5e5e5e',\r\n      300: '#4b4b4b',\r\n      400: '#434343',\r\n      500: '#3a3a3a',\r\n      600: '#2d2d2d',\r\n      700: '#272727',\r\n      800: '#1c1c1c',\r\n      900: '#111111',\r\n      A100: '#cecece',\r\n      A200: '#949494',\r\n      A400: '#6f6f6f',\r\n      A700: '#4c4c4c',\r\n    },\r\n    secondary: {\r\n      50: '#d0e0e3',\r\n      100: '#a2c4c9',\r\n      200: '#76a5af',\r\n      300: '#648c95',\r\n      400: '#45818e',\r\n      500: '#396872',\r\n      600: '#2a5059',\r\n      700: '#23434a',\r\n      800: '#1f353a',\r\n      900: '#0c343d',\r\n      A100: '#a2c4c9',\r\n      A200: '#76a5af',\r\n      A400: '#45818e',\r\n      A700: '#205966',\r\n    },\r\n  },\r\n\r\n  'breakpoints': {\r\n    'keys': [\r\n      'xs',\r\n      'sm',\r\n      'md',\r\n      'lg',\r\n      'xl',\r\n    ],\r\n    'values': {\r\n      'xs': 360,\r\n      'sm': 768,\r\n      'md': 992,\r\n      'lg': 1400,\r\n      'xl': 1800,\r\n    },\r\n  },\r\n\r\n  overrides: {\r\n    MuiButton: {\r\n      root: {\r\n        textTransform: 'none',\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nexport default theme;\r\n","import { createMuiTheme } from \"@material-ui/core\";\r\n\r\nexport const theme = createMuiTheme({\r\n  palette: {\r\n    type: 'light',\r\n    primary: {\r\n      50: '#dedede',\r\n      100: '#808080',\r\n      200: '#5e5e5e',\r\n      300: '#4b4b4b',\r\n      400: '#434343',\r\n      500: '#3a3a3a',\r\n      600: '#2d2d2d',\r\n      700: '#272727',\r\n      800: '#1c1c1c',\r\n      900: '#111111',\r\n      A100: '#cecece',\r\n      A200: '#949494',\r\n      A400: '#6f6f6f',\r\n      A700: '#4c4c4c',\r\n    },\r\n    secondary: {\r\n      50: '#d0e0e3',\r\n      100: '#a2c4c9',\r\n      200: '#76a5af',\r\n      300: '#648c95',\r\n      400: '#45818e',\r\n      500: '#396872',\r\n      600: '#2a5059',\r\n      700: '#23434a',\r\n      800: '#1f353a',\r\n      900: '#0c343d',\r\n      A100: '#a2c4c9',\r\n      A200: '#76a5af',\r\n      A400: '#45818e',\r\n      A700: '#205966',\r\n    },\r\n  },\r\n\r\n  'breakpoints': {\r\n    'keys': [\r\n      'xs',\r\n      'sm',\r\n      'md',\r\n      'lg',\r\n      'xl',\r\n    ],\r\n    'values': {\r\n      'xs': 360,\r\n      'sm': 768,\r\n      'md': 992,\r\n      'lg': 1400,\r\n      'xl': 1800,\r\n    },\r\n  },\r\n\r\n  overrides: {\r\n    MuiButton: {\r\n      root: {\r\n        textTransform: 'none',\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nexport default theme;\r\n","import { Component } from \"react\";\r\nimport React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\n\r\nexport default class ReloadModal extends Component {\r\n  state = {\r\n    show: false\r\n  };\r\n  componentDidMount() {\r\n    window.addEventListener(\"newContentAvailable\", () => {\r\n      this.setState({\r\n        show: true\r\n      });\r\n    });\r\n  }\r\n\r\n  onUpdate = () => {\r\n    window.location.reload(true);\r\n  };\r\n\r\n  handleClose = () =>{\r\n    this.setState({show:false});\r\n  }\r\n\r\n  render() {\r\n    const {show} = this.state;\r\n    if (!show) {\r\n      return null;\r\n    }\r\n    return (\r\n    <div>\r\n      <Dialog\r\n        open={show}\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">{\"\"}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            <br/>\r\n            \r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={this.handleClose} color=\"primary\">\r\n            \r\n          </Button>\r\n          <Button onClick={this.onUpdate} color=\"primary\" autoFocus>\r\n            \r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n    );\r\n  }\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n              const event = new Event(\"newContentAvailable\");\n              window.dispatchEvent(event);\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n","import * as React from 'react';\nimport \"./styles/App.css\";\nimport Router from \"./route\";\nimport Initialize from \"./components/initialize\";\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Dark from './themes/dark';\nimport Light from './themes/light';\nimport ReloadModal from './view/components/update';\nimport { Provider, Subscribe } from 'unstated';\nimport GlobalContainer from './components/context/global';\n\nexport default function App() {\n\n  document.title = \"BPI Manager\";\n  return (\n    <Provider>\n      <Subscribe to={[GlobalContainer]}>\n        {global =>{\n          return (\n            <ThemeProvider theme={global.state.theme === \"dark\" ? Dark : Light}>\n              <CssBaseline />\n              <Initialize/>\n              <div id={global.state.theme === \"dark\" ? \"__dark\" : \"__light\"}>\n                <Router/>\n              </div>\n              <ReloadModal />\n            </ThemeProvider>)\n        }}\n      </Subscribe>\n    </Provider>\n  );\n\n}\n"],"sourceRoot":""}