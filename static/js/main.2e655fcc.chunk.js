(this.webpackJsonpbpimanager=this.webpackJsonpbpimanager||[]).push([[0],{308:function(e,t,a){e.exports=a(499)},313:function(e,t,a){},314:function(e,t,a){},499:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(21),i=(a(313),a(314),a(11)),o=a(10),c=a(13),s=a(14),u=a(15),m=a(37),d=a(539),f=a(540),p=a(79),h=a(541),g=a(242),v=a.n(g),E=a(538),S=a(543),b=a(545),y=a(548),w=a(501),x=a(546),D=a(547),k=a(244),O=a.n(k),C=a(246),j=a.n(C),P=a(249),A=a.n(P),I=a(250),N=a.n(I),B=a(245),L=a.n(B),T=a(247),M=a.n(T),R=a(134),F=a.n(R),H=a(248),G=a.n(H),U=a(542),V=a(500),W=a(3),Y=a(4),X=a(536),z=a(236),_=a.n(z),J=a(238),K=a.n(J),q=a(239),Q=a.n(q),Z=a(533),$=a(534),ee=a(573),te=a(535),ae=a(237),ne=a.n(ae),re=a(240),le={success:_.a,warning:ne.a,error:K.a,info:Q.a},ie=Object(re.a)((function(e){return{success:{backgroundColor:Z.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:$.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function oe(e){var t=ie(),a=e.className,n=e.message,l=e.onClose,i=e.variant,o=Object(W.a)(e,["className","message","onClose","variant"]),c=le[i];return r.a.createElement(te.a,Object.assign({className:Object(Y.a)(t[i],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(c,{className:Object(Y.a)(t.icon,t.iconVariant)}),n),action:[r.a.createElement(X.a,{onClick:l,color:"inherit",size:"small"},"Ok")]},o))}function ce(e){return e.open?r.a.createElement("div",null,r.a.createElement(ee.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:e.open,autoHideDuration:e.autoHideDuration?e.autoHideDuration:2e3,onClose:e.handleClose},r.a.createElement(oe,{onClose:e.handleClose,variant:e.variant,message:e.message}))):null}function se(e){var t=e.children,a=e.window,n=Object(E.a)({target:a?a():void 0});return r.a.createElement(V.a,{appear:!1,direction:"down",in:!n},t)}var ue=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).toggleNav=function(){return a.setState({isOpen:!a.state.isOpen})},a.toggleErrorSnack=function(){return a.setState({errorSnack:!a.state.errorSnack})},a.state={isOpen:!1,errorSnack:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state.isOpen;return r.a.createElement(r.a.Fragment,null,r.a.createElement(se,this.props,r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement(h.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:function(){return e.props.global.state.cannotMove?e.toggleErrorSnack():e.toggleNav()}},r.a.createElement(v.a,null)),r.a.createElement(p.a,{variant:"h6"},r.a.createElement(U.a,{id:"Top.Title"}))))),r.a.createElement(f.a,null),r.a.createElement(S.a,{open:t,onClose:this.toggleNav},r.a.createElement(b.a,{style:{width:"230px"}},r.a.createElement(m.b,{to:"/",className:"forceTextColorBlack",onClick:this.toggleNav},r.a.createElement(w.a,{button:!0},r.a.createElement(x.a,null,r.a.createElement(O.a,null)),r.a.createElement(D.a,{primary:r.a.createElement(U.a,{id:"GlobalNav.Home"})}))),r.a.createElement(m.b,{to:"/data",className:"forceTextColorBlack",onClick:this.toggleNav},r.a.createElement(w.a,{button:!0},r.a.createElement(x.a,null,r.a.createElement(L.a,null)),r.a.createElement(D.a,{primary:r.a.createElement(U.a,{id:"GlobalNav.Data"})}))),r.a.createElement(m.b,{to:"/favorite",className:"forceTextColorBlack",onClick:this.toggleNav},r.a.createElement(w.a,{button:!0},r.a.createElement(x.a,null,r.a.createElement(F.a,null)),r.a.createElement(D.a,{primary:r.a.createElement(U.a,{id:"GlobalNav.FavoriteSongs"})}))),r.a.createElement(m.b,{to:"/songs",className:"forceTextColorBlack",onClick:this.toggleNav},r.a.createElement(w.a,{button:!0},r.a.createElement(x.a,null,r.a.createElement(j.a,null)),r.a.createElement(D.a,{primary:r.a.createElement(U.a,{id:"GlobalNav.SongList"})}))),r.a.createElement(m.b,{to:"/notPlayed",className:"forceTextColorBlack",onClick:this.toggleNav},r.a.createElement(w.a,{button:!0},r.a.createElement(x.a,null,r.a.createElement(M.a,null)),r.a.createElement(D.a,{primary:r.a.createElement(U.a,{id:"GlobalNav.unregisteredSongs"})}))),r.a.createElement(m.b,{to:"/compare",className:"forceTextColorBlack",onClick:this.toggleNav},r.a.createElement(w.a,{button:!0},r.a.createElement(x.a,null,r.a.createElement(G.a,null)),r.a.createElement(D.a,{primary:r.a.createElement(U.a,{id:"GlobalNav.compare"})}))),r.a.createElement(m.b,{to:"/stats",className:"forceTextColorBlack",onClick:this.toggleNav},r.a.createElement(w.a,{button:!0},r.a.createElement(x.a,null,r.a.createElement(A.a,null)),r.a.createElement(D.a,{primary:r.a.createElement(U.a,{id:"GlobalNav.Statistics"})}))),r.a.createElement(m.b,{to:"/settings",className:"forceTextColorBlack",onClick:this.toggleNav},r.a.createElement(w.a,{button:!0},r.a.createElement(x.a,null,r.a.createElement(N.a,null)),r.a.createElement(D.a,{primary:r.a.createElement(U.a,{id:"GlobalNav.Settings"})})))),r.a.createElement(y.a,null)),r.a.createElement(ce,{message:"\u5b9f\u884c\u4e2d\u306e\u51e6\u7406\u304c\u3042\u308b\u305f\u3081\u7d9a\u884c\u3067\u304d\u307e\u305b\u3093",variant:"warning",handleClose:this.toggleErrorSnack,open:this.state.errorSnack,autoHideDuration:3e3}))}}]),t}(r.a.Component),me=a(569),de=a(549),fe=a(550),pe=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.createElement("div",{className:"heroLayout"},n.createElement(de.a,{fixed:!0},n.createElement(p.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0},n.createElement(U.a,{id:"Top.Title"})),n.createElement(p.a,{variant:"h5",align:"center",color:"textSecondary",paragraph:!0},n.createElement(U.a,{id:"Index.heroText"})),n.createElement(p.a,{align:"center",color:"textSecondary",paragraph:!0},"If you're not familiar with Japanese, please go firstly to settings and you can change language there."),n.createElement("div",null,n.createElement(fe.a,{container:!0,spacing:2,justify:"center"},n.createElement(fe.a,{item:!0},n.createElement(m.b,{to:"/data"},n.createElement(X.a,{variant:"contained",color:"primary"},n.createElement(U.a,{id:"Index.importButton"})))))),n.createElement("div",null,n.createElement(fe.a,{container:!0,spacing:2,justify:"center"},n.createElement(fe.a,{item:!0},n.createElement(p.a,{align:"center",color:"textSecondary",paragraph:!0,variant:"caption"},n.createElement(U.a,{id:"Index.notes1"})),n.createElement(p.a,{align:"center",color:"textSecondary",paragraph:!0,variant:"caption"},n.createElement(U.a,{id:"Index.notes2"})),n.createElement(p.a,{align:"center",color:"textSecondary",paragraph:!0,variant:"caption"},"BPIManager beta ver0.0.0.1",n.createElement("br",null),"If you have encountered unintended behaviours or have opinions to make this tool much better, please contact ",n.createElement("a",{href:"https://twitter.com/notAesthet1c"},"@notAesthet1c"),"."))))))}}]),t}(n.Component),he=a(5),ge=a.n(he),ve=a(9),Ee=a(25),Se=a(251),be=a(38),ye=a.n(be),we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,a=ye()(t);switch(e){case 0:return a.format("YYYY-MM-DD HH:mm");case 1:return a.format("YYYYMMDD");case 2:return a.format("HHmmss");case 3:return a.format("YYYY-MM-DD HH:mm:ss")}return""},xe=function(){return localStorage.getItem("isSingle")?1:0},De=function(){return localStorage.getItem("currentStore")||"27"},ke=function(){return localStorage.getItem("lang")||"ja"},Oe=function(){return localStorage.getItem("lastDefFileVer")||"undefined"},Ce=["FAILED","ASSIST CLEAR","EASY CLEAR","CLEAR","HARD CLEAR","EX HARD CLEAR","FULLCOMBO CLEAR"],je=function(e,t){return 0===t?"string"!==typeof e?0:Ce.indexOf(e):"number"!==typeof e?1:Ce[e]},Pe=function(e){return"hyper"===e?"(H)":"leggendaria"===e?"(\u2020)":""},Ae=function(e){var t="";return"3"!==e&&"8"!==e||(t="(H)"),"10"!==e&&"11"!==e||(t="(\u2020)"),t},Ie=function(e){var t="another";return"3"!==e&&"8"!==e||(t="hyper"),"10"!==e&&"11"!==e||(t="leggendaria"),t},Ne=function(e,t){if("3"===t||"8"===t)return"[H]";if("4"===t||"9"===t)return"[A]";if("10"===t||"11"===t)switch(e){default:return"\u2020[A]";case"Ancient Scapes":case"Close the World feat.a\u2606ru":case"Feel The Beat":case"invoker":case"Sigmund":case"Verflucht":case"\u75be\u98a8\u8fc5\u96f7":return"\u2020LEGGENDARIA[A]"}return""},Be=function(e,t){var a=e,n=t;return"another"!==t?{name:a,difficulty:n}:(["ABSOLUTE\u2020","Clione\u2020","RED ZONE\u2020","spiral galaxy\u2020","Little Little Princess\u2020","CONTRACT\u2020","waxing and wanding\u2020","KAMAITACHI\u2020","VANESSA\u2020","Blue Rain\u2020","ICARUS\u2020","THE DEEP STRIKER\u2020","\xdcbertreffen\u2020","Kung-fu Empire\u2020","naughty girl@Queen's Palace\u2020","THANK YOU FOR PLAYING\u2020","\u51db\u3068\u3057\u3066\u54b2\u304f\u82b1\u306e\u5982\u304f\u2020","SOLID STATE SQUAD\u2020","Golden Palms\u2020","QUANTUM TELEPORTATION\u2020","Howling\u2020","LUV CAN SAVE U\u2020","\u6727\u2020","\u4eee\u60f3\u7a7a\u9593\u306e\u65c5\u4eba\u305f\u3061\u2020","\u9f8d\u3068\u5c11\u5973\u3068\u30c7\u30b3\u30d2\u30fc\u30ec\u30f3\u30b9\u2020","Ancient Scapes\u2020LEGGENDARIA","Close the World feat.a\u2606ru\u2020LEGGENDARIA","Feel The Beat\u2020LEGGENDARIA","invoker\u2020LEGGENDARIA","Sigmund\u2020LEGGENDARIA","Verflucht\u2020LEGGENDARIA","\u75be\u98a8\u8fc5\u96f7\u2020LEGGENDARIA","\u5eff\u2020","Beat Radiance\u2020","CHRONO DIVER -NORNIR-\u2020","Cosmic Cat\u2020","EBORY & IVORY\u2020","\u604b\u306f\u767d\u5e2f\u3001\u30b5\u30f3\u30b7\u30ed\u30fc\u2020","\u8d85\u9752\u5c11\u5e74\u30ce\u70ba\u30ce\u8d85\u591a\u5e78\u30ca\u8d85\u53e4\u5178\u7684\u8d85\u821e\u66f2\u2020","Damage Per Second\u2020","STARLIGHT DANCEHALL\u2020","Amazing Mirage\u2020","\u51ac\u693f ft. Kanae Asaba\u2020"].indexOf(e)>-1&&(a=e.replace("\u2020LEGGENDARIA","").replace("\u2020",""),n="leggendaria"),{name:a,difficulty:n})},Le=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(i.a)(this,e),this.songsDB=void 0,this.isSingle=void 0,this.propData=null,this.m=1,this.s=0,this.k=0,this.z=0,this.pgf=function(e){return 1+(e/t.m-.5)/(1-e/t.m)},this.avg=0,this.wr=0,this._allTwelvesLength=0,this._allTwelvesBPI=[],this.isSingle=1,this.songsDB=a?null:new Fe}return Object(o.a)(e,[{key:"setPropData",value:function(e,t){return this.s=t,this.k=e.avg,this.z=e.wr,this.m=2*e.notes,this.exec()}},{key:"calc",value:function(){var e=Object(ve.a)(ge.a.mark((function e(t,a,n){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,1!==this.isSingle){e.next=7;break}return e.next=4,this.songsDB.getOneItemIsSingle(t,a);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,this.songsDB.getOneItemIsDouble(t,a);case 9:e.t0=e.sent;case 10:if(this.propData=e.t0,this.propData&&this.propData[0]){e.next=13;break}throw new Error("\u697d\u66f2\u60c5\u5831\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f");case 13:return this.s=n,this.k=this.propData[0].avg,this.z=this.propData[0].wr,this.m=2*this.propData[0].notes,e.abrupt("return",{error:!1,bpi:this.exec(),difficultyLevel:this.propData[0].difficultyLevel});case 20:return e.prev=20,e.t1=e.catch(0),e.abrupt("return",{error:!0,bpi:NaN,reason:e.t1.message||e.t1});case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"exec",value:function(){var e=NaN,t=this.k,a=this.z,n=this.s;if(n>this.m)throw new Error("\u7406\u8ad6\u5024\u3092\u8d85\u3048\u3066\u3044\u307e\u3059");if(n<0)throw new Error("\u30b9\u30b3\u30a2\u306f\u81ea\u7136\u6570\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");var r=this.pgf(n),l=this.pgf(t),i=r/l,o=this.pgf(a)/l;return(e=n>=t?Math.pow(Math.log(i),1.5)/Math.pow(Math.log(o),1.5)*100:Math.pow(-Math.log(i),1.5)/Math.pow(Math.log(o),1.5)*-100)<-15?-15:Math.round(100*e)/100}},{key:"setData",value:function(e,t,a){this.m=e,this.avg=t,this.wr=a}},{key:"calcFromBPI",value:function(e){var t=this.pgf(this.wr),a=this.pgf(this.avg),n=Math.pow(Math.pow(Math.log(t/a),1.5)*e/100,1/1.5),r=Math.pow(Math.E,n)*a;return this.m*((r-.5)/r)}},{key:"rank",value:function(e){return Math.ceil(Math.pow(2616,(100-e)/100))}},{key:"totalBPI",value:function(){var e=0,t=this._allTwelvesBPI.length;if(0===t)return-15;for(var a=Math.log2(this._allTwelvesLength),n=0;n<this._allTwelvesLength;++n)if(n<t){var r=this._allTwelvesBPI[n];e+=r>0?Math.pow(r,a)/this._allTwelvesLength:-Math.pow(Math.abs(r),a)/this._allTwelvesLength}return Math.round(100*Math.pow(e,1/a))/100}},{key:"allTwelvesLength",set:function(e){this._allTwelvesLength=e}},{key:"allTwelvesBPI",set:function(e){this._allTwelvesBPI=e}}]),e}(),Te=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(s.a)(t).call(this,"ScoreCoach"))).target="scores",e.scores=void 0,e.songs=void 0,e.stores=void 0,e.calculator=new Le(!0),e.newSongs={},e.version(1).stores({scores:"[title+difficulty+storedAt+isSingle],title,*difficulty,*difficultyLevel,*version,currentBPI,exScore,Pgreat,great,missCount,clearState,lastPlayed,storedAt,isSingle,isImported,updatedAt,lastScore",songs:"&++num,title,*difficulty,*difficultyLevel,wr,avg,notes,bpm,textage,dpLevel,isCreated,isFavorited,[title+difficulty]",stores:"&name,updatedAt",scoreHistory:"&++num,[title+storedAt+difficulty+isSingle],[title+storedAt+difficulty+isSingle+updatedAt],title,difficulty,difficultyLevel,storedAt,exScore,BPI,isSingle,updatedAt"}),e.scores=e.table("scores"),e.songs=e.table("songs"),e.stores=e.table("stores"),e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"setNewSongsDBRawData",value:function(e){return this.newSongs=e,this}},{key:"apply",value:function(e,t){return this.calculator.setPropData(this.newSongs[e],t)}}]),t}(Se.a),Me=function(e){function t(e,a){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this))).scores=void 0,n.storedAt="",n.isSingle=1,n.scores=n.table("scores"),e&&(n.isSingle=e),a&&(n.storedAt=a),n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"setIsSingle",value:function(e){return this.isSingle=e,this}},{key:"setStoredAt",value:function(e){return this.storedAt=e,this}},{key:"getAll",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){var t;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scores.where({storedAt:De(),isSingle:xe()}).toArray();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSpecificVersionAll",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){var t;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scores.where({storedAt:this.storedAt,isSingle:this.isSingle}).toArray();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteAll",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scores.clear();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getItem",value:function(e,t,a,n){return this.scores.where("[title+difficulty+storedAt+isSingle]").equals([e,t,a,n]).toArray()}},{key:"getAllTwelvesBPI",value:function(){var e=Object(ve.a)(ge.a.mark((function e(t,a){var n,r,l=arguments;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>2&&void 0!==l[2]?l[2]:"12",e.next=3,this.scores.where({storedAt:a,isSingle:t}).toArray();case 3:return r=(r=e.sent).filter((function(e){return e.difficultyLevel===n})),e.abrupt("return",r.map((function(e){return e.currentBPI})));case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"resetItems",value:function(){var e=Object(ve.a)(ge.a.mark((function e(t){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scores.where({storedAt:t}).delete();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetImportedItems",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scores.where({isImported:"true"}).delete();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setItem",value:function(e){try{return this.scores.where("[title+difficulty+storedAt+isSingle]").equals([e.title,e.difficulty,this.storedAt,this.isSingle]).modify({title:e.title,version:e.version,difficulty:e.difficulty,difficultyLevel:e.difficultyLevel,currentBPI:e.currentBPI,exScore:Number(e.exScore),Pgreat:Number(e.Pgreat),great:Number(e.great),missCount:Number(e.missCount),clearState:e.clearState,lastPlayed:e.lastPlayed,lastScore:e.lastScore,storedAt:e.storedAt,isSingle:e.isSingle,isImported:!0,updatedAt:e.updatedAt})}catch(t){console.log(t)}}},{key:"putItem",value:function(e){try{return this.scores.put({title:e.title,version:e.version,difficulty:e.difficulty,difficultyLevel:e.difficultyLevel,currentBPI:e.currentBPI,exScore:Number(e.exScore),Pgreat:Number(e.Pgreat),great:Number(e.great),missCount:Number(e.missCount),clearState:e.clearState,lastPlayed:e.lastPlayed,lastScore:e.lastScore,storedAt:e.storedAt,isSingle:e.isSingle,isImported:!0,updatedAt:e.updatedAt})}catch(t){console.log(t)}}},{key:"updateScore",value:function(){var e=Object(ve.a)(ge.a.mark((function e(t,a){var n;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}return e.abrupt("return",!1);case 3:if("-"!==t.updatedAt){e.next=12;break}return(n=t).currentBPI=a.currentBPI,n.exScore=a.exScore,n.updatedAt=we(0),e.next=10,this.scores.add(n);case 10:e.next=14;break;case 12:return e.next=14,this.scores.where("[title+difficulty+storedAt+isSingle]").equals([t.title,t.difficulty,t.storedAt,t.isSingle]).modify(Object.assign(a,{updatedAt:we(0),lastScore:t.exScore}));case 14:return e.abrupt("return",!0);case 17:return e.prev=17,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"removeItem",value:function(){var e=Object(ve.a)(ge.a.mark((function e(t,a){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scores.where({title:t,storedAt:a}).delete();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"recalculateBPI",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){var t;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this,e.next=4,this.scores.toCollection().modify((function(e){e.currentBPI=t.apply(e.title,e.exScore)}));case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(0),console.log("failed recalculate - "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}]),t}(Te),Re=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(s.a)(t).call(this))).scoreHistory=void 0,e.isSingle=1,e.currentStore="27",e.scoreHistory=e.table("scoreHistory"),e.isSingle=xe(),e.currentStore=De(),e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"add",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{return!!e&&(this.scoreHistory.add({title:e.title,exScore:t.exScore,difficulty:e.difficulty,difficultyLevel:e.difficultyLevel,storedAt:e.storedAt,BPI:t.currentBPI,updatedAt:a?e.updatedAt:we(3),isSingle:e.isSingle}),!0)}catch(n){return console.log(n),!1}}},{key:"check",value:function(){var e=Object(ve.a)(ge.a.mark((function e(t){var a;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.scoreHistory.where("[title+storedAt+difficulty+isSingle]").equals([t.title,t.storedAt,t.difficulty,t.isSingle]).toArray().then((function(e){return e.sort((function(e,t){return ye()(t.updatedAt).diff(ye()(e.updatedAt))}))}));case 3:return a=e.sent,e.abrupt("return",{willUpdate:0===a.length||Number(t.exScore)>Number(a[a.length-1].exScore),lastScore:0===a.length?-1:a[a.length-1].exScore});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{willUpdate:!1,lastScore:0});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=Object(ve.a)(ge.a.mark((function e(t,a){var n,r=arguments;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>2&&void 0!==r[2]?r[2]:"12",e.prev=1,e.next=4,this.scoreHistory.where({storedAt:this.currentStore,isSingle:this.isSingle,difficultyLevel:n}).toArray();case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"reset",value:function(){var e=Object(ve.a)(ge.a.mark((function e(t,a){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.scoreHistory.where({storedAt:this.currentStore,isSingle:this.isSingle}).delete();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",0);case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getWithinVersion",value:function(){var e=Object(ve.a)(ge.a.mark((function e(t){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,this.scoreHistory.where({storedAt:this.currentStore,isSingle:this.isSingle,title:t.title,difficulty:Ie(t.difficulty)}).toArray().then((function(e){return e.sort((function(e,t){return ye()(t.updatedAt).diff(ye()(e.updatedAt))}))}));case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getAcrossVersion",value:function(){var e=Object(ve.a)(ge.a.mark((function e(t){var a,n;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,this.scoreHistory.where({isSingle:this.isSingle,title:t.title,difficulty:Ie(t.difficulty)}).toArray().then((function(e){return e.reduce((function(e,t){return e[t.storedAt]||(e[t.storedAt]=[]),e[t.storedAt].push(t),e}),{})}));case 5:return a=e.sent,n=[],Object.keys(a).map((function(e){var t=a[e].sort((function(e,t){return t.exScore-e.exScore}));n.push(t[0])})),e.abrupt("return",n.reverse());case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()}]),t}(Te),Fe=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(s.a)(t).call(this))).songs=void 0,e.songs=e.table("songs"),e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"getAll",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){var t,a,n,r=arguments;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:1,a=r.length>1&&void 0!==r[1]&&r[1],n=1===t?this.songs.where("dpLevel").equals("0"):this.songs.where("dpLevel").notEqual("0"),!a){e.next=7;break}e.t0=n,e.next=10;break;case 7:return e.next=9,n.toArray();case 9:e.t0=e.sent;case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllTwelvesLength",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){var t,a,n,r=arguments;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==(r.length>0&&void 0!==r[0]?r[0]:1)){e.next=7;break}return e.next=4,this.songs.where("dpLevel").equals("0").toArray();case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,this.songs.where("dpLevel").notEqual("0").toArray();case 9:e.t0=e.sent;case 10:for(t=e.t0,a=0,n=0;n<t.length;++n)"12"===t[n].difficultyLevel&&a++;return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllFavoritedItems",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){var t,a,n=arguments;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:1,e.next=3,this.getAll(t,!0);case 3:return a=e.sent,e.abrupt("return",a.and((function(e){return!0===e.isFavorited})).toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteAll",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.songs.clear();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getItem",value:function(e){return this.songs.where({title:e}).toArray()}},{key:"getOneItemIsSingle",value:function(){var e=Object(ve.a)(ge.a.mark((function e(t,a){var n;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){switch(a){case"hyper":return"3";case"another":return"4";case"leggendaria":return"10";default:return a}},e.next=3,this.songs.where("[title+difficulty]").equals([t,n()]).toArray();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"resetItems",value:function(){var e=Object(ve.a)(ge.a.mark((function e(t){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.songs.where({storedAt:t}).delete();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setItem",value:function(){var e=Object(ve.a)(ge.a.mark((function e(t){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.songs.put({title:t.title,difficulty:t.difficulty,wr:Number(t.wr),avg:Number(t.avg),notes:Number(t.notes),bpm:t.bpm,textage:t.textage,difficultyLevel:t.difficultyLevel,dpLevel:t.dpLevel,isFavorited:t.isFavorited||!1,isCreated:t.isCreated||!1,updatedAt:t.updatedAt||we(0)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateItem",value:function(){var e=Object(ve.a)(ge.a.mark((function e(t){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.songs.where({title:t.title,difficulty:t.difficulty}).modify({wr:Number(t.wr),avg:Number(t.avg),updatedAt:we(0)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleFavorite",value:function(){var e=Object(ve.a)(ge.a.mark((function e(t,a,n){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.songs.where({title:t,difficulty:a}).modify({isFavorited:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"removeItem",value:function(){var e=Object(ve.a)(ge.a.mark((function e(t){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.songs.where({title:t}).delete();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(Te),He=Te,Ge=a(576),Ue=function(){function e(t,a,n){Object(i.a)(this,e),this.rawData="",this.result=[],this.resultHistory=[],this.isSingle=1,this.currentStore="",this.rawData=t,a&&(this.isSingle=a),n&&(this.currentStore=n)}return Object(o.a)(e,[{key:"getResult",value:function(){return this.result}},{key:"getResultHistory",value:function(){return this.resultHistory}},{key:"execute",value:function(){var e=this,t=0;return new Promise((function(a,n){try{for(var r=e.rawData.split(/\r\n|\n/),l=r.length,i=[],o=[],c=0;c<l;++c){var s=[],u="",m=r[c].split(/,/);if(0===c&&"NORMAL \u96e3\u6613\u5ea6"===m[5]&&(t=1),0===t?(Number(m[19])>10&&Number(m[20])>0&&(u="hyper",s=[0,1,20,21,22,23,24,25,40]),Number(m[26])>10&&Number(m[27])>0&&(u="another",s=[0,1,27,28,29,30,31,32,40]),Number(m[33])>10&&Number(m[34])>0&&(u="leggendaria",s=[0,1,34,35,36,37,38,39,40])):(Number(m[12])>10&&Number(m[13])>0&&(u="hyper",s=[0,1,13,14,15,16,17,18,26]),Number(m[19])>10&&Number(m[20])>0&&(u="another",s=[0,1,20,21,22,23,24,25,26])),m[s[1]]){var d=1===t?Be(m[s[1]],u):{name:m[s[1]],difficulty:u},f=d.name,p=d.difficulty,h=je(m[s[6]],0);if("number"!==typeof h)throw new Error;i.push({title:f,version:m[s[0]],difficulty:p,currentBPI:0,difficultyLevel:"-",exScore:Number(m[s[2]]),Pgreat:Number(m[s[3]]),great:Number(m[s[4]]),missCount:Number(m[s[5]]),clearState:h,lastPlayed:m[s[8]],lastScore:-1,storedAt:e.currentStore,isSingle:e.isSingle,isImported:!0,updatedAt:m[s[8]]}),o.push({title:f,exScore:Number(m[s[2]]),difficulty:p,difficultyLevel:"-",storedAt:e.currentStore,isSingle:e.isSingle,BPI:0,updatedAt:m[s[8]]})}}return e.result=i,e.resultHistory=o,a(i.length)}catch(g){return console.log(g),n(g)}}))}}]),e}(),Ve=a(555),We=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).onChangeText=function(e){return a.setState({raw:e.target.value})},a.handleClose=function(){return a.setState({isSnackbarOpen:!1})},a.state={raw:"",isSnackbarOpen:!1,stateText:"Data.Success",errors:[],isSaving:!1,currentState:"",progress:0},a.execute=a.execute.bind(Object(Ee.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"execute",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){var t,a,n,r,l,i,o,c,s,u,m,d;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.props.global.setMove(!0),this.setState({isSaving:!0}),t=[],a=new Ue(this.state.raw,xe(),De()),n=new Le,e.next=8,a.execute();case 8:if(e.sent){e.next=11;break}throw new Error("CSV\u30c7\u30fc\u30bf\u306e\u5f62\u5f0f\u304c\u6b63\u3057\u304f\u3042\u308a\u307e\u305b\u3093");case 11:return r=a.getResult(),l=a.getResultHistory(),i=new Me(xe(),De()),o=new Re,e.next=15,i.getAll().then((function(e){return e.reduce((function(e,t){return e[t.title]=t,e}),{})}));case 15:c=e.sent,s=r.length,u=0;case 18:if(!(u<s)){e.next=33;break}return e.next=21,n.calc(r[u].title,r[u].difficulty,r[u].exScore);case 21:if(!(m=e.sent).error||!m.reason){e.next=25;break}return t.push(r[u].title+" - "+m.reason),e.abrupt("continue",30);case 25:if(!(c[r[u].title]&&c[r[u].title].exScore>=r[u].exScore)){e.next=27;break}return e.abrupt("continue",30);case 27:d=Object.assign(r[u],{difficultyLevel:m.difficultyLevel,currentBPI:m.bpi,isImported:!0,lastScore:c[r[u].exScore]}),c[r[u].title]?i.setItem(d):i.putItem(d),o.add(Object.assign(l[u],{difficultyLevel:m.difficultyLevel}),{currentBPI:m.bpi,exScore:l[u].exScore},!0);case 30:++u,e.next=18;break;case 33:return this.props.global.setMove(!1),e.abrupt("return",this.setState({isSaving:!1,raw:"",isSnackbarOpen:!0,stateText:"Data.Success",errors:t}));case 37:return e.prev=37,e.t0=e.catch(0),this.props.global.setMove(!1),e.abrupt("return",this.setState({isSaving:!1,isSnackbarOpen:!0,stateText:"Data.Failed",errors:[e.t0.message]}));case 41:case"end":return e.stop()}}),e,this,[[0,37]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.raw,a=e.isSnackbarOpen,r=e.stateText,l=e.errors,i=e.isSaving;return n.createElement(de.a,{className:"commonLayout",fixed:!0},n.createElement(ee.a,{open:a,onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},message:n.createElement("span",{id:"message-id"},n.createElement(U.a,{id:r}))}),n.createElement(p.a,{component:"h4",variant:"h4",color:"textPrimary",gutterBottom:!0},n.createElement(U.a,{id:"Data.add"})),n.createElement(p.a,{variant:"body1",gutterBottom:!0},n.createElement(U.a,{id:"Data.infoBulk"}),n.createElement("br",null),n.createElement(U.a,{id:"Data.howToBulk1"}),n.createElement("a",{href:"https://p.eagate.573.jp/game/2dx/27/djdata/score_download.html",target:"_blank",rel:"noopener noreferrer"},n.createElement(U.a,{id:"Data.CSVURL"})),n.createElement(U.a,{id:"Data.howToBulk2"})),n.createElement(Ge.a,{onChange:this.onChangeText,value:t,style:{width:"100%"},label:"Paste here",margin:"dense",variant:"outlined",multiline:!0,rowsMax:"4"}),n.createElement("div",{style:{position:"relative"}},n.createElement(X.a,{variant:"contained",color:"primary",onClick:this.execute,disabled:i,style:{width:"100%",margin:"5px 0"}},n.createElement(U.a,{id:"Data.Execute"})),i&&n.createElement(Ve.a,{size:24,style:{color:"#777",position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})),n.createElement(y.a,{variant:"middle",style:{margin:"10px 0"}}),l&&l.map((function(e){return n.createElement("span",null,e,n.createElement("br",null))})),n.createElement(U.a,{id:"Data.notPremium1"}),n.createElement(y.a,{variant:"middle",style:{margin:"10px 0"}}),n.createElement(p.a,{component:"h4",variant:"h4",color:"textPrimary",gutterBottom:!0},n.createElement(U.a,{id:"Data.edit"})),n.createElement(U.a,{id:"Data.howToEdit"}),n.createElement("ol",null,n.createElement("li",null,n.createElement(U.a,{id:"Data.howToEdit1"})),n.createElement("li",null,n.createElement(U.a,{id:"Data.howToEdit2"})),n.createElement("li",null,n.createElement(U.a,{id:"Data.howToEdit3"}))))}}]),t}(n.Component),Ye=a(502),Xe=a(553),ze=a(565),_e=a(566),Je=a(572),Ke=a(139),qe=a.n(Ke),Qe=a(564),Ze=a(142),$e=a(556),et=a(560),tt=a(559),at=a(557),nt=a(574),rt=a(558),lt=a(562),it=a(261),ot=a.n(it),ct=a(263),st=a.n(ct),ut=a(132),mt=a(570),dt=a(563),ft=a(267),pt=a(561),ht=a(575),gt=a(26),vt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.chartData,a=e.song,n=e.score,l=e.graphLastUpdated;if(!a||!n)return null;var i=a.notes?2*a.notes:0;return r.a.createElement("div",{style:{width:"95%",height:"100%",margin:"5px auto"}},r.a.createElement(gt.i,{width:"100%"},r.a.createElement(gt.b,{data:t,key:l},r.a.createElement(gt.c,{strokeDasharray:"3 3"}),r.a.createElement(gt.k,{dataKey:"name"}),r.a.createElement(gt.l,{domain:[0,i],ticks:[Math.ceil(i*(6/9)),Math.ceil(i*(7/9)),Math.ceil(i*(8/9)),i],width:40}),r.a.createElement(gt.j,null),r.a.createElement(gt.a,{dataKey:"EX SCORE",isAnimationActive:!1},t.map((function(e){var t="YOU"===e.name?"#e75d00":"#8884d8";return r.a.createElement(gt.d,{key:e.name,fill:t})}))),r.a.createElement(gt.h,{y:i*(8/9),label:r.a.createElement(gt.f,{position:"insideTopRight"},"AAA"),stroke:"#004018",isFront:!0}),r.a.createElement(gt.h,{y:i*(7/9),label:r.a.createElement(gt.f,{position:"insideTopRight"},"AA"),stroke:"#004018",isFront:!0}),r.a.createElement(gt.h,{y:i*(2/3),label:r.a.createElement(gt.f,{position:"insideTopRight"},"A"),stroke:"#004018",isFront:!0}))))}}]),t}(r.a.Component),Et=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.song,a=e.score;if(!t||!a)return null;var n=2*t.notes;return r.a.createElement("div",null,r.a.createElement(Ze.a,null,r.a.createElement($e.a,{"aria-label":"Song Details"},r.a.createElement(at.a,null,r.a.createElement(rt.a,null,r.a.createElement(tt.a,{style:{minWidth:"130px",maxWidth:"130px"}},r.a.createElement(U.a,{id:"SongDetail.SongDetailHead"})),r.a.createElement(tt.a,null,"\xa0"))),r.a.createElement(et.a,null,r.a.createElement(rt.a,null,r.a.createElement(tt.a,null,r.a.createElement(U.a,{id:"SongDetail.Notes"})),r.a.createElement(tt.a,null,t.notes)),r.a.createElement(rt.a,null,r.a.createElement(tt.a,null,r.a.createElement(U.a,{id:"SongDetail.WorldRecord"})),r.a.createElement(tt.a,null,t.wr,"(",Math.floor(t.wr/n*1e4)/100,"%)")),r.a.createElement(rt.a,null,r.a.createElement(tt.a,null,r.a.createElement(U.a,{id:"SongDetail.Average"})),r.a.createElement(tt.a,null,t.avg,"(",Math.floor(t.avg/n*1e4)/100,"%)")),!Number.isNaN(a.exScore)&&r.a.createElement(rt.a,null,r.a.createElement(tt.a,null,r.a.createElement(U.a,{id:"SongDetail.You"})),r.a.createElement(tt.a,null,a.exScore,"(",Math.floor(a.exScore/n*1e4)/100,"%)")),r.a.createElement(rt.a,null,r.a.createElement(tt.a,null,"BPM"),r.a.createElement(tt.a,null,t.bpm)),a.version&&r.a.createElement(rt.a,null,r.a.createElement(tt.a,null,r.a.createElement(U.a,{id:"SongDetail.Version"})),r.a.createElement(tt.a,null,a.version))))),(a.missCount||a.lastPlayed)&&r.a.createElement(Ze.a,null,r.a.createElement($e.a,{"aria-label":"Score Details"},r.a.createElement(at.a,null,r.a.createElement(rt.a,null,r.a.createElement(tt.a,{style:{minWidth:"130px",maxWidth:"130px"}},r.a.createElement(U.a,{id:"SongDetail.ScoreDetailHead"})),r.a.createElement(tt.a,null))),r.a.createElement(et.a,null,a.lastPlayed&&r.a.createElement(rt.a,null,r.a.createElement(tt.a,null,r.a.createElement(U.a,{id:"SongDetail.ClearState"})),r.a.createElement(tt.a,null,je(a.clearState,1))),a.missCount&&r.a.createElement(rt.a,null,r.a.createElement(tt.a,null,r.a.createElement(U.a,{id:"SongDetail.MissCount"})),r.a.createElement(tt.a,null,a.missCount)),a.lastPlayed&&r.a.createElement(rt.a,null,r.a.createElement(tt.a,null,r.a.createElement(U.a,{id:"SongDetail.LastPlayed"})),r.a.createElement(tt.a,null,a.lastPlayed)),a.Pgreat&&a.great&&r.a.createElement(rt.a,null,r.a.createElement(tt.a,null,r.a.createElement(U.a,{id:"SongDetail.ScoreDetails"})),r.a.createElement(tt.a,null,"PG:",a.Pgreat," G:",a.great))))))}}]),t}(r.a.Component),St=a(554),bt=a(571),yt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).handleChange=function(e){"number"===typeof e.target.value&&(a.setState({current:e.target.value,isLoading:!0}),a.updateScoreData(e.target.value))},a.state={isLoading:!0,current:0,dataset:[]},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.updateScoreData()}},{key:"updateScoreData",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){var t,a,n,r=arguments;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:0,a=this.props.song){e.next=4;break}return e.abrupt("return");case 4:if(n=new Re,console.log(t),0!==t){e.next=16;break}return e.t0=this,e.next=11,n.getWithinVersion(a);case 11:return e.t1=e.sent,e.t2={dataset:e.t1,isLoading:!1},e.abrupt("return",e.t0.setState.call(e.t0,e.t2));case 16:return e.t3=this,e.next=19,n.getAcrossVersion(a);case 19:return e.t4=e.sent,e.t5={dataset:e.t4,isLoading:!1},e.abrupt("return",e.t3.setState.call(e.t3,e.t5));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.current,a=e.isLoading,n=e.dataset,l=this.props,i=l.song,o=l.score;return i&&o?r.a.createElement("div",null,r.a.createElement(de.a,null,r.a.createElement(Xe.a,{style:{width:"100%"}},r.a.createElement(St.a,{shrink:!0},r.a.createElement(U.a,{id:"SongDiffs.Target"})),r.a.createElement(bt.a,{value:t,onChange:this.handleChange,displayEmpty:!0},r.a.createElement(pt.a,{value:0},r.a.createElement(U.a,{id:"SongDiffs.WithinSameVersion"})),r.a.createElement(pt.a,{value:1},r.a.createElement(U.a,{id:"SongDiffs.EachVersion"})))),a&&r.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"30px"}},r.a.createElement(Ve.a,null)),!a&&r.a.createElement(wt,{scoreTable:n,type:t}))):null}}]),t}(r.a.Component),wt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=[0===this.props.type?{id:"updatedAt",label:"Date"}:{id:"storedAt",label:"Version"},{id:"exScore",label:"EX"},{id:"BPI",label:"BPI"}];return r.a.createElement($e.a,null,r.a.createElement(at.a,null,r.a.createElement(rt.a,null,e.map((function(e,t){return r.a.createElement(tt.a,{key:e.id,style:0===t?{minWidth:"150px"}:void 0},e.label)})))),r.a.createElement(et.a,null,this.props.scoreTable.map((function(t,a){return r.a.createElement(rt.a,{hover:!0,role:"checkbox",tabIndex:-1,key:t.title+t.difficulty+a,style:a%2?{background:"#f7f7f7"}:{background:"white"}},e.map((function(e,a){return r.a.createElement(tt.a,{key:e.id},t[e.id])})))}))))}}]),t}(r.a.Component),xt=a(69),Dt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.value!==this.props.index?null:this.props.children}}]),t}(r.a.Component),kt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).calc=new Le,a.unlisten=null,a.makeGraph=function(e){var t=[],n=0,r=a.props,l=r.song,i=r.score,o=function(e,a){return t.push({name:a,"EX SCORE":e})};if(!l||!i)return[];a.calc.setData(2*l.notes,l.avg,l.wr);for(var c=[0,10,20,30,40,50,60,70,80,90,100],s=e||i.exScore,u=0;u<c.length;++u){var m=Math.floor(a.calc.calcFromBPI(c[u]));n<s&&s<=m&&(o(s,"YOU"),n=s),n=m,o(m,String(c[u]))}return n<s&&o(s,"YOU"),t},a.handleScoreInput=function(){var e=Object(ve.a)(ge.a.mark((function e(t){var n,r,l;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.props.song,!a.state.isSaving){e.next=3;break}return e.abrupt("return",a.setState({errorSnack:!0,errorSnackMessage:"\u4fdd\u5b58\u4e2d\u3067\u3059"}));case 3:if(n){e.next=5;break}return e.abrupt("return",a.setState({errorSnack:!0,errorSnackMessage:"\u697d\u66f2\u30c7\u30fc\u30bf\u304c\u4e0d\u6b63\u3067\u3059\u3002"}));case 5:return r=Number(t.target.value),e.next=8,a.calc.calc(n.title,n.difficulty,r);case 8:if(!(l=e.sent).error){e.next=11;break}return e.abrupt("return",a.setState({errorSnack:!0,errorSnackMessage:l.reason}));case 11:return e.abrupt("return",a.setState({newScore:r,newBPI:Math.floor(100*l.bpi)/100,chartData:a.makeGraph(r).reverse(),graphLastUpdated:(new Date).getTime()}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleTabChange=function(e,t){return a.setState({currentTab:t})},a.toggleMenu=function(e){return a.setState({anchorEl:e?e.currentTarget:null})},a.jumpWeb=function(e){if(a.props.song){switch(e){case 0:window.open("http://textage.cc/score/"+a.props.song.textage);break;case 1:window.open("https://www.youtube.com/results?search_query="+a.props.song.title+"+IIDX");break;case 2:if("12"!==a.props.song.difficultyLevel){var t=a.props.intl.formatMessage;a.setState({errorSnack:!0,errorSnackMessage:t({id:"Details.ErrorIIDXInfo"})})}else window.open("https://iidx.info/songinfo/?title=".concat(a.props.song.title).concat(Ne(a.props.song.title,a.props.song.difficulty)));break;case 3:window.open("https://twitter.com/intent/tweet?&text=")}return a.toggleMenu()}},a.toggleFavorited=Object(ve.a)(ge.a.mark((function e(){var t,n,r;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=a.state.favorited,n=a.props.song,r=new Fe,n){e.next=6;break}throw new Error;case 6:return e.next=8,r.toggleFavorite(n.title,n.difficulty,!t);case 8:return a.toggleSuccessSnack(),e.abrupt("return",a.setState({favorited:!t}));case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return");case 16:case"end":return e.stop()}}),e,null,[[0,12]])}))),a.toggleSuccessSnack=function(){return a.setState({successSnack:!a.state.successSnack})},a.toggleErrorSnack=function(){return a.setState({errorSnack:!a.state.errorSnack})},a.calcRank=function(){return a.props.score?"".concat(a.calc.rank(Number.isNaN(a.state.newBPI)?a.props.score.currentBPI:a.state.newBPI)):"-"},a.saveAndClose=Object(ve.a)(ge.a.mark((function e(){var t,n,r,l,i,o,c,s,u;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=a.state,n=t.newBPI,r=t.newScore,l=a.props,i=l.score,o=l.song,c=l.willDelete,o&&i){e.next=5;break}return e.abrupt("return");case 5:return a.setState({isSaving:!0}),s=new Me,u=new Re,e.next=9,s.updateScore(i,{currentBPI:n,exScore:r});case 9:return e.next=11,u.add(Object.assign(i,{difficultyLevel:o.difficultyLevel}),{currentBPI:n,exScore:r});case 11:a.props.handleOpen(!0,null,c?{title:i.title,difficulty:i.difficulty}:null),e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",a.setState({errorSnack:!0,errorSnackMessage:e.t0}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),a.showRank=function(e){var t=a.props,n=t.song,r=t.score,l=a.state.newScore;if(!n||!r)return"-";var i=2*n.notes,o=Number.isNaN(l)?r.exScore:l,c=o/i;return c<2/9?e?"".concat(Math.ceil(2*i/9-o)):"E-":c>=2/9&&c<1/3?e?"".concat(Math.ceil(1*i/3-o)):"D-":c>=1/3&&c<4/9?e?"".concat(Math.ceil(4*i/9-o)):"C-":c>=4/9&&c<5/9?e?"".concat(Math.ceil(5*i/9-o)):"B-":c>=5/9&&c<2/3?e?"".concat(Math.ceil(2*i/3-o)):"A-":c>=2/3&&c<7/9?e?"".concat(Math.ceil(7*i/9-o)):"AA-":c>=7/9&&c<8/9?e?"".concat(Math.ceil(8*i/9-o)):"AAA-":c>=8/9&&c<17/18?e?"".concat(Math.floor(o-8*i/9)):"AAA+":c>=17/18?e?"".concat(Math.ceil(i-o)):"MAX-":""},a.state={isError:!1,newScore:NaN,newBPI:NaN,showCharts:!0,chartData:a.makeGraph().reverse(),favorited:!!e.song&&e.song.isFavorited,currentTab:0,anchorEl:null,successSnack:!1,errorSnack:!1,errorSnackMessage:"",graphLastUpdated:(new Date).getTime(),isSaving:!1},a.unlisten=a.props.history.listen((function(e,t){"POP"===t&&(a.props.history.go(1),a.props.handleOpen(!1))})),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillUnmount",value:function(){this.unlisten&&this.unlisten()}},{key:"render",value:function(){var e=this,t=this.props.intl.formatMessage,a=this.props,n=a.isOpen,l=a.handleOpen,i=a.song,o=a.score,c=this.state,s=c.isSaving,u=c.newScore,m=c.newBPI,g=c.showCharts,v=c.chartData,E=c.currentTab,S=c.anchorEl,b=c.favorited,w=c.successSnack,x=c.errorSnack,D=c.errorSnackMessage;if(!i||!o)return null;var k=b?"#ffd700":"#c3c3c3";return r.a.createElement(lt.a,{id:"detailedScreen",fullScreen:!0,open:n,onClose:l,style:{overflowX:"hidden",width:"100%"}},r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement(h.a,{edge:"start",color:"inherit",onClick:function(){return l(!1)},"aria-label":"close"},r.a.createElement(ot.a,null)),r.a.createElement(p.a,{variant:"h6",className:"be-ellipsis",style:{flexGrow:1}},i.title+Ae(i.difficulty)),(!Number.isNaN(m)||!Number.isNaN(u))&&r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:this.saveAndClose,disabled:s},r.a.createElement(U.a,{id:"Details.SaveButton"})),s&&r.a.createElement(Ve.a,{size:24,style:{color:"#ccc",position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})))),r.a.createElement(f.a,null),r.a.createElement(Ze.a,null,r.a.createElement(fe.a,{container:!0,spacing:3},r.a.createElement(fe.a,{item:!0,xs:4,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:"10px 0"}},r.a.createElement(p.a,{component:"h6",variant:"h6",color:"textSecondary"},"BPI"),r.a.createElement(p.a,{component:"h4",variant:"h4",color:"textPrimary"},o&&Number.isNaN(m)&&!Number.isNaN(o.currentBPI)&&o.currentBPI,!Number.isNaN(m)&&m,Number.isNaN(o.currentBPI)&&Number.isNaN(m)&&r.a.createElement("span",null,"-"))),r.a.createElement(fe.a,{item:!0,xs:4,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:"10px 0"}},r.a.createElement(p.a,{component:"h6",variant:"h6",color:"textSecondary"},o&&r.a.createElement("span",null,this.showRank(!1))),r.a.createElement(p.a,{component:"h4",variant:"h4",color:"textPrimary"},o&&r.a.createElement("span",null,this.showRank(!0)))),r.a.createElement(fe.a,{item:!0,xs:4,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:"10px 0"}},r.a.createElement(p.a,{component:"h6",variant:"h6",color:"textSecondary"},"RANK"),r.a.createElement(p.a,{component:"h4",variant:"h4",color:"textPrimary"},(!Number.isNaN(o.currentBPI)||!Number.isNaN(m))&&r.a.createElement("span",null,this.calcRank()),Number.isNaN(o.currentBPI)&&Number.isNaN(m)&&r.a.createElement("span",null,"-")))),r.a.createElement(y.a,null),r.a.createElement(fe.a,{container:!0},r.a.createElement(fe.a,{item:!0,xs:8},r.a.createElement("form",{noValidate:!0,autoComplete:"off",style:{margin:"10px 6px 0"}},r.a.createElement(Ge.a,{type:"number",style:{width:"100%"},label:r.a.createElement(U.a,{id:"Details.typeNewScore"}),value:Number.isNaN(u)?o?o.exScore:0:u,onChange:this.handleScoreInput}))),r.a.createElement(fe.a,{item:!0,xs:1,style:{display:"flex",alignItems:"center",justifyContent:"flex-end"}},r.a.createElement("div",{style:{margin:"10px 6px 0"}},r.a.createElement(ht.a,{title:r.a.createElement(U.a,{id:b?"Details.FavButtonRemove":"Details.FavButton"}),"aria-label":"add"},r.a.createElement(F.a,{style:{fontSize:"35px",color:k,position:"relative",top:"3px"},onClick:this.toggleFavorited}))),r.a.createElement(ce,{message:t(b?{id:"Details.FavButtonAdded"}:{id:"Details.FavButtonRemoved"}),variant:"success",handleClose:this.toggleSuccessSnack,open:w,autoHideDuration:1e3})),r.a.createElement(fe.a,{item:!0,xs:1,style:{display:"flex",alignItems:"center",justifyContent:"flex-end"}},r.a.createElement(h.a,{style:{margin:"10px 6px 0"},"aria-haspopup":"true",onClick:this.toggleMenu},r.a.createElement(st.a,null)),r.a.createElement(ft.a,{anchorEl:S,keepMounted:!0,open:Boolean(S),onClose:function(){return e.toggleMenu()}},r.a.createElement(pt.a,{onClick:function(){return e.jumpWeb(0)}},"TexTage"),r.a.createElement(pt.a,{onClick:function(){return e.jumpWeb(1)}},"YouTube"),r.a.createElement(pt.a,{onClick:function(){return e.jumpWeb(2)}},"IIDX.info"),r.a.createElement(pt.a,{onClick:function(){return e.jumpWeb(3)}},r.a.createElement(U.a,{id:"Common.Tweet"})))))),r.a.createElement(mt.a,{value:E,variant:"fullWidth",indicatorColor:"primary",textColor:"primary",onChange:this.handleTabChange},r.a.createElement(dt.a,{label:r.a.createElement(U.a,{id:"Details.Graph"})}),r.a.createElement(dt.a,{label:r.a.createElement(U.a,{id:"Details.Details"})}),r.a.createElement(dt.a,{label:r.a.createElement(U.a,{id:"Details.Diffs"})})),r.a.createElement(Dt,{value:E,index:0},g&&r.a.createElement(vt,{song:i,score:o,chartData:v,graphLastUpdated:this.state.graphLastUpdated})),r.a.createElement(Dt,{value:E,index:1},r.a.createElement(Et,{song:i,score:o})),r.a.createElement(Dt,{value:E,index:2},r.a.createElement(yt,{song:i,score:o})),r.a.createElement(ce,{message:D,variant:"warning",handleClose:this.toggleErrorSnack,open:x,autoHideDuration:3e3}))}}]),t}(r.a.Component),Ot=Object(xt.e)(Object(ut.c)(kt)),Ct=function(e,t){if(0!==e)return"transparent";switch(t.clearState){case 0:return"#e0dede";case 1:return"#ea63ff";case 2:return"#acffab";case 3:return"#ff707a";case 4:return"#ff4545";case 5:return"#fff373";case 6:return"#ff793b";default:return"#ffffff"}},jt=[{id:"difficultyLevel",label:"\u2606"},{id:"title",label:"\u66f2\u540d"},{id:"currentBPI",label:"BPI"},{id:"exScore",label:"EX"}],Pt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).handleOpen=function(){var e=Object(ve.a)(ge.a.mark((function e(t,n,r){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,a.props.updateScoreData();case 3:return e.abrupt("return",a.setState({isOpen:!a.state.isOpen,currentSongData:n?a.props.allSongsData[n.title+Pe(n.difficulty)]:null,currentScoreData:n||null}));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),a.handleChangePage=function(e,t){return a.setState({page:t})},a.handleChangeRowsPerPage=function(e){return a.setState({page:0,rowsPerPage:+e.target.value})},a.state={page:0,rowsPerPage:10,isOpen:!1,currentSongData:null,currentScoreData:null},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.page,n=t.rowsPerPage,l=t.isOpen,i=t.currentSongData,o=t.currentScoreData,c=this.props,s=c.data,u=c.changeSort,m=c.sort,d=c.isDesc,f=c.mode;return r.a.createElement(Ze.a,{style:{width:"100%",overflowX:"auto"}},r.a.createElement("div",null,r.a.createElement($e.a,null,r.a.createElement(at.a,null,r.a.createElement(rt.a,null,jt.map((function(e,t){return r.a.createElement(tt.a,{key:e.id,onClick:function(){return u(t)}},(f<5||2!==t)&&e.label,f>4&&2===t&&"BP",t===m&&r.a.createElement("span",null,d&&r.a.createElement("span",null,"\u25bc"),!d&&r.a.createElement("span",null,"\u25b2")),t!==m&&r.a.createElement("span",null,"\u25b3"))})))),r.a.createElement(et.a,null,s.slice(a*n,a*n+n).map((function(t,a){return r.a.createElement(rt.a,{onClick:function(){return e.handleOpen(!1,t)},hover:!0,role:"checkbox",tabIndex:-1,key:t.title,style:a%2?{background:"#f7f7f7"}:{background:"white"}},jt.map((function(a,n){var l,i="hyper"===t.difficulty?"(H)":"leggendaria"===t.difficulty?"(\u2020)":"";return r.a.createElement(tt.a,{key:a.id+i,style:{backgroundColor:Ct(n,t),position:"relative"}},(f<5||"currentBPI"!==a.id)&&t[a.id],"title"===a.id&&i,f>0&&f<5&&"exScore"===a.id&&r.a.createElement("span",null,"(-",function(e,t,a){try{var n=2*t[e.title+Pe(e.difficulty)].notes;return Math.ceil(n*[1,2/3,7/9,8/9,1][a]-e.exScore)}catch(r){return}}(t,e.props.allSongsData,f),")"),f>4&&"currentBPI"===a.id&&(l=t.missCount,Number.isNaN(l)?"-":String(l)),3===n&&0===f&&t.lastScore>-1&&r.a.createElement("span",{className:"plusOverlayScore"},t.exScore-t.lastScore>0?"+"+Number(t.exScore-t.lastScore):t.exScore-t.lastScore))})))}))))),r.a.createElement(nt.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:this.props.data.length,rowsPerPage:n,page:a,labelRowsPerPage:"",backIconButtonProps:{"aria-label":"previous page"},nextIconButtonProps:{"aria-label":"next page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}),l&&r.a.createElement(Ot,{isOpen:l,song:i,score:o,handleOpen:this.handleOpen}))}}]),t}(r.a.Component),At=a(551),It=a(138),Nt=a.n(It),Bt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).handleLevelChange=function(e){return function(t){a.handleExec(e,t.target.checked,"level")}},a.handleDiffChange=function(e){return function(t){a.handleExec(e,t.target.checked,"difficulty")}},a.handleExec=function(e,t,n){var r=a.state;return t?r.options[n].push(e):r.options[n]=r.options[n].filter((function(t){return t!==e})),a.setState({scoreData:a.songFilter(r),options:r.options})},a.handleInputChange=function(e){var t=a.cloneState();return t.filterByName=e?e.target.value:"",a.setState({scoreData:a.songFilter(t),filterByName:t.filterByName})},a.songFilter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.state,t=["hyper","another","leggendaria"],n=e.mode,r=e.range,l=a.state.allSongsData;return 0===Object.keys(a.state.allSongsData).length?[]:a.props.full.filter((function(a){var i=2*l[a.title+Pe(a.difficulty)].notes;return function(){var e=function(e){return ye()(e).format("YYYYMMDD")};return 0===r||(1===r?e(a.updatedAt)===e(new Date):ye()(a.updatedAt).week()===ye()(new Date).week())}()&&(0===n||(1===n?a.exScore/i<2/3:2===n?a.exScore/i<7/9&&2/3<a.exScore/i:3===n?a.exScore/i<8/9&&7/9<a.exScore/i:4===n||(5===n?a.clearState<=3:6===n?a.clearState<=4:7!==n||a.clearState<=5)))&&e.options.level.some((function(e){return e===a.difficultyLevel}))&&e.options.difficulty.some((function(e){return t[Number(e)]===a.difficulty}))&&a.title.toLowerCase().indexOf(e.filterByName.toLowerCase())>-1}))},a.changeSort=function(e){var t=a.state,n=t.sort,r=t.isDesc;return n===e?a.setState({isDesc:!r}):a.setState({sort:e,isDesc:!0})},a.sortedData=function(){var e=a.state,t=e.scoreData,n=e.sort,r=e.isDesc,l=e.mode,i=e.allSongsData,o=t.sort((function(e,t){switch(n){case 0:return Number(t.difficultyLevel)-Number(e.difficultyLevel);case 1:return t.title.localeCompare(e.title,"ja",{numeric:!0});default:case 2:return l>4?e.missCount&&t.missCount?e.missCount-t.missCount||(e.missCount||1/0)-(t.missCount||1/0)||0:-1:t.currentBPI-e.currentBPI;case 3:if(l>0&&l<5){var a=2*i[e.title+Pe(e.difficulty)].notes,r=2*i[t.title+Pe(t.difficulty)].notes;return t.exScore/r-e.exScore/a}return t.exScore-e.exScore}}));return r?o:o.reverse()},a.handleModeChange=function(e){if("number"===typeof e.target.value){var t=a.cloneState();return t.mode=e.target.value,a.setState({scoreData:a.songFilter(t),mode:e.target.value})}},a.handleRangeCange=function(e){if("number"===typeof e.target.value){var t=a.cloneState();return t.range=e.target.value,a.setState({scoreData:a.songFilter(t),range:e.target.value})}},a.cloneState=function(){return JSON.parse(JSON.stringify(a.state))},a.state={isLoading:!0,filterByName:"",scoreData:[],allSongsData:{},mode:0,sort:2,isDesc:!0,options:{level:["11","12"],difficulty:["0","1","2"]},range:0},a.updateScoreData=a.updateScoreData.bind(Object(Ee.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){var t,a,n,r;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,(new Fe).getAll(xe());case 3:for(a=e.sent,n=0;n<a.length;++n)r=Ae(a[n].difficulty),t[a[n].title+r]=a[n];this.setState({scoreData:this.props.full,allSongsData:t,isLoading:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){if(!Nt()(e.full,this.props.full))return this.setState({scoreData:this.songFilter()})}},{key:"updateScoreData",value:function(){return this.props.updateScoreData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,r=t.filterByName,l=t.options,i=t.sort,o=t.isDesc,c=t.mode,s=t.range;return a?n.createElement(de.a,{className:"loaderCentered"},n.createElement(Ve.a,null)):n.createElement(de.a,{className:"commonLayout",fixed:!0,id:"songsVil"},n.createElement(p.a,{component:"h4",variant:"h4",color:"textPrimary",gutterBottom:!0,style:{display:"flex",justifyContent:"space-between"}},n.createElement(U.a,{id:this.props.title}),n.createElement(Xe.a,null,n.createElement(bt.a,{value:s,displayEmpty:!0,onChange:this.handleRangeCange},n.createElement(pt.a,{value:0},"\u5168\u671f\u9593"),n.createElement(pt.a,{value:1},"\u672c\u65e5\u66f4\u65b0\u5206"),n.createElement(pt.a,{value:2},"\u4eca\u9031\u66f4\u65b0\u5206")))),n.createElement(fe.a,{container:!0,spacing:1,style:{margin:"5px 0"}},n.createElement(fe.a,{item:!0,xs:6},n.createElement(Xe.a,{style:{width:"100%"}},n.createElement(St.a,null,n.createElement(U.a,{id:"Songs.mode"})),n.createElement(bt.a,{value:c,onChange:this.handleModeChange},n.createElement(pt.a,{value:0},n.createElement(U.a,{id:"Songs.mode0"})),n.createElement(pt.a,{value:1},n.createElement(U.a,{id:"Songs.mode1"})),n.createElement(pt.a,{value:2},n.createElement(U.a,{id:"Songs.mode2"})),n.createElement(pt.a,{value:3},n.createElement(U.a,{id:"Songs.mode3"})),n.createElement(pt.a,{value:4},n.createElement(U.a,{id:"Songs.mode4"})),n.createElement(pt.a,{value:5},n.createElement(U.a,{id:"Songs.mode5"})),n.createElement(pt.a,{value:6},n.createElement(U.a,{id:"Songs.mode6"})),n.createElement(pt.a,{value:7},n.createElement(U.a,{id:"Songs.mode7"}))))),n.createElement(fe.a,{item:!0,xs:6},n.createElement(Xe.a,{component:"fieldset",style:{width:"100%"}},n.createElement(St.a,{htmlFor:"standard-adornment-password"},n.createElement(U.a,{id:"Songs.filterByName"})),n.createElement(At.a,{style:{width:"100%"},placeholder:"(ex.)255",value:r,onChange:this.handleInputChange,endAdornment:r&&n.createElement(Qe.a,{position:"end"},n.createElement(h.a,{onClick:function(){return e.handleInputChange(null)}},n.createElement(qe.a,null)))})))),n.createElement(fe.a,{container:!0,spacing:1,id:"mainFilters",style:{margin:"5px 0"}},n.createElement(fe.a,{item:!0,xs:6},n.createElement(Xe.a,{component:"fieldset"},n.createElement(Ye.a,{component:"legend"},n.createElement(U.a,{id:"Songs.filterByLevel"})),n.createElement(ze.a,{row:!0},n.createElement(_e.a,{control:n.createElement(Je.a,{checked:l.level.some((function(e){return"11"===e})),onChange:this.handleLevelChange("11"),value:"11"}),label:"\u260611"}),n.createElement(_e.a,{control:n.createElement(Je.a,{checked:l.level.some((function(e){return"12"===e})),onChange:this.handleLevelChange("12"),value:"12"}),label:"\u260612"})))),n.createElement(fe.a,{item:!0,xs:6},n.createElement(Xe.a,{component:"fieldset"},n.createElement(Ye.a,{component:"legend"},n.createElement(U.a,{id:"Songs.filterByDifficulty"})),n.createElement(ze.a,{row:!0},n.createElement(_e.a,{control:n.createElement(Je.a,{checked:l.difficulty.some((function(e){return"0"===e})),onChange:this.handleDiffChange("0"),value:"hyper"}),label:"H"}),n.createElement(_e.a,{control:n.createElement(Je.a,{checked:l.difficulty.some((function(e){return"1"===e})),onChange:this.handleDiffChange("1"),value:"another"}),label:"A"}),n.createElement(_e.a,{control:n.createElement(Je.a,{checked:l.difficulty.some((function(e){return"2"===e})),onChange:this.handleDiffChange("2"),value:"leggendaria"}),label:"\u2020"}))))),n.createElement(Pt,{data:this.sortedData(),sort:i,isDesc:o,mode:c,changeSort:this.changeSort,allSongsData:this.state.allSongsData,updateScoreData:this.updateScoreData}))}}]),t}(n.Component),Lt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).state={full:[]},a.updateScoreData=a.updateScoreData.bind(Object(Ee.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateScoreData();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateScoreData",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){var t;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Me).getAll();case 2:t=e.sent,this.setState({full:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.full?n.createElement("div",null,n.createElement(Bt,{title:"Songs.title",full:this.state.full,updateScoreData:this.updateScoreData})):null}}]),t}(n.Component),Tt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).state={full:[]},a.updateScoreData=a.updateScoreData.bind(Object(Ee.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateScoreData();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateScoreData",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){var t,a,n,r,l,i,o,c,s;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Me,a="27",n=1,e.next=5,(new Fe).getAllFavoritedItems(n);case 5:r=e.sent,l=[],i=0;case 8:if(!(i<r.length)){e.next=20;break}return o=r[i],c=Ie(o.difficulty),e.next=13,t.getItem(o.title,c,a,n);case 13:if(s=e.sent,!(n&&"0"!==o.dpLevel||!n&&"0"===o.dpLevel)){e.next=16;break}return e.abrupt("continue",17);case 16:0===s.length?l.push({title:o.title,clearState:7,currentBPI:-15,difficulty:c,difficultyLevel:o.difficultyLevel,exScore:0,isSingle:n,storedAt:a,lastScore:-1,updatedAt:"-"}):l.push(s[0]);case 17:++i,e.next=8;break;case 20:this.setState({full:l});case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.full?n.createElement("div",null,n.createElement(Bt,{title:"Favorites.Title",full:this.state.full,updateScoreData:this.updateScoreData})):null}}]),t}(n.Component),Mt=[{id:"difficultyLevel",label:"\u2606"},{id:"title",label:"\u66f2\u540d"}],Rt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).handleOpen=Object(ve.a)(ge.a.mark((function e(){var t,n,r,l,i=arguments;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]&&i[0],n=i.length>1?i[1]:void 0,r=i.length>2?i[2]:void 0,!t){e.next=6;break}return e.next=6,a.props.updateScoreData(!0,r);case 6:return l=n?{difficulty:Ie(n.difficulty),title:n.title,currentBPI:NaN,exScore:0,difficultyLevel:n.difficultyLevel,storedAt:De(),isSingle:xe(),clearState:7,lastScore:-1,updatedAt:"-"}:null,e.abrupt("return",a.setState({isOpen:!a.state.isOpen,currentSongData:n||null,currentScoreData:l}));case 8:case"end":return e.stop()}}),e)}))),a.handleChangePage=function(e,t){return a.setState({page:t})},a.handleChangeRowsPerPage=function(e){return a.setState({page:0,rowsPerPage:+e.target.value})},a.state={page:0,rowsPerPage:10,isOpen:!1,currentSongData:null,currentScoreData:null},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.page,n=t.rowsPerPage,l=t.isOpen,i=t.currentSongData,o=t.currentScoreData,c=this.props,s=c.data,u=c.changeSort,m=c.sort,d=c.isDesc;return r.a.createElement(Ze.a,{style:{width:"100%",overflowX:"auto"}},r.a.createElement("div",null,r.a.createElement($e.a,null,r.a.createElement(at.a,null,r.a.createElement(rt.a,null,Mt.map((function(e,t){return r.a.createElement(tt.a,{key:e.id,onClick:function(){return u(t)}},e.label,t===m&&r.a.createElement("span",null,d&&r.a.createElement("span",null,"\u25bc"),!d&&r.a.createElement("span",null,"\u25b2")),t!==m&&r.a.createElement("span",null,"\u25b3"))})))),r.a.createElement(et.a,null,s.slice(a*n,a*n+n).map((function(t,a){return r.a.createElement(rt.a,{onClick:function(){return e.handleOpen(!1,t)},hover:!0,role:"checkbox",tabIndex:-1,key:t.title+t.difficulty,style:a%2?{background:"#f7f7f7"}:{background:"white"}},Mt.map((function(e,a){var n=Ie(t.difficulty),l="hyper"===n?"(H)":"leggendaria"===n?"(\u2020)":"";return r.a.createElement(tt.a,{key:e.id+l},t[e.id],"title"===e.id&&l)})))}))))),r.a.createElement(nt.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:this.props.data.length,rowsPerPage:n,page:a,labelRowsPerPage:"",backIconButtonProps:{"aria-label":"previous page"},nextIconButtonProps:{"aria-label":"next page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}),l&&r.a.createElement(Ot,{isOpen:l,song:i,score:o,handleOpen:this.handleOpen,willDelete:!0}))}}]),t}(r.a.Component),Ft=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).handleLevelChange=function(e){return function(t){a.handleExec(e,t.target.checked,"level")}},a.handleDiffChange=function(e){return function(t){a.handleExec(e,t.target.checked,"difficulty")}},a.handleExec=function(e,t,n){var r=a.state;return t?r.options[n].push(e):r.options[n]=r.options[n].filter((function(t){return t!==e})),a.setState({songData:a.songFilter(r),options:r.options})},a.handleInputChange=function(e){var t=a.cloneState();return t.filterByName=e?e.target.value:"",a.setState({songData:a.songFilter(t),filterByName:t.filterByName})},a.songFilter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.state,t=["hyper","another","leggendaria"];return a.props.full.filter((function(a){return e.options.level.some((function(e){return e===a.difficultyLevel}))&&e.options.difficulty.some((function(e){return t[Number(e)]===Ie(a.difficulty)}))&&a.title.toLowerCase().indexOf(e.filterByName.toLowerCase())>-1}))},a.changeSort=function(e){var t=a.state,n=t.sort,r=t.isDesc;return n===e?a.setState({isDesc:!r}):a.setState({sort:e,isDesc:!0})},a.sortedData=function(){var e=a.state,t=e.songData,n=e.sort,r=e.isDesc,l=t.sort((function(e,t){switch(n){case 0:return Number(t.difficultyLevel)-Number(e.difficultyLevel);case 1:default:return t.title.localeCompare(e.title,"ja",{numeric:!0})}}));return r?l:l.reverse()},a.cloneState=function(){return JSON.parse(JSON.stringify(a.state))},a.state={filterByName:"",songData:[],sort:1,isDesc:!1,options:{level:["11","12"],difficulty:["0","1","2"]}},a.updateScoreData=a.updateScoreData.bind(Object(Ee.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.setState({songData:this.songFilter()})}},{key:"componentDidUpdate",value:function(e){if(!Nt()(e.full,this.props.full))return this.setState({songData:this.songFilter()})}},{key:"updateScoreData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return e&&t?this.props.updateScoreData(e,t):this.props.updateScoreData(!1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.filterByName,r=t.options,l=t.sort,i=t.isDesc;return n.createElement(de.a,{className:"commonLayout",fixed:!0,id:"songsVil"},n.createElement(p.a,{component:"h4",variant:"h4",color:"textPrimary",gutterBottom:!0,style:{display:"flex",justifyContent:"space-between"}},n.createElement(U.a,{id:this.props.title})),n.createElement(fe.a,{container:!0,spacing:1,style:{margin:"5px 0"}},n.createElement(fe.a,{item:!0,xs:12},n.createElement(Xe.a,{component:"fieldset",style:{width:"100%"}},n.createElement(St.a,{htmlFor:"standard-adornment-password"},n.createElement(U.a,{id:"Songs.filterByName"})),n.createElement(At.a,{style:{width:"100%"},placeholder:"(ex.)255",value:a,onChange:this.handleInputChange,endAdornment:a&&n.createElement(Qe.a,{position:"end"},n.createElement(h.a,{onClick:function(){return e.handleInputChange(null)}},n.createElement(qe.a,null)))})))),n.createElement(fe.a,{container:!0,spacing:1,id:"mainFilters",style:{margin:"5px 0"}},n.createElement(fe.a,{item:!0,xs:6},n.createElement(Xe.a,{component:"fieldset"},n.createElement(Ye.a,{component:"legend"},n.createElement(U.a,{id:"Songs.filterByLevel"})),n.createElement(ze.a,{row:!0},n.createElement(_e.a,{control:n.createElement(Je.a,{checked:r.level.some((function(e){return"11"===e})),onChange:this.handleLevelChange("11"),value:"11"}),label:"\u260611"}),n.createElement(_e.a,{control:n.createElement(Je.a,{checked:r.level.some((function(e){return"12"===e})),onChange:this.handleLevelChange("12"),value:"12"}),label:"\u260612"})))),n.createElement(fe.a,{item:!0,xs:6},n.createElement(Xe.a,{component:"fieldset"},n.createElement(Ye.a,{component:"legend"},n.createElement(U.a,{id:"Songs.filterByDifficulty"})),n.createElement(ze.a,{row:!0},n.createElement(_e.a,{control:n.createElement(Je.a,{checked:r.difficulty.some((function(e){return"0"===e})),onChange:this.handleDiffChange("0"),value:"hyper"}),label:"H"}),n.createElement(_e.a,{control:n.createElement(Je.a,{checked:r.difficulty.some((function(e){return"1"===e})),onChange:this.handleDiffChange("1"),value:"another"}),label:"A"}),n.createElement(_e.a,{control:n.createElement(Je.a,{checked:r.difficulty.some((function(e){return"2"===e})),onChange:this.handleDiffChange("2"),value:"leggendaria"}),label:"\u2020"}))))),n.createElement(Rt,{data:this.sortedData(),sort:l,isDesc:i,changeSort:this.changeSort,updateScoreData:this.updateScoreData}))}}]),t}(n.Component),Ht=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).state={full:[]},a.updateScoreData=a.updateScoreData.bind(Object(Ee.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateScoreData();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateScoreData",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){var t,a,n,r,l,i,o,c,s,u,m=arguments;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.length>0&&void 0!==m[0]&&m[0],a=m.length>1?m[1]:void 0,!t||!a){e.next=6;break}return n=(n=this.state.full).filter((function(e){return e.title!==a.title&&a.difficulty})),e.abrupt("return",this.setState({full:n}));case 6:return r=De(),l=xe(),e.next=10,(new Fe).getAll(l);case 10:i=e.sent,o=new Me,c=[],s=0;case 14:if(!(s<i.length)){e.next=23;break}return u=i[s],e.next=18,o.getItem(u.title,Ie(u.difficulty),r,l);case 18:0===e.sent.length&&c.push(u);case 20:++s,e.next=14;break;case 23:this.setState({full:c});case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return 0===this.state.full.length?n.createElement(de.a,{className:"loaderCentered"},n.createElement(Ve.a,null)):n.createElement("div",null,n.createElement(Ft,{title:"NotPlayed.Title",full:this.state.full,updateScoreData:this.updateScoreData}))}}]),t}(n.Component),Gt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).state={isLoading:!0,totalBPI:0,perDate:[]},a.updateScoreData=a.updateScoreData.bind(Object(Ee.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateScoreData();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateScoreData",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){var t,a,n,r,l,i;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Me,a=new Le,n=De(),r=xe(),e.next=6,(new Fe).getAllTwelvesLength(r);case 6:return a.allTwelvesLength=e.sent,e.next=9,t.getAllTwelvesBPI(r,n,"12");case 9:return a.allTwelvesBPI=e.sent,e.next=12,(new Re).getAll(r,n,"12");case 12:e.t0=function(e,t){var a=ye()(t.updatedAt).format("YYYY/MM/DD");return e[a]||(e[a]=[]),e[a].push(t),e},e.t1={},l=e.sent.reduce(e.t0,e.t1),i=[],Object.keys(l).map((function(e,t){if(t>10)return 0;var a=l[e].reduce((function(e,t){return{BPI:e.BPI+t.BPI}}));return i.push({name:e,sum:l[e].length,avg:Math.round(a.BPI/l[e].length*100)/100}),0})),this.setState({isLoading:!1,totalBPI:a.totalBPI(),perDate:i.sort((function(e,t){return ye()(e.name).diff(t.name)}))});case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.totalBPI,a=e.isLoading,r=e.perDate,l=this.props.intl.formatMessage;return a?n.createElement(de.a,{className:"loaderCentered"},n.createElement(Ve.a,null)):n.createElement(de.a,{className:"commonLayout",fixed:!0},n.createElement(p.a,{component:"h4",variant:"h4",color:"textPrimary",gutterBottom:!0},n.createElement(U.a,{id:"Stats.title"})),n.createElement(fe.a,{container:!0,spacing:3},n.createElement(fe.a,{item:!0,xs:12,md:3,lg:3},n.createElement(Ze.a,{style:{padding:"15px"},className:"responsiveTotalBPI"},n.createElement(p.a,{component:"h6",variant:"h6",color:"primary",gutterBottom:!0},n.createElement(U.a,{id:"Stats.TotalBPI"})),n.createElement(p.a,{component:"h2",variant:"h2",color:"primary"},t))),n.createElement(fe.a,{item:!0,xs:12,md:9,lg:9},n.createElement(Ze.a,{style:{padding:"15px",height:240}},n.createElement(p.a,{component:"h6",variant:"h6",color:"primary",gutterBottom:!0},n.createElement(U.a,{id:"Stats.EachDay"})),r.length>0&&n.createElement("div",{style:{width:"95%",height:"100%",margin:"5px auto"}},n.createElement(gt.i,{width:"100%"},n.createElement(gt.e,{data:r,margin:{top:5,right:30,left:-30,bottom:25}},n.createElement(gt.c,{strokeDasharray:"3 3"}),n.createElement(gt.k,{dataKey:"name"}),n.createElement(gt.l,{tick:{dx:-5}}),n.createElement(gt.j,null),n.createElement(gt.a,{dataKey:"sum",name:l({id:"Stats.UpdatedSum"}),fill:"#82ca9d"}),n.createElement(gt.g,{dataKey:"avg",name:l({id:"Stats.Average"})})))),0===r.length&&n.createElement("p",null,"No data found.")))))}}]),t}(n.Component),Ut=Object(ut.c)(Gt),Vt=a(77),Wt=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(s.a)(t).call(this))).state={lang:ke(),store:De(),cannotMove:!1},e.setLang=e.setLang.bind(Object(Ee.a)(e)),e.setStore=e.setStore.bind(Object(Ee.a)(e)),e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"setLang",value:function(e){localStorage.setItem("lang",e),this.setState({lang:e})}},{key:"setStore",value:function(e){localStorage.setItem("currentStore",e),this.setState({store:e})}},{key:"setMove",value:function(e){this.setState({cannotMove:e})}}]),t}(Vt.a),Yt=a(265),Xt=a.n(Yt),zt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).updateDef=Object(ve.a)(ge.a.mark((function e(){var t,n,r,l,i,o,c;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){a.props.global.setMove(!1)},e.prev=1,a.props.global.setMove(!0),a.setState({disableUpdateBtn:!0,message:""}),n=new Fe,r=function(e){return e.reduce((function(e,t){return e[t.title]=t,e}),{})},e.next=8,n.getAll(xe()).then((function(e){return r(e)}));case 8:return l=e.sent,e.next=11,fetch("https://files.poyashi.me/json/songs.json").then((function(e){return e.json()}));case 11:if((i=e.sent).version!==a.state.currentVersion){e.next=15;break}return t(),e.abrupt("return",a.setState({disableUpdateBtn:!1,message:"\u5b9a\u7fa9\u30c7\u30fc\u30bf\u306f\u3059\u3067\u306b\u6700\u65b0\u3067\u3059"}));case 15:return o=function(){return i.body.map((function(e){return new Promise((function(t){console.log(e.title),l[e.title]?n.updateItem(e).then((function(){return t()})):n.setItem(e).then((function(){return t()}))}))}))},e.next=18,Promise.all(o());case 18:return(c=new Me).setNewSongsDBRawData(r(i.body)),e.next=22,c.recalculateBPI();case 22:localStorage.setItem("lastDefFileVer",i.version),a.setState({currentVersion:i.version,disableUpdateBtn:!1,message:"\u66f4\u65b0\u5b8c\u4e86"}),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(1),console.log(e.t0);case 29:return t(),e.abrupt("return");case 31:case"end":return e.stop()}}),e,null,[[1,26]])}))),a.state={isLoading:!1,disableUpdateBtn:!1,currentVersion:Oe(),message:""},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,r=t.disableUpdateBtn,l=t.message;return a?n.createElement(de.a,{className:"loaderCentered"},n.createElement(Ve.a,null)):n.createElement(Vt.c,{to:[Wt]},(function(t){var a=t.state,i=t.setLang,o=t.setStore;return n.createElement(de.a,{className:"commonLayout",fixed:!0},n.createElement(p.a,{component:"h4",variant:"h4",color:"textPrimary",gutterBottom:!0},n.createElement(U.a,{id:"Settings.title"})),n.createElement(Ze.a,{style:{padding:"15px"}},n.createElement(Xe.a,null,n.createElement(St.a,null,n.createElement(U.a,{id:"Settings.language"})),n.createElement(bt.a,{value:a.lang,onChange:function(e){"string"===typeof e.target.value&&i(e.target.value)}},n.createElement(pt.a,{value:"ja"},"\u65e5\u672c\u8a9e"),n.createElement(pt.a,{value:"en"},"English"))),n.createElement(p.a,{variant:"caption",display:"block"},n.createElement(U.a,{id:"Settings.noteLang"})),n.createElement(y.a,{style:{margin:"10px 0"}}),n.createElement(Xe.a,null,n.createElement(St.a,null,n.createElement(U.a,{id:"Settings.dataStore"})),n.createElement(bt.a,{value:a.store,onChange:function(e){"string"===typeof e.target.value&&o(e.target.value)}},n.createElement(pt.a,{value:"26"},"26 Rootage"),n.createElement(pt.a,{value:"27"},"27 HEROIC VERSE"))),n.createElement(p.a,{variant:"caption",display:"block"},n.createElement(U.a,{id:"Settings.noteMes1"})),n.createElement(p.a,{variant:"caption",display:"block"},n.createElement(U.a,{id:"Settings.inaccurateMes"})),n.createElement(y.a,{style:{margin:"10px 0"}}),n.createElement(Xe.a,null,n.createElement(p.a,{variant:"caption",display:"block",className:"MuiFormLabel-root MuiInputLabel-animated MuiInputLabel-shrink"},n.createElement(U.a,{id:"Settings.Update"})),n.createElement("div",{style:{position:"relative"}},n.createElement(X.a,{variant:"contained",color:"secondary",onClick:e.updateDef,disabled:r,startIcon:n.createElement(Xt.a,null)},n.createElement(U.a,{id:"Settings.UpdateResourcePacks"})),r&&n.createElement(Ve.a,{size:24,style:{color:"#777",position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}))),n.createElement(p.a,{variant:"caption",display:"block"},l),n.createElement(p.a,{variant:"caption",display:"block"},n.createElement(U.a,{id:"Settings.currentVersion"}),e.state.currentVersion),n.createElement(p.a,{variant:"caption",display:"block"},n.createElement(U.a,{id:"Settings.updateWarning"}))))}))}}]),t}(n.Component),_t=Object(ut.c)(zt),Jt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).handleOpen=function(){var e=Object(ve.a)(ge.a.mark((function e(t,n){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.setState({isOpen:!a.state.isOpen,currentSongData:n?n.songData:null,currentScoreData:n?n.scoreData:null}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.cloneState=function(){return JSON.parse(JSON.stringify(a.state))},a.handleChangePage=function(e,t){return a.props.handleChangePage(t)},a.handleChangeRowsPerPage=function(e){return a.props.handleChangeRowsPerPage(e.target.value)},a.state={isOpen:!1,currentSongData:null,currentScoreData:null},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.currentScoreData,r=t.currentSongData,l=t.isOpen,i=this.props,o=i.full,c=i.isLoading,s=i.page,u=i.rowsPerPage,m=i.changeSort,d=i.sort,f=i.isDesc,p=[{id:"difficultyLevel",label:"\u2606"},{id:"title",label:"\u66f2\u540d"},{id:"exScore",label:"Source"},{id:"compareData",label:"Compare"}];return c?n.createElement(de.a,{className:"loaderCentered"},n.createElement(Ve.a,null)):n.createElement(Ze.a,{style:{width:"100%",overflowX:"auto"}},n.createElement("div",null,n.createElement($e.a,null,n.createElement(at.a,null,n.createElement(rt.a,null,p.map((function(e,t){return n.createElement(tt.a,{key:e.id,onClick:function(){return m(t)}},e.label,t===d&&n.createElement("span",null,f&&n.createElement("span",null,"\u25bc"),!f&&n.createElement("span",null,"\u25b2")),t!==d&&n.createElement("span",null,"\u25b3"))})))),n.createElement(et.a,null,o.slice(s*u,s*u+u).map((function(t,a){return n.createElement(rt.a,{onClick:function(){return e.handleOpen(!1,t)},hover:!0,role:"checkbox",tabIndex:-1,key:t.title,style:a%2?{background:"#f7f7f7"}:{background:"white"}},p.map((function(e,a){var r="hyper"===t.difficulty?"(H)":"leggendaria"===t.difficulty?"(\u2020)":"";return n.createElement(tt.a,{key:e.id+r,style:{backgroundColor:Ct(a,t.scoreData),position:"relative"}},t[e.id],3===a&&n.createElement("span",{className:"plusOverlayScore"},t.gap))})))}))))),n.createElement(nt.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:o.length,rowsPerPage:u,page:s,labelRowsPerPage:"",backIconButtonProps:{"aria-label":"previous page"},nextIconButtonProps:{"aria-label":"next page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}),l&&n.createElement(Ot,{isOpen:l,song:r,score:a,handleOpen:this.handleOpen}))}}]),t}(n.Component),Kt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).handleLevelChange=function(e){return function(t){a.handleExec(e,t.target.checked,"level")}},a.handleDiffChange=function(e){return function(t){a.handleExec(e,t.target.checked,"difficulty")}},a.handleExec=function(e,t,n){var r=a.state;return t?r.options[n].push(e):r.options[n]=r.options[n].filter((function(t){return t!==e})),a.setState({options:r.options}),a.filter()},a.changeSort=function(e){var t=a.state,n=t.sort,r=t.isDesc;if(n===e)return a.setState({isDesc:!r});a.setState({sort:e,isDesc:!0})},a.handleCompareFromChange=function(){var e=Object(ve.a)(ge.a.mark((function e(t){var n;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"===typeof t.target.value){e.next=2;break}return e.abrupt("return");case 2:return(n=a.cloneState()).compareFrom=t.target.value,a.setState({compareFrom:t.target.value,isLoading:!0}),e.abrupt("return",a.dataHandler(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleCompareToChange=function(){var e=Object(ve.a)(ge.a.mark((function e(t){var n;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"===typeof t.target.value){e.next=2;break}return e.abrupt("return");case 2:return(n=a.cloneState()).compareTo=t.target.value,a.setState({compareTo:t.target.value,isLoading:!0}),e.abrupt("return",a.dataHandler(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.filter=function(){var e=a.state,t=e.options,n=e.full,r=["hyper","another","leggendaria"];return n.filter((function(e){return t.level.some((function(t){return t===e.difficultyLevel}))&&t.difficulty.some((function(t){return r[Number(t)]===e.difficulty}))}))},a.sortedData=function(){var e=a.state,t=e.isDesc,n=e.sort,r=a.filter().sort((function(e,t){switch(n){case 0:return Number(t.difficultyLevel)-Number(e.difficultyLevel);case 1:return t.title.localeCompare(e.title,"ja",{numeric:!0});default:case 2:return t.exScore-e.exScore;case 3:return t.gap-e.gap}}));return console.log(r),t?r.reverse():r},a.cloneState=function(){return JSON.parse(JSON.stringify(a.state))},a.handleChangePage=function(e){return a.setState({page:e})},a.handleChangeRowsPerPage=function(e){return a.setState({page:0,rowsPerPage:+e})},a.state={isLoading:!0,full:[],filtered:[],sort:3,isDesc:!0,options:{level:["11","12"],difficulty:["0","1","2"]},filterByName:"",compareFrom:"27",compareTo:"26",page:1,rowsPerPage:10},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.dataHandler();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dataHandler",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){var t,a,n,r,l,i,o,c,s,u,m,d,f=arguments;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:this.state,a=[],n=t.compareFrom,r=t.compareTo,l=xe(),i=new Me(l,n),o=new Fe,e.next=9,i.getSpecificVersionAll();case 9:c=e.sent,s=0;case 11:if(!(s<c.length)){e.next=24;break}return u=0,e.next=15,i.getItem(c[s].title,c[s].difficulty,r,l);case 15:return m=e.sent,e.next=18,o.getOneItemIsSingle(c[s].title,c[s].difficulty);case 18:d=e.sent,u=m&&0!==m.length?m[0].exScore:0,a.push({title:c[s].title,songData:d[0],scoreData:c[s],difficulty:c[s].difficulty,difficultyLevel:c[s].difficultyLevel,exScore:c[s].exScore,compareData:u,gap:c[s].exScore-u});case 21:++s,e.next=11;break;case 24:return e.abrupt("return",this.setState({full:a,isLoading:!1}));case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=(e.full,e.compareFrom),a=e.compareTo,r=e.isLoading,l=e.page,i=e.rowsPerPage,o=e.options,c=e.sort,s=e.isDesc;return this.state.full?n.createElement(de.a,{className:"commonLayout",fixed:!0},n.createElement(p.a,{component:"h4",variant:"h4",color:"textPrimary",gutterBottom:!0},n.createElement(U.a,{id:"Compare.Title"})),n.createElement(fe.a,{container:!0,spacing:1,style:{margin:"5px 0"}},n.createElement(fe.a,{item:!0,xs:6},n.createElement(Xe.a,{style:{width:"100%"}},n.createElement(St.a,null,n.createElement(U.a,{id:"Compare.From"})),n.createElement(bt.a,{value:t,onChange:this.handleCompareFromChange},n.createElement(pt.a,{value:"26"},"26 Rootage"),n.createElement(pt.a,{value:"27"},"27 HEROIC VERSE")))),n.createElement(fe.a,{item:!0,xs:6},n.createElement(Xe.a,{style:{width:"100%"}},n.createElement(St.a,null,n.createElement(U.a,{id:"Compare.To"})),n.createElement(bt.a,{value:a,onChange:this.handleCompareToChange},n.createElement(pt.a,{value:"26"},"26 Rootage"),n.createElement(pt.a,{value:"27"},"27 HEROIC VERSE"),n.createElement(pt.a,{value:"WR"},"WORLD RECORD"),n.createElement(pt.a,{value:"AVERAGE"},"AVERAGE"))))),n.createElement(fe.a,{container:!0,spacing:1,id:"mainFilters",style:{margin:"5px 0"}},n.createElement(fe.a,{item:!0,xs:6},n.createElement(Xe.a,{component:"fieldset"},n.createElement(Ye.a,{component:"legend"},n.createElement(U.a,{id:"Songs.filterByLevel"})),n.createElement(ze.a,{row:!0},n.createElement(_e.a,{control:n.createElement(Je.a,{checked:o.level.some((function(e){return"11"===e})),onChange:this.handleLevelChange("11"),value:"11"}),label:"\u260611"}),n.createElement(_e.a,{control:n.createElement(Je.a,{checked:o.level.some((function(e){return"12"===e})),onChange:this.handleLevelChange("12"),value:"12"}),label:"\u260612"})))),n.createElement(fe.a,{item:!0,xs:6},n.createElement(Xe.a,{component:"fieldset"},n.createElement(Ye.a,{component:"legend"},n.createElement(U.a,{id:"Songs.filterByDifficulty"})),n.createElement(ze.a,{row:!0},n.createElement(_e.a,{control:n.createElement(Je.a,{checked:o.difficulty.some((function(e){return"0"===e})),onChange:this.handleDiffChange("0"),value:"hyper"}),label:"H"}),n.createElement(_e.a,{control:n.createElement(Je.a,{checked:o.difficulty.some((function(e){return"1"===e})),onChange:this.handleDiffChange("1"),value:"another"}),label:"A"}),n.createElement(_e.a,{control:n.createElement(Je.a,{checked:o.difficulty.some((function(e){return"2"===e})),onChange:this.handleDiffChange("2"),value:"leggendaria"}),label:"\u2020"}))))),n.createElement(Jt,{full:this.sortedData(),isLoading:r,page:l,rowsPerPage:i,sort:c,isDesc:s,changeSort:this.changeSort,handleChangeRowsPerPage:this.handleChangeRowsPerPage,handleChangePage:this.handleChangePage})):null}}]),t}(n.Component),qt={"Top.Title":"BPIManager","GlobalNav.Home":"\u30db\u30fc\u30e0","GlobalNav.Data":"\u30c7\u30fc\u30bf","GlobalNav.FavoriteSongs":"\u304a\u6c17\u306b\u5165\u308a\u697d\u66f2","GlobalNav.SongList":"\u697d\u66f2\u4e00\u89a7","GlobalNav.unregisteredSongs":"\u672a\u30d7\u30ec\u30a4\u697d\u66f2","GlobalNav.Statistics":"\u7d71\u8a08","GlobalNav.compare":"\u30b9\u30b3\u30a2\u6bd4\u8f03","GlobalNav.Settings":"\u8a2d\u5b9a","Index.heroText":"Web\u4e0a\u3067beatmania IIDX\u306e\u30b9\u30b3\u30a2\u3092\u7ba1\u7406\u3057\u3001BPI\u3068\u3057\u3066\u53ef\u8996\u5316\u3067\u304d\u307e\u3059\u3002","Index.importButton":"\u4f7f\u3063\u3066\u307f\u308b","Index.notes1":"beatmania\u306f\u682a\u5f0f\u4f1a\u793e\u30b3\u30ca\u30df\u30c7\u30b8\u30bf\u30eb\u30a8\u30f3\u30bf\u30c6\u30a4\u30f3\u30e1\u30f3\u30c8\u306e\u767b\u9332\u5546\u6a19\u3067\u3059\u3002","Index.notes2":"\u672c\u30c4\u30fc\u30eb\u306fnorimiso\u69d8\u8003\u6848\u306eBPI\u304a\u3088\u3073ZUBU\u69d8\u5236\u4f5c\u306eBPICL\u306e\u305d\u308c\u305e\u308c\u306b\u30a4\u30f3\u30b9\u30d1\u30a4\u30a2\u3055\u308c\u3066\u5236\u4f5c\u3055\u308c\u307e\u3057\u305f\u3002","Data.add":"\u30b9\u30b3\u30a2\u306e\u30a4\u30f3\u30dd\u30fc\u30c8","Data.infoBulk":"e-AMUSEMENT\u30d7\u30ec\u30df\u30a2\u30e0\u30b3\u30fc\u30b9\u306b\u52a0\u5165\u6e08\u307f\u306e\u5834\u5408\u3001CSV\u30c7\u30fc\u30bf\u3092\u53d6\u308a\u8fbc\u3080\u3053\u3068\u3067\u5168\u3066\u306e\u66f2\u30c7\u30fc\u30bf\u3092\u4e00\u62ec\u3067\u30a4\u30f3\u30dd\u30fc\u30c8\u3067\u304d\u307e\u3059\u3002","Data.howToBulk1":"\u307e\u305a","Data.CSVURL":"\u3053\u3061\u3089","Data.howToBulk2":"\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001\u6848\u5185\u306b\u5f93\u3063\u3066\u8868\u793a\u3055\u308c\u305fCSV\u30c7\u30fc\u30bf\uff08\u30c6\u30ad\u30b9\u30c8\u5f62\u5f0f\uff09\u3092\u4e0b\u306e\u30dc\u30c3\u30af\u30b9\u306b\u30b3\u30d4\u30fc\u3057\u3066\u304f\u3060\u3055\u3044\u3002","Data.Execute":"\u53d6\u308a\u8fbc\u307f\u5b9f\u884c","Data.notPremium1":"\u30d7\u30ec\u30df\u30a2\u30e0\u30b3\u30fc\u30b9\u306b\u52a0\u5165\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u3001\u73fe\u6bb5\u968e\u3067\u306f\u500b\u5225\u306b\u66f2\u30c7\u30fc\u30bf\u3092\u5165\u529b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002","Data.Success":"\u30a4\u30f3\u30dd\u30fc\u30c8\u306b\u6210\u529f\u3057\u307e\u3057\u305f\u3002","Data.Failed":"\u30a4\u30f3\u30dd\u30fc\u30c8\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002","Data.edit":"\u30b9\u30b3\u30a2\u306e\u624b\u52d5\u5165\u529b","Data.howToEdit":"\u5404\u697d\u66f2\u306e\u8a73\u7d30\u8868\u793a\u753b\u9762\u3067\u30b9\u30b3\u30a2\u3092\u7de8\u96c6\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u4ee5\u4e0b\u304c\u624b\u9806\u3067\u3059:","Data.howToEdit1":"\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u300c\u672a\u30d7\u30ec\u30a4\u697d\u66f2\u300d\u30da\u30fc\u30b8\u3078\u79fb\u52d5\u3057\u3001\u66f2\u691c\u7d22\u30d5\u30a9\u30fc\u30e0\u306b\u30b9\u30b3\u30a2\u3092\u66f4\u65b0\u3057\u305f\u3044\u697d\u66f2\u306e\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002","Data.howToEdit2":"\u691c\u7d22\u7d50\u679c\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u306e\u3067\u3001\u76ee\u7684\u306e\u697d\u66f2\u540d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002","Data.howToEdit3":"\u697d\u66f2\u8a73\u7d30\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u306e\u3067\u3001\u66f4\u65b0\u5f8c\u306e\u30b9\u30b3\u30a2\u3092\u5165\u529b\u3057\u3001\u4fdd\u5b58\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002","Data.howToEdit4":"That's all!","Songs.title":"\u697d\u66f2\u30c7\u30fc\u30bf","Songs.filterByLevel":"\u30ec\u30d9\u30eb","Songs.filterByDifficulty":"\u96e3\u6613\u5ea6","Songs.detailedFilter":"\u8a73\u7d30\u6761\u4ef6","Songs.filterByName":"\u66f2\u540d\u3067\u7d5e\u308a\u8fbc\u307f","Songs.filterByFavorite":"\u304a\u6c17\u306b\u5165\u308a\u66f2","Songs.mode":"\u30e2\u30fc\u30c9\u9078\u629e","Songs.mode0":"BPI\u8a70\u3081","Songs.mode1":"A\u72d9\u3044","Songs.mode2":"AA\u72d9\u3044","Songs.mode3":"AAA\u72d9\u3044","Songs.mode4":"MAX\u72d9\u3044","Songs.mode5":"HARD CLEAR\u72d9\u3044","Songs.mode6":"EX-HARD CLEAR\u72d9\u3044","Songs.mode7":"FULLCOMBO\u72d9\u3044","Songs.legend":"\u51e1\u4f8b\u304a\u3088\u3073\u4f7f\u7528\u65b9\u6cd5\u3092\u78ba\u8a8d\u3059\u308b\u5834\u5408\u306f\u3001\u3053\u3053\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u30d8\u30eb\u30d7\u3092\u8868\u793a\u3057\u3066\u304f\u3060\u3055\u3044","Songs.updatedToday":"\u672c\u65e5\u66f4\u65b0\u5206\u306e\u307f\u8868\u793a","Details.SaveButton":"\u4fdd\u5b58","Details.typeNewScore":"\u3042\u306a\u305f\u306e\u81ea\u5df1\u30d9\u30b9\u30c8","Details.FavButton":"\u304a\u6c17\u306b\u5165\u308a","Details.FavButtonRemove":"\u304a\u6c17\u306b\u5165\u308a\u89e3\u9664","Details.FavButtonRemoved":"\u304a\u6c17\u306b\u5165\u308a\u304b\u3089\u524a\u9664\u3057\u307e\u3057\u305f\u3002","Details.FavButtonAdded":"\u304a\u6c17\u306b\u5165\u308a\u767b\u9332\u3057\u307e\u3057\u305f\u3002","Details.Graph":"\u30b0\u30e9\u30d5","Details.Details":"\u8a73\u7d30","Details.Diffs":"\u5dee\u5206","Details.ErrorIIDXInfo":"IIDXInfo\u306f\u260612\u697d\u66f2\u3067\u306e\u307f\u5229\u7528\u3067\u304d\u307e\u3059\u3002","Common.Tweet":"\u30c4\u30a4\u30fc\u30c8","SongDetail.SongDetailHead":"\u697d\u66f2","SongDetail.Notes":"\u30ce\u30fc\u30c8\u6570","SongDetail.WorldRecord":"\u5168\u4e00","SongDetail.Average":"\u7686\u4f1d\u5e73\u5747","SongDetail.You":"\u3042\u306a\u305f","SongDetail.Version":"\u30d0\u30fc\u30b8\u30e7\u30f3","SongDetail.ScoreDetailHead":"\u30d7\u30ec\u30a4\u72b6\u614b","SongDetail.ClearState":"\u30e9\u30f3\u30d7","SongDetail.MissCount":"\u30df\u30b9\u30ab\u30a6\u30f3\u30c8","SongDetail.LastPlayed":"\u6700\u7d42\u30d7\u30ec\u30a4","SongDetail.ScoreDetails":"\u8a73\u7d30","SongDiffs.Target":"\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8","SongDiffs.WithinSameVersion":"\u540c\u4e00\u30d0\u30fc\u30b8\u30e7\u30f3\u5185","SongDiffs.EachVersion":"\u30d0\u30fc\u30b8\u30e7\u30f3\u9593","Favorites.Title":"\u304a\u6c17\u306b\u5165\u308a","NotPlayed.Title":"\u672a\u30d7\u30ec\u30a4\u697d\u66f2","Stats.title":"\u7d71\u8a08\u30c7\u30fc\u30bf","Stats.TotalBPI":"\u7dcf\u5408BPI","Stats.EachDay":"\u65e5\u5225\u66f4\u65b0\u6570/\u5e73\u5747BPI","Stats.UpdatedSongs":"\u66f4\u65b0\u3057\u305f\u697d\u66f2","Stats.UpdatedSum":"\u66f4\u65b0\u4ef6\u6570","Stats.Average":"\u5e73\u5747BPI","Stats.LethalWeapon":"\u6b66\u5668\u66f2","Stats.PossibleToGetBetter":"\u4f38\u3073\u305d\u3046\u306a\u66f2","Compare.Title":"\u30c7\u30fc\u30bf\u6bd4\u8f03","Compare.From":"\u6bd4\u8f03\u5143","Compare.To":"\u6bd4\u8f03\u5148","Settings.title":"\u8a2d\u5b9a","Settings.language":"\u8a00\u8a9e","Settings.dataStore":"\u30d0\u30fc\u30b8\u30e7\u30f3","Settings.delete":"\u30c7\u30fc\u30bf\u306e\u30ea\u30bb\u30c3\u30c8","Settings.noteLang":"UI\u306b\u7528\u3044\u308b\u8a00\u8a9e\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002","Settings.noteMes1":"\u904e\u53bb\u4f5c\u30b9\u30b3\u30a2\u3092\u767b\u9332\u3059\u308b\u3053\u3068\u3067\u3001\u6700\u65b0\u4f5c\u3068\u306e\u30c7\u30fc\u30bf\u6bd4\u8f03\u304c\u53ef\u80fd\u3067\u3059\u3002","Settings.inaccurateMes":"\u904e\u53bb\u4f5c\u306e\u30b9\u30b3\u30a2\u3082\u4eca\u73fe\u5728\u306e\u6700\u65b0\u51681,\u5e73\u5747\u30b9\u30b3\u30a2\u3067BPI\u304c\u8a08\u7b97\u3055\u308c\u307e\u3059\u3002\u53c2\u8003\u7a0b\u5ea6\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002","Settings.Update":"\u66f4\u65b0","Settings.UpdateResourcePacks":"\u5b9a\u7fa9\u30c7\u30fc\u30bf\u306e\u66f4\u65b0","Settings.currentVersion":"\u73fe\u5728\u306e\u5b9a\u7fa9\u30d0\u30fc\u30b8\u30e7\u30f3:","Settings.updateWarning":"\u66f4\u65b0\u306b\u306f\u6642\u9593\u304c\u304b\u304b\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002"},Qt={"Top.Title":"BPIManager","GlobalNav.Home":"Home","GlobalNav.Data":"Data","GlobalNav.FavoriteSongs":"Favorite Songs","GlobalNav.SongList":"Songs","GlobalNav.unregisteredSongs":"Not played yet","GlobalNav.Statistics":"Statistics","GlobalNav.compare":"Compare","GlobalNav.Settings":"Settings","Index.heroText":"Easily manage your scores of beatmania IIDX and visualize as BPI, in Web.","Index.importButton":"Try it out!","Index.notes1":"beatmania is the trademark registered by Konami Degital Entertainment Co., Ltd.","Index.notes2":"This tool was affected by both of BPI which was invented by norimiso and BPICL which was released by ZUBU.","Data.add":"Import score data","Data.infoBulk":"If you've been subscribed to e-AMUSEMENT Premium Course, you can import all your scores in bulk by importing CSV from official IIDX website.","Data.howToBulk1":"Just access ","Data.CSVURL":"HERE","Data.howToBulk2":", copy displayed text and then paste it to form shown below.","Data.Execute":"Import","Data.notPremium1":"If you cannot use the way above, so please fill each songs in individually.","Data.Success":"Successfully imported.","Data.Failed":"Failed to import scores.","Data.edit":"Edit scores on your own","Data.howToEdit":"You can edit the score of each songs by detailed song information screen.","Data.howToEdit1":'Access to "songs not done yet" page and search by the song name you want to edit.',"Data.howToEdit2":"Search results will be shown, then click the name of the song.","Data.howToEdit3":"You can see detailed song information screen. Type your score and press save button.","Data.howToEdit4":"That's all!","Songs.title":"Songs","Songs.filterByLevel":"Level","Songs.filterByDifficulty":"Difficulty","Songs.detailedFilter":"Configure","Songs.filterByName":"Filter by song title","Songs.filterByFavorite":"Favorited","Songs.mode":"Aiming for...","Songs.mode0":"Higher BPI","Songs.mode1":"new A","Songs.mode2":"new AA","Songs.mode3":"new AAA","Songs.mode4":"new MAX","Songs.mode5":"new HARD CLEAR","Songs.mode6":"new EX-HARD CLEAR","Songs.mode7":"new FULLCOMBO","Songs.legend":"To see legends and usage, click here and go to help","Songs.updatedToday":"Only displays the scores updated today","Details.SaveButton":"Save","Details.typeNewScore":"My Record","Details.FavButton":"Favorite","Details.FavButtonRemove":"Delete favorite","Details.FavButtonRemoved":"Successfully deleted.","Details.FavButtonAdded":"Successfully added.","Details.Graph":"Graph","Details.Details":"Details","Details.Diffs":"Diffs","Details.ErrorIIDXInfo":"IIDXInfo is only available for level-12.","Common.Tweet":"Tweet","SongDetail.SongDetailHead":"Song","SongDetail.Notes":"Notes","SongDetail.WorldRecord":"World Record","SongDetail.Average":"Average","SongDetail.You":"You","SongDetail.Version":"Version","SongDetail.ScoreDetailHead":"Play Status","SongDiffs.Target":"Datasets","SongDiffs.WithinSameVersion":"Within the same version","SongDiffs.EachVersion":"Across versions","SongDetail.ClearState":"Clear State","SongDetail.MissCount":"Miss Count","SongDetail.LastPlayed":"Last Played","SongDetail.ScoreDetails":"Detail","Favorites.Title":"Favorites","NotPlayed.Title":"Not Played yet","Stats.title":"Statistics","Stats.TotalBPI":"Total BPI","Stats.EachDay":"Total and BPI per day","Stats.UpdatedSongs":"New records","Stats.UpdatedSum":"The total of updated songs","Stats.Average":"Average BPI","Stats.PossibleToGetBetter":"Songs Possible to Get better","Compare.Title":"Compare","Compare.From":"Data source","Compare.To":"Compare with","Settings.title":"Settings","Settings.language":"Language","Settings.dataStore":"Version","Settings.delete":"Delete all data","Settings.noteLang":"Select language you want to use. Please contribute to improve the quality of translation.(contact @notAesthet1c)","Settings.noteMes1":"Registering scores in older IIDX makes you able to compare scores across versions.","Settings.inaccurateMes":"Please note that since BPI in older IIDX versions will also be calculated with the latest WR and average scores so they would be rather inaccurate than them at the time.","Settings.Update":"Update","Settings.UpdateResourcePacks":"Update definition file","Settings.currentVersion":"Current version of the definition data:","Settings.updateWarning":"This process may take a few minutes."},Zt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.createElement(Vt.b,null,n.createElement(Vt.c,{to:[Wt]},(function(e){return n.createElement(me.a,{locale:e.state.lang,messages:"ja"===e.state.lang?qt:Qt},n.createElement(m.a,null,n.createElement(ue,{global:e}),n.createElement(xt.a,{path:"/",exact:!0,component:pe}),n.createElement(xt.a,{path:"/data",exact:!0,render:function(t){return n.createElement(We,{global:e})}}),n.createElement(xt.a,{path:"/songs",exact:!0,component:Lt}),n.createElement(xt.a,{path:"/favorite",exact:!0,component:Tt}),n.createElement(xt.a,{path:"/notPlayed",exact:!0,component:Ht}),n.createElement(xt.a,{path:"/stats",exact:!0,component:Ut}),n.createElement(xt.a,{path:"/compare",exact:!0,component:Kt}),n.createElement(xt.a,{path:"/settings",exact:!0,render:function(t){return n.createElement(_t,{global:e})}})))})))}}]),t}(n.Component),$t=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).storage=void 0,a.songsDB=void 0,a.wait=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return new Promise((function(t){setTimeout(t,e)}))},a.storage=new He,a.songsDB=new Fe,a.state={show:!0},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(ve.a)(ge.a.mark((function e(){var t,a,n;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.songsDB.getAll();case 3:if(!(e.sent.length>0)){e.next=6;break}return e.abrupt("return",this.setState({show:!1}));case 6:return t=we(0),e.next=9,fetch("https://files.poyashi.me/json/songs.json").then((function(e){return e.json()}));case 9:a=e.sent,n=0;case 12:if(!(n<a.body.length)){e.next=19;break}return e.next=15,this.songsDB.setItem(Object.assign(a.body[n],{isFavorited:!1,isCreated:!1,updatedAt:t}));case 15:this.wait(3);case 16:++n,e.next=12;break;case 19:return localStorage.setItem("isSingle","true"),localStorage.setItem("lastDefFileVer",a.version),e.abrupt("return",this.setState({show:!1}));case 24:e.prev=24,e.t0=e.catch(0),console.log(e.t0);case 27:case"end":return e.stop()}}),e,this,[[0,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.show?n.createElement("div",{id:"overlayLayout"},n.createElement("div",null,n.createElement(Ve.a,null)),n.createElement("div",null,n.createElement("p",null,"Loading essential components..."))):null}}]),t}(n.Component),ea=a(567),ta=a(568),aa=a(266),na=Object(aa.a)({palette:{type:"light",primary:{50:"#dedede",100:"#808080",200:"#5e5e5e",300:"#4b4b4b",400:"#434343",500:"#3a3a3a",600:"#2d2d2d",700:"#272727",800:"#1c1c1c",900:"#111111",A100:"#cecece",A200:"#949494",A400:"#6f6f6f",A700:"#4c4c4c"},secondary:{50:"#d0e0e3",100:"#a2c4c9",200:"#76a5af",300:"#648c95",400:"#45818e",500:"#396872",600:"#2a5059",700:"#23434a",800:"#1f353a",900:"#0c343d",A100:"#a2c4c9",A200:"#76a5af",A400:"#45818e",A700:"#205966"}},breakpoints:{keys:["xs","sm","md","lg","xl"],values:{xs:360,sm:768,md:992,lg:1400,xl:1800}},overrides:{MuiButton:{root:{textTransform:"none"}}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.render(n.createElement((function(){return document.title="BPI Manager",n.createElement(ea.a,{theme:na},n.createElement(ta.a,null),n.createElement($t,null),n.createElement(Zt,null))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[308,1,2]]]);
//# sourceMappingURL=main.2e655fcc.chunk.js.map